(function(){"use strict";const Or=Symbol("Comlink.proxy"),sn=Symbol("Comlink.endpoint"),an=Symbol("Comlink.releaseProxy"),Nt=Symbol("Comlink.thrown"),Hr=t=>typeof t=="object"&&t!==null||typeof t=="function",on={canHandle:t=>Hr(t)&&t[Or],serialize(t){const{port1:e,port2:r}=new MessageChannel;return Mt(t,e),[r,[r]]},deserialize(t){return t.start(),fn(t)}},cn={canHandle:t=>Hr(t)&&Nt in t,serialize({value:t}){let e;return t instanceof Error?e={isError:!0,value:{message:t.message,name:t.name,stack:t.stack}}:e={isError:!1,value:t},[e,[]]},deserialize(t){throw t.isError?Object.assign(new Error(t.value.message),t.value):t.value}},Ue=new Map([["proxy",on],["throw",cn]]);function Mt(t,e=self){e.addEventListener("message",function r(u){if(!u||!u.data)return;const{id:n,type:s,path:i}=Object.assign({path:[]},u.data),a=(u.data.argumentList||[]).map(Pe);let o;try{const c=i.slice(0,-1).reduce((l,E)=>l[E],t),f=i.reduce((l,E)=>l[E],t);switch(s){case 0:o=f;break;case 1:c[i.slice(-1)[0]]=Pe(u.data.value),o=!0;break;case 2:o=f.apply(c,a);break;case 3:{const l=new f(...a);o=dn(l)}break;case 4:{const{port1:l,port2:E}=new MessageChannel;Mt(t,E),o=hn(l,[l])}break;case 5:o=void 0;break}}catch(c){o={value:c,[Nt]:0}}Promise.resolve(o).catch(c=>({value:c,[Nt]:0})).then(c=>{const[f,l]=Wt(c);e.postMessage(Object.assign(Object.assign({},f),{id:n}),l),s===5&&(e.removeEventListener("message",r),Ir(e))})}),e.start&&e.start()}function ln(t){return t.constructor.name==="MessagePort"}function Ir(t){ln(t)&&t.close()}function fn(t,e){return jt(t,[],e)}function dt(t){if(t)throw new Error("Proxy has been released and is not useable")}function jt(t,e=[],r=function(){}){let u=!1;const n=new Proxy(r,{get(s,i){if(dt(u),i===an)return()=>Ke(t,{type:5,path:e.map(a=>a.toString())}).then(()=>{Ir(t),u=!0});if(i==="then"){if(e.length===0)return{then:()=>n};const a=Ke(t,{type:0,path:e.map(o=>o.toString())}).then(Pe);return a.then.bind(a)}return jt(t,[...e,i])},set(s,i,a){dt(u);const[o,c]=Wt(a);return Ke(t,{type:1,path:[...e,i].map(f=>f.toString()),value:o},c).then(Pe)},apply(s,i,a){dt(u);const o=e[e.length-1];if(o===sn)return Ke(t,{type:4}).then(Pe);if(o==="bind")return jt(t,e.slice(0,-1));const[c,f]=Lr(a);return Ke(t,{type:2,path:e.map(l=>l.toString()),argumentList:c},f).then(Pe)},construct(s,i){dt(u);const[a,o]=Lr(i);return Ke(t,{type:3,path:e.map(c=>c.toString()),argumentList:a},o).then(Pe)}});return n}function Dn(t){return Array.prototype.concat.apply([],t)}function Lr(t){const e=t.map(Wt);return[e.map(r=>r[0]),Dn(e.map(r=>r[1]))]}const Nr=new WeakMap;function hn(t,e){return Nr.set(t,e),t}function dn(t){return Object.assign(t,{[Or]:!0})}function Wt(t){for(const[e,r]of Ue)if(r.canHandle(t)){const[u,n]=r.serialize(t);return[{type:3,name:e,value:u},n]}return[{type:0,value:t},Nr.get(t)||[]]}function Pe(t){switch(t.type){case 3:return Ue.get(t.name).deserialize(t.value);case 0:return t.value}}function Ke(t,e,r){return new Promise(u=>{const n=pn();t.addEventListener("message",function s(i){!i.data||!i.data.id||i.data.id!==n||(t.removeEventListener("message",s),u(i.data))}),t.start&&t.start(),t.postMessage(Object.assign({id:n},e),r)})}function pn(){return new Array(4).fill(0).map(()=>Math.floor(Math.random()*Number.MAX_SAFE_INTEGER).toString(16)).join("-")}var pt,An=new Uint8Array(16);function Cn(){if(!pt&&(pt=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||typeof msCrypto<"u"&&typeof msCrypto.getRandomValues=="function"&&msCrypto.getRandomValues.bind(msCrypto),!pt))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return pt(An)}var gn=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function Fn(t){return typeof t=="string"&&gn.test(t)}for(var q=[],zt=0;zt<256;++zt)q.push((zt+256).toString(16).substr(1));function En(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,r=(q[t[e+0]]+q[t[e+1]]+q[t[e+2]]+q[t[e+3]]+"-"+q[t[e+4]]+q[t[e+5]]+"-"+q[t[e+6]]+q[t[e+7]]+"-"+q[t[e+8]]+q[t[e+9]]+"-"+q[t[e+10]]+q[t[e+11]]+q[t[e+12]]+q[t[e+13]]+q[t[e+14]]+q[t[e+15]]).toLowerCase();if(!Fn(r))throw TypeError("Stringified UUID is invalid");return r}function yn(t,e,r){t=t||{};var u=t.random||(t.rng||Cn)();if(u[6]=u[6]&15|64,u[8]=u[8]&63|128,e){r=r||0;for(var n=0;n<16;++n)e[r+n]=u[n];return e}return En(u)}class Mr{constructor(){this.listeners=new Set}get hasListeners(){return this.listeners.size>0}dispatch(e){this.listeners.forEach(r=>r(e))}on(e,r=!0){if(this.listeners.add(e),r)return{dispose:()=>{this.off(e)}}}off(e){this.listeners.delete(e)}once(e,r=!1){const u=n=>{e(n),this.off(u)};return this.on(u,r)}disposeListeners(){this.listeners=new Set}}class Ve extends Mr{constructor(e=1){super(),this.needsToFireAmount=e,this.firedTimes=0}get fired(){return new Promise(e=>this.once(e,!1))}get hasFired(){return this.firedTimes>=this.needsToFireAmount}setFiredTimes(e){this.firedTimes=e}resetSignal(){this.data=void 0,this.firedTimes=0}dispatch(e){if(this.firedTimes<this.needsToFireAmount&&this.firedTimes++,this.data=e,this.hasFired)return super.dispatch(e)}on(e,r=!0){return this.hasFired&&e(this.data),super.on(e,r)}}function vn(){if(!(!navigator.userAgentData&&/Safari\//.test(navigator.userAgent)&&!/Chrom(e|ium)\//.test(navigator.userAgent))||!indexedDB.databases)return Promise.resolve();let e;return new Promise(r=>{const u=()=>indexedDB.databases().finally(r);e=setInterval(u,100),u()}).finally(()=>clearInterval(e))}function Be(t){return new Promise((e,r)=>{t.oncomplete=t.onsuccess=()=>e(t.result),t.onabort=t.onerror=()=>r(t.error)})}function Gt(t,e){const r=vn().then(()=>{const u=indexedDB.open(t);return u.onupgradeneeded=()=>u.result.createObjectStore(e),Be(u)});return(u,n)=>r.then(s=>n(s.transaction(e,u).objectStore(e)))}let Ut;function Oe(){return Ut||(Ut=Gt("keyval-store","keyval")),Ut}function Kt(t,e=Oe()){return e("readonly",r=>Be(r.get(t)))}function Vt(t,e,r=Oe()){return r("readwrite",u=>(u.put(e,t),Be(u.transaction)))}function wn(t,e=Oe()){return e("readwrite",r=>(t.forEach(u=>r.put(u[1],u[0])),Be(r.transaction)))}function mn(t,e=Oe()){return e("readonly",r=>Promise.all(t.map(u=>Be(r.get(u)))))}function Sn(t,e=Oe()){return e("readwrite",r=>(r.delete(t),Be(r.transaction)))}function bn(t=Oe()){return t("readwrite",e=>(e.clear(),Be(e.transaction)))}function Bn(t,e){return t("readonly",r=>(r.openCursor().onsuccess=function(){!this.result||(e(this.result),this.result.continue())},Be(r.transaction)))}function _n(t=Oe()){const e=[];return Bn(t,r=>e.push(r.key)).then(()=>e)}const xn=Gt("virtual-fs","virtual-fs-store"),Rn=t=>Kt(t,xn);class it{constructor(e="virtual-fs"){this.storeName=e,this.store=Gt(e,`${e}-store`)}set(e,r){return Vt(e,r,this.store)}get(e){return Kt(e,this.store)}del(e){return Sn(e,this.store)}setMany(e){return wn(e,this.store)}getMany(e){return mn(e,this.store)}clear(){return bn(this.store)}async has(e){return await Rn(e)!==void 0}keys(){return _n(this.store)}}class jr{constructor(e,r,u=[],n=yn()){this._name=r,this.basePath=u,this.uuid=n,this._idbWrapper=null,this.parent=null,this.isVirtual=!0,this.setupDone=new Ve,e===null?this._idbWrapper=new it:e instanceof it?this._idbWrapper=e:this.parent=e}get path(){return this.parent?this.parent.path.concat(this.name):this.basePath}get hasParentContext(){return this.path.length>1}get idbKey(){return this.path.length===0?this._name:this.path.join("/")}get idbWrapper(){return this._idbWrapper===null?this.parent.idbWrapper:this._idbWrapper}get name(){return this._name}getParent(){return this.parent}async isSameEntry(e){return e.idbKey===this.idbKey}async queryPermission(e){return"granted"}async requestPermission(e){return"granted"}}const kn=new TextEncoder,Wr=Symbol("writeMethod");class Tn{constructor(e){this.fileHandle=e,this.tmpData=new Uint8Array,this.cursorOffset=0,this.locked=!1}async write(e){let r;if(typeof e=="string")r=kn.encode(e);else if(e instanceof Blob)r=await e.arrayBuffer().then(u=>new Uint8Array(u));else if("type"in e){if(e.type==="seek")return await this.seek(e.position);if(e.type==="truncate")return await this.truncate(e.size);if(e.type==="write")return e.position&&await this.seek(e.position),await this.write(e.data);throw new Error(`Unknown data type: ${e.type}`)}else ArrayBuffer.isView(e)?r=new Uint8Array(e.buffer):r=new Uint8Array(e);this.tmpData=new Uint8Array([...this.tmpData.slice(0,this.cursorOffset),...r]),this.cursorOffset=this.tmpData.length}async seek(e){this.cursorOffset=Math.floor(e)}async truncate(e){this.tmpData=this.tmpData.slice(0,e),this.cursorOffset>e&&(this.cursorOffset=e)}async close(){await this.fileHandle[Wr](this.tmpData)}async abort(){throw new Error("WriteStream was aborted")}getWriter(){}}var Jt=function(t,e){return Jt=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,u){r.__proto__=u}||function(r,u){for(var n in u)Object.prototype.hasOwnProperty.call(u,n)&&(r[n]=u[n])},Jt(t,e)};function $n(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");Jt(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}function zr(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],u=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&u>=t.length&&(t=void 0),{value:t&&t[u++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}var Xt,At=[],Gr=function(){function t(e){this.active=!0,this.effects=[],this.cleanups=[],this.vm=e}return t.prototype.run=function(e){if(this.active)try{return this.on(),e()}finally{this.off()}},t.prototype.on=function(){this.active&&(At.push(this),Xt=this)},t.prototype.off=function(){this.active&&(At.pop(),Xt=At[At.length-1])},t.prototype.stop=function(){this.active&&(this.vm.$destroy(),this.effects.forEach(function(e){return e.stop()}),this.cleanups.forEach(function(e){return e()}),this.active=!1)},t}();(function(t){$n(e,t);function e(r){r===void 0&&(r=!1);var u=this,n=void 0;return Nn(function(){n=Qr(Ft())}),u=t.call(this,n)||this,r||Pn(u),u}return e})(Gr);function Pn(t,e){var r;if(e=e||Xt,e&&e.active){e.effects.push(t);return}var u=(r=Jr())===null||r===void 0?void 0:r.proxy;u&&u.$on("hook:destroyed",function(){return t.stop()})}function On(t){if(!t.scope){var e=new Gr(t.proxy);t.scope=e,t.proxy.$on("hook:destroyed",function(){return e.stop()})}return t.scope}var Qt=void 0;try{var He=require("vue");He&&Kr(He)?Qt=He:He&&"default"in He&&Kr(He.default)&&(Qt=He.default)}catch{}var Ct=null,Je=null,gt=!0,Ur="__composition_api_installed__";function Kr(t){return t&&Le(t)&&t.name==="Vue"}function Hn(t){return Ct&&Ee(t,Ur)}function Ft(){return Ct}function In(){var t=Ct||Qt;return t}function Ln(t){Ct=t,Object.defineProperty(t,Ur,{configurable:!0,writable:!0,value:!0})}function Nn(t){var e=gt;gt=!1;try{t()}finally{gt=e}}function Vr(t){if(!!gt){var e=Je;e==null||e.scope.off(),Je=t,Je==null||Je.scope.on()}}function Jr(){return Je}var qt=new WeakMap;function Et(t){if(qt.has(t))return qt.get(t);var e={proxy:t,update:t.$forceUpdate,type:t.$options,uid:t._uid,emit:t.$emit.bind(t),parent:null,root:null};On(e);var r=["data","props","attrs","refs","vnode","slots"];return r.forEach(function(u){se(e,u,{get:function(){return t["$".concat(u)]}})}),se(e,"isMounted",{get:function(){return t._isMounted}}),se(e,"isUnmounted",{get:function(){return t._isDestroyed}}),se(e,"isDeactivated",{get:function(){return t._inactive}}),se(e,"emitted",{get:function(){return t._events}}),qt.set(t,e),t.$parent&&(e.parent=Et(t.$parent)),t.$root&&(e.root=Et(t.$root)),e}var Mn=function(t){return Object.prototype.toString.call(t)};function Xr(t){return typeof t=="function"&&/native code/.test(t.toString())}var jn=typeof Symbol<"u"&&Xr(Symbol)&&typeof Reflect<"u"&&Xr(Reflect.ownKeys),Xe=function(t){return t};function se(t,e,r){var u=r.get,n=r.set;Object.defineProperty(t,e,{enumerable:!0,configurable:!0,get:u||Xe,set:n||Xe})}function Zt(t,e,r,u){Object.defineProperty(t,e,{value:r,enumerable:!!u,writable:!0,configurable:!0})}function Ee(t,e){return Object.hasOwnProperty.call(t,e)}function Ie(t){return Array.isArray(t)}var Wn=4294967295;function zn(t){var e=parseFloat(String(t));return e>=0&&Math.floor(e)===e&&isFinite(t)&&e<=Wn}function yt(t){return t!==null&&typeof t=="object"}function ye(t){return Mn(t)==="[object Object]"}function Le(t){return typeof t=="function"}function Qr(t,e){e===void 0&&(e={});var r=t.config.silent;t.config.silent=!0;var u=new t(e);return t.config.silent=r,u}function Gn(t){var e=Ft();return e&&t instanceof e}function Un(t,e){return function(){for(var r=[],u=0;u<arguments.length;u++)r[u]=arguments[u];if(!!t.$scopedSlots[e])return t.$scopedSlots[e].apply(t,r)}}function Kn(t,e){var r;if(!t)r={};else{if(t._normalized)return t._normalized;r={};for(var u in t)t[u]&&u[0]!=="$"&&(r[u]=!0)}for(var u in e)u in r||(r[u]=!0);return r}var st="composition-api.refKey",qr=new WeakMap,Vn=new WeakMap,Jn=new WeakMap;function Xn(t,e,r){var u=Ft(),n=u.util;n.warn;var s=n.defineReactive,i=t.__ob__;function a(){i&&yt(r)&&!Ee(r,"__ob__")&&tr(r)}if(Ie(t)){if(zn(e))return t.length=Math.max(t.length,e),t.splice(e,1,r),a(),r;if(e==="length"&&r!==t.length)return t.length=r,i==null||i.dep.notify(),r}return e in t&&!(e in Object.prototype)?(t[e]=r,a(),r):t._isVue||i&&i.vmCount?r:i?(s(i.value,e,r),tu(t,e,r),a(),i.dep.notify(),r):(t[e]=r,r)}var Zr=function(){function t(e){var r=e.get,u=e.set;se(this,"value",{get:r,set:u})}return t}();function Yr(t,e,r){e===void 0&&(e=!1),r===void 0&&(r=!1);var u=new Zr(t);r&&(u.effect=!0);var n=Object.seal(u);return e&&Jn.set(n,!0),n}function eu(t){var e;if(ne(t))return t;var r=nu((e={},e[st]=t,e));return Yr({get:function(){return r[st]},set:function(u){return r[st]=u}})}function ne(t){return t instanceof Zr}function Qn(t){if(!ye(t))return t;var e={};for(var r in t)e[r]=qn(t,r);return e}function qn(t,e){e in t||Xn(t,e,void 0);var r=t[e];return ne(r)?r:Yr({get:function(){return t[e]},set:function(u){return t[e]=u}})}var Yt="__v_skip";function Qe(t){var e;return Boolean(t&&Ee(t,"__ob__")&&typeof t.__ob__=="object"&&((e=t.__ob__)===null||e===void 0?void 0:e[Yt]))}function at(t){var e;return Boolean(t&&Ee(t,"__ob__")&&typeof t.__ob__=="object"&&!(!((e=t.__ob__)===null||e===void 0)&&e[Yt]))}function er(t){if(!(!ye(t)||Qe(t)||Ie(t)||ne(t)||Gn(t)||qr.has(t))){qr.set(t,!0);for(var e=Object.keys(t),r=0;r<e.length;r++)tu(t,e[r])}}function tu(t,e,r){if(e!=="__ob__"&&!Qe(t[e])){var u,n,s=Object.getOwnPropertyDescriptor(t,e);if(s){if(s.configurable===!1)return;u=s.get,n=s.set,(!u||n)&&arguments.length===2&&(r=t[e])}er(r),se(t,e,{get:function(){var a=u?u.call(t):r;return e!==st&&ne(a)?a.value:a},set:function(a){u&&!n||(e!==st&&ne(r)&&!ne(a)?r.value=a:(n&&n.call(t,a),r=a),er(a))}})}}function ru(t){var e=In(),r;if(e.observable)r=e.observable(t);else{var u=Qr(e,{data:{$$state:t}});r=u._data.$$state}return Ee(r,"__ob__")||tr(r),r}function tr(t,e){var r,u;if(e===void 0&&(e=new Set),!(e.has(t)||Ee(t,"__ob__")||!Object.isExtensible(t))){Zt(t,"__ob__",Zn(t)),e.add(t);try{for(var n=zr(Object.keys(t)),s=n.next();!s.done;s=n.next()){var i=s.value,a=t[i];!(ye(a)||Ie(a))||Qe(a)||!Object.isExtensible(a)||tr(a,e)}}catch(o){r={error:o}}finally{try{s&&!s.done&&(u=n.return)&&u.call(n)}finally{if(r)throw r.error}}}}function Zn(t){return t===void 0&&(t={}),{value:t,dep:{notify:Xe,depend:Xe,addSub:Xe,removeSub:Xe}}}function uu(){return ru({}).__ob__}function nu(t){if(!yt(t)||!(ye(t)||Ie(t))||Qe(t)||!Object.isExtensible(t))return t;var e=ru(t);return er(e),e}function Yn(t){if(!(ye(t)||Ie(t))||!Object.isExtensible(t))return t;var e=uu();return e[Yt]=!0,Zt(t,"__ob__",e),Vn.set(t,!0),t}function ei(t,e,r){var u=t.__composition_api_state__=t.__composition_api_state__||{};u[e]=r}function ti(t,e){return(t.__composition_api_state__||{})[e]}var _e={set:ei,get:ti};function ri(t,e,r){var u=t.$options.props;!(e in t)&&!(u&&Ee(u,e))&&(ne(r)?se(t,e,{get:function(){return r.value},set:function(n){r.value=n}}):se(t,e,{get:function(){return at(r)&&r.__ob__.dep.depend(),r},set:function(n){r=n}}))}function ui(t){var e=_e.get(t,"rawBindings")||{};if(!(!e||!Object.keys(e).length)){for(var r=t.$refs,u=_e.get(t,"refs")||[],n=0;n<u.length;n++){var s=u[n],i=e[s];!r[s]&&i&&ne(i)&&(i.value=null)}for(var a=Object.keys(r),o=[],n=0;n<a.length;n++){var s=a[n],i=e[s];r[s]&&i&&ne(i)&&(i.value=r[s],o.push(s))}_e.set(t,"refs",o)}}function iu(t){for(var e=[t._vnode];e.length;){var r=e.pop();if(r&&(r.context&&ui(r.context),r.children))for(var u=0;u<r.children.length;++u)e.push(r.children[u])}}function su(t,e){var r,u;if(!!t){var n=_e.get(t,"attrBindings");if(!(!n&&!e)){if(!n){var s=nu({});n={ctx:e,data:s},_e.set(t,"attrBindings",n),se(e,"attrs",{get:function(){return n==null?void 0:n.data},set:function(){}})}var i=t.$attrs,a=function(l){Ee(n.data,l)||se(n.data,l,{get:function(){return t.$attrs[l]}})};try{for(var o=zr(Object.keys(i)),c=o.next();!c.done;c=o.next()){var f=c.value;a(f)}}catch(l){r={error:l}}finally{try{c&&!c.done&&(u=o.return)&&u.call(o)}finally{if(r)throw r.error}}}}}function au(t,e){var r=t.$options._parentVnode;if(!!r){for(var u=_e.get(t,"slots")||[],n=Kn(r.data.scopedSlots,t.$slots),s=0;s<u.length;s++){var i=u[s];n[i]||delete e[i]}for(var a=Object.keys(n),s=0;s<a.length;s++){var i=a[s];e[i]||(e[i]=Un(t,i))}_e.set(t,"slots",a)}}function rr(t,e,r){var u=Jr();Vr(t);try{return e(t)}catch(n){if(r)r(n);else throw n}finally{Vr(u)}}function ni(t){t.mixin({beforeCreate:e,mounted:function(){iu(this)},beforeUpdate:function(){su(this)},updated:function(){iu(this)}});function e(){var i=this,a=i.$options,o=a.setup,c=a.render;if(c&&(a.render=function(){for(var l=this,E=[],F=0;F<arguments.length;F++)E[F]=arguments[F];return rr(Et(i),function(){return c.apply(l,E)})}),!!o&&!!Le(o)){var f=a.data;a.data=function(){return r(i,i.$props),Le(f)?f.call(i,i):f||{}}}}function r(i,a){a===void 0&&(a={});var o=i.$options.setup,c=s(i),f=Et(i);f.setupContext=c,Zt(a,"__ob__",uu()),au(i,c.slots);var l;if(rr(f,function(){l=o(a,c)}),!!l){if(Le(l)){var E=l;i.$options.render=function(){return au(i,c.slots),rr(f,function(){return E()})};return}else if(yt(l)){at(l)&&(l=Qn(l)),_e.set(i,"rawBindings",l);var F=l;Object.keys(F).forEach(function(y){var A=F[y];if(!ne(A))if(at(A))Ie(A)&&(A=eu(A));else if(Le(A)){var v=A;A=A.bind(i),Object.keys(v).forEach(function(C){A[C]=v[C]})}else yt(A)?n(A)&&u(A):A=eu(A);ri(i,y,A)});return}}}function u(i,a){if(a===void 0&&(a=new Set),!a.has(i)&&!(!ye(i)||ne(i)||at(i)||Qe(i))){var o=Ft(),c=o.util.defineReactive;Object.keys(i).forEach(function(f){var l=i[f];c(i,f,l),l&&(a.add(l),u(l,a))})}}function n(i,a){return a===void 0&&(a=new Map),a.has(i)?a.get(i):(a.set(i,!1),Ie(i)&&at(i)?(a.set(i,!0),!0):!ye(i)||Qe(i)||ne(i)?!1:Object.keys(i).some(function(o){return n(i[o],a)}))}function s(i){var a={slots:{}},o=["root","parent","refs","listeners","isServer","ssrContext"],c=["emit"];return o.forEach(function(f){var l="$".concat(f);se(a,f,{get:function(){return i[l]},set:function(){}})}),su(i,a),c.forEach(function(f){var l="$".concat(f);se(a,f,{get:function(){return function(){for(var E=[],F=0;F<arguments.length;F++)E[F]=arguments[F];var y=i[l];y.apply(i,E)}}})}),a}}function ou(t,e){if(!t)return e;if(!e)return t;for(var r,u,n,s=jn?Reflect.ownKeys(t):Object.keys(t),i=0;i<s.length;i++)r=s[i],r!=="__ob__"&&(u=e[r],n=t[r],Ee(e,r)?u!==n&&ye(u)&&!ne(u)&&ye(n)&&!ne(n)&&ou(n,u):e[r]=n);return e}function ii(t){Hn(t)||(t.config.optionMergeStrategies.setup=function(e,r){return function(n,s){return ou(Le(e)?e(n,s)||{}:void 0,Le(r)?r(n,s)||{}:void 0)}},Ln(t),ni(t))}var si={install:function(t){return ii(t)}};typeof window<"u"&&window.Vue&&window.Vue.use(si);class he extends jr{constructor(e,r,u,n=!1,s){super(e,r,s),this.inMemory=n,this.kind="file",this.isFile=!0,this.isDirectory=!1,u?this.setup(u):this.setupDone.dispatch()}get isFileStoredInMemory(){return this.fileData!==void 0}moveData(){if(!this.fileData)throw new Error(`No file data to move to IDB for file "${this.name}"`);const e=this.fileData;return this.fileData=void 0,this.inMemory=!1,e}async setup(e){this.fileData=globalThis.document?Yn(e):e;const r=this.path.join("/").startsWith("data/packages");if(this.inMemory||r&&e.length<5e4)return this.inMemory=!0,this.setupDone.dispatch();(!r||globalThis.document)&&await this.updateIdb(e),this.setupDone.dispatch()}async updateIdb(e){await this.idbWrapper.set(this.idbKey,e),this.fileData=void 0}async loadFromIdb(){if(this.fileData)return this.fileData;let e=await this.idbWrapper.get(this.idbKey);if(e===void 0)throw console.log(this.parent),new Error(`File not found: "${this.path.join("/")}"`);return e}serialize(){return{idbWrapper:this.idbWrapper.storeName,kind:"file",name:this.name,path:this.path,fileData:this.fileData}}static deserialize(e){return new he(e.idbWrapper?new it(e.idbWrapper):null,e.name,e.fileData,e.fileData!==void 0,e.path)}async isSameEntry(e){return this.parent===null?!1:super.isSameEntry(e)}async removeSelf(e=!0){await this.idbWrapper.del(this.idbKey),this.parent&&e&&this.parent.deleteChild(this.name)}async getFile(){const e=await this.loadFromIdb();return new File([e],this.name)}async createWritable(){return new Tn(this)}async[Wr](e){this.inMemory?this.fileData=e:await this.updateIdb(e)}}class ae extends jr{constructor(e,r,u,n=!1,s=[]){super(e,r,s),this.children=u,this.kind="directory",this.isDirectory=!0,this.isFile=!1,this.updateIdb(n)}get isDirectoryInMemory(){return this.children!==void 0}async moveToIdb(){const e=this.allInMemoryChildren();this.idbWrapper.setMany(e.map(r=>[r.idbKey,r.moveData()]))}moveData(){if(!this.children)throw new Error(`No directory data to move to IDB for directory "${this.name}"`);const e=[...this.children.values()].map(r=>r.name);return this.children=void 0,e}allInMemoryChildren(){if(!this.children)return[];const e=[this];for(const r of this.children.values())r instanceof ae?r.isDirectoryInMemory&&e.push(...r.allInMemoryChildren()):r.isFileStoredInMemory&&e.push(r);return e}async updateIdb(e=!1){e&&await this.idbWrapper.clear(),!this.children&&!await this.hasChildren()&&await this.idbWrapper.set(this.idbKey,[]),this.setupDone.dispatch()}async addChild(e){await this.has(e.name)||(this.children?this.children.set(e.name,e):await this.idbWrapper.set(this.idbKey,[...await this.fromIdb(),e.name]))}async fromIdb(){var e;return(e=await this.idbWrapper.get(this.idbKey))!=null?e:[]}async getChildren(){return this.children?[...this.children.values()]:await Promise.all((await this.fromIdb()).map(e=>this.getChild(e)).filter(e=>e!==void 0))}getChildPath(e){return this.path.concat(e).join("/")}async getChild(e){if(this.children)return this.children.get(e);if(await this.has(e)){const r=await this.idbWrapper.get(this.getChildPath(e));if(r instanceof Uint8Array)return new he(this,e);if(Array.isArray(r))return new ae(this,e)}}async deleteChild(e){this.children?this.children.delete(e):await this.idbWrapper.set(this.idbKey,(await this.fromIdb()).filter(r=>r!==e))}async hasChildren(){return this.children?this.children.size>0:(await this.fromIdb()).length>0}async has(e){return this.children?this.children.has(e):(await this.fromIdb()).includes(e)}serialize(){return{idbWrapper:this.idbWrapper.storeName,kind:"directory",name:this.name,path:this.path,children:this.children?[...this.children.values()].map(e=>e.serialize()):void 0}}static deserialize(e,r=null){var n;const u=new ae(r||new it(e.idbWrapper),e.name,void 0,!1,e.path);for(const s of(n=e.children)!=null?n:[])s.kind==="directory"?u.addChild(ae.deserialize(s,u)):u.addChild(new he(u,s.name,s.fileData));return u}async getDirectoryHandle(e,{create:r}={}){let u=await this.getChild(e);if(u&&u.kind==="file")throw new Error(`TypeMismatch: Expected directory with name "${e}", found file`);if(!u)if(r)u=new ae(this,e,this.children?new Map:void 0),await u.setupDone.fired,await this.addChild(u);else throw new Error(`No file with the name ${e} exists in this folder`);return u}async getFileHandle(e,{create:r,initialData:u}={}){let n=await this.getChild(e);if(n&&n.kind==="directory")throw new Error(`TypeMismatch: Expected file with name "${e}", found directory`);if(!n)if(r)n=new he(this,e,u!=null?u:new Uint8Array),await n.setupDone.fired,await this.addChild(n);else throw new Error(`No file with the name ${e} exists in this folder`);return n}async removeEntry(e,{recursive:r}={}){const u=await this.getChild(e);if(u){if(u.kind==="directory"&&!r&&await u.hasChildren())throw new Error('Cannot remove directory with children without "recursive" option being set to true')}else throw new Error(`No entry with the name ${e} exists in this folder`);await u.removeSelf(),await this.deleteChild(e)}async resolve(e){const r=[e.name];let u=e.getParent();for(;u!==null&&!await u.isSameEntry(this);)r.unshift(u.name),u=u.getParent();return u===null?null:r}async removeSelf(e=!0){const r=await this.getChildren();for(const u of r)await u.removeSelf(!1);this.children||await this.idbWrapper.del(this.idbKey),this.parent&&e&&this.parent.deleteChild(this.name)}[Symbol.asyncIterator](){return this.entries()}keys(){return this.children?this.children.keys():{childNamesPromise:this.fromIdb(),[Symbol.asyncIterator](){return{i:0,childNamesPromise:this.childNamesPromise,async next(){const e=await this.childNamesPromise;return this.i<e.length?{done:!1,value:e[this.i++]}:{done:!0}}}}}}entries(){return this.children?this.children.entries():{childrenPromise:this.getChildren(),[Symbol.asyncIterator](){return{i:0,childrenPromise:this.childrenPromise,async next(){const e=await this.childrenPromise;return this.i<e.length?{done:!1,value:[e[this.i].name,e[this.i++]]}:{done:!0}}}}}}values(){return this.children?this.children.values():{childrenPromise:this.getChildren(),[Symbol.asyncIterator](){return{i:0,childrenPromise:this.childrenPromise,async next(){const e=await this.childrenPromise;return this.i<e.length?{done:!1,value:e[this.i++]}:{done:!0}}}}}}getEntries(){return this.values()}getDirectory(e,r={}){return this.getDirectoryHandle(e,r)}getFile(e,r={}){return this.getFileHandle(e,r)}}Ue.set("VirtualFileHandle",{canHandle:t=>t instanceof he,serialize:t=>[t.serialize(),[]],deserialize:t=>new he(null,t.name,t.fileData)}),Ue.set("VirtualDirectoryHandle",{canHandle:t=>t instanceof ae,serialize:t=>[t.serialize(),[]],deserialize:t=>ae.deserialize(t)}),Ue.set("VirtualDirectoryHandleArray",{canHandle:t=>Array.isArray(t)&&t.every(({directory:e})=>e instanceof ae),serialize:t=>[t.map(({directory:e,...r})=>({directory:e.serialize(),...r})),[]],deserialize:t=>t.map(({directory:e,...r})=>({directory:ae.deserialize(e),...r}))}),Ue.set("VirtualFileHandleArray",{canHandle:t=>Array.isArray(t)&&t.every(({fileHandle:e})=>e instanceof he),serialize:t=>[t.map(({fileHandle:e,...r})=>({fileHandle:e.serialize(),...r})),[]],deserialize:t=>t.map(({fileHandle:e,...r})=>({fileHandle:he.deserialize(e),...r}))});var ai=Object.defineProperty,oi=Object.defineProperties,ci=Object.getOwnPropertyDescriptors,cu=Object.getOwnPropertySymbols,li=Object.prototype.hasOwnProperty,fi=Object.prototype.propertyIsEnumerable,lu=(t,e,r)=>e in t?ai(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,qe=(t,e)=>{for(var r in e||(e={}))li.call(e,r)&&lu(t,r,e[r]);if(cu)for(var r of cu(e))fi.call(e,r)&&lu(t,r,e[r]);return t},vt=(t,e)=>oi(t,ci(e));function fu(t,e){for(var r=0,u=t.length-1;u>=0;u--){var n=t[u];n==="."?t.splice(u,1):n===".."?(t.splice(u,1),r++):r&&(t.splice(u,1),r--)}if(e)for(;r--;r)t.unshift("..");return t}var Di=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/,ur=function(t){return Di.exec(t).slice(1)};function wt(){for(var t="",e=!1,r=arguments.length-1;r>=-1&&!e;r--){var u=r>=0?arguments[r]:"/";if(typeof u!="string")throw new TypeError("Arguments to path.resolve must be strings");if(!u)continue;t=u+"/"+t,e=u.charAt(0)==="/"}return t=fu(sr(t.split("/"),function(n){return!!n}),!e).join("/"),(e?"/":"")+t||"."}function nr(t){var e=ir(t),r=di(t,-1)==="/";return t=fu(sr(t.split("/"),function(u){return!!u}),!e).join("/"),!t&&!e&&(t="."),t&&r&&(t+="/"),(e?"/":"")+t}function ir(t){return t.charAt(0)==="/"}function Du(){var t=Array.prototype.slice.call(arguments,0);return nr(sr(t,function(e,r){if(typeof e!="string")throw new TypeError("Arguments to path.join must be strings");return e}).join("/"))}function hu(t,e){t=wt(t).substr(1),e=wt(e).substr(1);function r(c){for(var f=0;f<c.length&&c[f]==="";f++);for(var l=c.length-1;l>=0&&c[l]==="";l--);return f>l?[]:c.slice(f,l-f+1)}for(var u=r(t.split("/")),n=r(e.split("/")),s=Math.min(u.length,n.length),i=s,a=0;a<s;a++)if(u[a]!==n[a]){i=a;break}for(var o=[],a=i;a<u.length;a++)o.push("..");return o=o.concat(n.slice(i)),o.join("/")}var du="/",pu=":";function Au(t){var e=ur(t),r=e[0],u=e[1];return!r&&!u?".":(u&&(u=u.substr(0,u.length-1)),r+u)}function Cu(t,e){var r=ur(t)[2];return e&&r.substr(-1*e.length)===e&&(r=r.substr(0,r.length-e.length)),r}function gu(t){return ur(t)[3]}var hi={extname:gu,basename:Cu,dirname:Au,sep:du,delimiter:pu,relative:hu,join:Du,isAbsolute:ir,normalize:nr,resolve:wt};function sr(t,e){if(t.filter)return t.filter(e);for(var r=[],u=0;u<t.length;u++)e(t[u],u,t)&&r.push(t[u]);return r}var di="ab".substr(-1)==="b"?function(t,e,r){return t.substr(e,r)}:function(t,e,r){return e<0&&(e=t.length+e),t.substr(e,r)},ar=Object.freeze({__proto__:null,resolve:wt,normalize:nr,isAbsolute:ir,join:Du,relative:hu,sep:du,delimiter:pu,dirname:Au,basename:Cu,extname:gu,default:hi});function Fu(){throw new Error("setTimeout has not been defined")}function Eu(){throw new Error("clearTimeout has not been defined")}var xe=Fu,Re=Eu,Ze;typeof window<"u"?Ze=window:typeof self<"u"?Ze=self:Ze={},typeof Ze.setTimeout=="function"&&(xe=setTimeout),typeof Ze.clearTimeout=="function"&&(Re=clearTimeout);function yu(t){if(xe===setTimeout)return setTimeout(t,0);if((xe===Fu||!xe)&&setTimeout)return xe=setTimeout,setTimeout(t,0);try{return xe(t,0)}catch{try{return xe.call(null,t,0)}catch{return xe.call(this,t,0)}}}function pi(t){if(Re===clearTimeout)return clearTimeout(t);if((Re===Eu||!Re)&&clearTimeout)return Re=clearTimeout,clearTimeout(t);try{return Re(t)}catch{try{return Re.call(null,t)}catch{return Re.call(this,t)}}}var ve=[],Ye=!1,Ne,mt=-1;function Ai(){!Ye||!Ne||(Ye=!1,Ne.length?ve=Ne.concat(ve):mt=-1,ve.length&&vu())}function vu(){if(!Ye){var t=yu(Ai);Ye=!0;for(var e=ve.length;e;){for(Ne=ve,ve=[];++mt<e;)Ne&&Ne[mt].run();mt=-1,e=ve.length}Ne=null,Ye=!1,pi(t)}}function Ci(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)e[r-1]=arguments[r];ve.push(new wu(t,e)),ve.length===1&&!Ye&&yu(vu)}function wu(t,e){this.fun=t,this.array=e}wu.prototype.run=function(){this.fun.apply(null,this.array)};var gi="browser",Fi="browser",Ei=!0,yi=[],vi="",wi={},mi={},Si={};function Me(){}var bi=Me,Bi=Me,_i=Me,xi=Me,Ri=Me,ki=Me,Ti=Me;function $i(t){throw new Error("process.binding is not supported")}function Pi(){return"/"}function Oi(t){throw new Error("process.chdir is not supported")}function Hi(){return 0}var et=Ze.performance||{},Ii=et.now||et.mozNow||et.msNow||et.oNow||et.webkitNow||function(){return new Date().getTime()};function Li(t){var e=Ii.call(et)*.001,r=Math.floor(e),u=Math.floor(e%1*1e9);return t&&(r=r-t[0],u=u-t[1],u<0&&(r--,u+=1e9)),[r,u]}var Ni=new Date;function Mi(){var t=new Date,e=t-Ni;return e/1e3}var ji={nextTick:Ci,title:gi,browser:Ei,env:{NODE_ENV:"production"},argv:yi,version:vi,versions:wi,on:bi,addListener:Bi,once:_i,off:xi,removeListener:Ri,removeAllListeners:ki,emit:Ti,binding:$i,cwd:Pi,chdir:Oi,umask:Hi,hrtime:Li,platform:Fi,release:mi,config:Si,uptime:Mi};function Wi(t,e,r){return r={path:e,exports:{},require:function(u,n){return zi(u,n==null?r.path:n)}},t(r,r.exports),r.exports}function zi(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}const de="\\\\/",mu=`[^${de}]`,we="\\.",Gi="\\+",Ui="\\?",St="\\/",Ki="(?=.)",Su="[^/]",or=`(?:${St}|$)`,bu=`(?:^|${St})`,cr=`${we}{1,2}${or}`,Vi=`(?!${we})`,Ji=`(?!${bu}${cr})`,Xi=`(?!${we}{0,1}${or})`,Qi=`(?!${cr})`,qi=`[^.${St}]`,Zi=`${Su}*?`,Bu={DOT_LITERAL:we,PLUS_LITERAL:Gi,QMARK_LITERAL:Ui,SLASH_LITERAL:St,ONE_CHAR:Ki,QMARK:Su,END_ANCHOR:or,DOTS_SLASH:cr,NO_DOT:Vi,NO_DOTS:Ji,NO_DOT_SLASH:Xi,NO_DOTS_SLASH:Qi,QMARK_NO_DOT:qi,STAR:Zi,START_ANCHOR:bu},Yi=vt(qe({},Bu),{SLASH_LITERAL:`[${de}]`,QMARK:mu,STAR:`${mu}*?`,DOTS_SLASH:`${we}{1,2}(?:[${de}]|$)`,NO_DOT:`(?!${we})`,NO_DOTS:`(?!(?:^|[${de}])${we}{1,2}(?:[${de}]|$))`,NO_DOT_SLASH:`(?!${we}{0,1}(?:[${de}]|$))`,NO_DOTS_SLASH:`(?!${we}{1,2}(?:[${de}]|$))`,QMARK_NO_DOT:`[^.${de}]`,START_ANCHOR:`(?:^|[${de}])`,END_ANCHOR:`(?:[${de}]|$)`}),es={alnum:"a-zA-Z0-9",alpha:"a-zA-Z",ascii:"\\x00-\\x7F",blank:" \\t",cntrl:"\\x00-\\x1F\\x7F",digit:"0-9",graph:"\\x21-\\x7E",lower:"a-z",print:"\\x20-\\x7E ",punct:"\\-!\"#$%&'()\\*+,./:;<=>?@[\\]^_`{|}~",space:" \\t\\r\\n\\v\\f",upper:"A-Z",word:"A-Za-z0-9_",xdigit:"A-Fa-f0-9"};var je={MAX_LENGTH:1024*64,POSIX_REGEX_SOURCE:es,REGEX_BACKSLASH:/\\(?![*+?^${}(|)[\]])/g,REGEX_NON_SPECIAL_CHARS:/^[^@![\].,$*+?^{}()|\\/]+/,REGEX_SPECIAL_CHARS:/[-*+?.^${}(|)[\]]/,REGEX_SPECIAL_CHARS_BACKREF:/(\\?)((\W)(\3*))/g,REGEX_SPECIAL_CHARS_GLOBAL:/([-*+?.^${}(|)[\]])/g,REGEX_REMOVE_BACKSLASH:/(?:\[.*?[^\\]\]|\\(?=.))/g,REPLACEMENTS:{"***":"*","**/**":"**","**/**/**":"**"},CHAR_0:48,CHAR_9:57,CHAR_UPPERCASE_A:65,CHAR_LOWERCASE_A:97,CHAR_UPPERCASE_Z:90,CHAR_LOWERCASE_Z:122,CHAR_LEFT_PARENTHESES:40,CHAR_RIGHT_PARENTHESES:41,CHAR_ASTERISK:42,CHAR_AMPERSAND:38,CHAR_AT:64,CHAR_BACKWARD_SLASH:92,CHAR_CARRIAGE_RETURN:13,CHAR_CIRCUMFLEX_ACCENT:94,CHAR_COLON:58,CHAR_COMMA:44,CHAR_DOT:46,CHAR_DOUBLE_QUOTE:34,CHAR_EQUAL:61,CHAR_EXCLAMATION_MARK:33,CHAR_FORM_FEED:12,CHAR_FORWARD_SLASH:47,CHAR_GRAVE_ACCENT:96,CHAR_HASH:35,CHAR_HYPHEN_MINUS:45,CHAR_LEFT_ANGLE_BRACKET:60,CHAR_LEFT_CURLY_BRACE:123,CHAR_LEFT_SQUARE_BRACKET:91,CHAR_LINE_FEED:10,CHAR_NO_BREAK_SPACE:160,CHAR_PERCENT:37,CHAR_PLUS:43,CHAR_QUESTION_MARK:63,CHAR_RIGHT_ANGLE_BRACKET:62,CHAR_RIGHT_CURLY_BRACE:125,CHAR_RIGHT_SQUARE_BRACKET:93,CHAR_SEMICOLON:59,CHAR_SINGLE_QUOTE:39,CHAR_SPACE:32,CHAR_TAB:9,CHAR_UNDERSCORE:95,CHAR_VERTICAL_LINE:124,CHAR_ZERO_WIDTH_NOBREAK_SPACE:65279,SEP:ar.sep,extglobChars(t){return{"!":{type:"negate",open:"(?:(?!(?:",close:`))${t.STAR})`},"?":{type:"qmark",open:"(?:",close:")?"},"+":{type:"plus",open:"(?:",close:")+"},"*":{type:"star",open:"(?:",close:")*"},"@":{type:"at",open:"(?:",close:")"}}},globChars(t){return t===!0?Yi:Bu}},X=Wi(function(t,e){const{REGEX_BACKSLASH:r,REGEX_REMOVE_BACKSLASH:u,REGEX_SPECIAL_CHARS:n,REGEX_SPECIAL_CHARS_GLOBAL:s}=je;e.isObject=i=>i!==null&&typeof i=="object"&&!Array.isArray(i),e.hasRegexChars=i=>n.test(i),e.isRegexChar=i=>i.length===1&&e.hasRegexChars(i),e.escapeRegex=i=>i.replace(s,"\\$1"),e.toPosixSlashes=i=>i.replace(r,"/"),e.removeBackslashes=i=>i.replace(u,a=>a==="\\"?"":a),e.supportsLookbehinds=()=>{const i=ji.version.slice(1).split(".").map(Number);return i.length===3&&i[0]>=9||i[0]===8&&i[1]>=10},e.isWindows=i=>i&&typeof i.windows=="boolean"?i.windows:ar.sep==="\\",e.escapeLast=(i,a,o)=>{const c=i.lastIndexOf(a,o);return c===-1?i:i[c-1]==="\\"?e.escapeLast(i,a,c-1):`${i.slice(0,c)}\\${i.slice(c)}`},e.removePrefix=(i,a={})=>{let o=i;return o.startsWith("./")&&(o=o.slice(2),a.prefix="./"),o},e.wrapOutput=(i,a={},o={})=>{const c=o.contains?"":"^",f=o.contains?"":"$";let l=`${c}(?:${i})${f}`;return a.negated===!0&&(l=`(?:^(?!${l}).*$)`),l}});const{CHAR_ASTERISK:lr,CHAR_AT:ts,CHAR_BACKWARD_SLASH:ot,CHAR_COMMA:rs,CHAR_DOT:fr,CHAR_EXCLAMATION_MARK:Dr,CHAR_FORWARD_SLASH:_u,CHAR_LEFT_CURLY_BRACE:hr,CHAR_LEFT_PARENTHESES:dr,CHAR_LEFT_SQUARE_BRACKET:us,CHAR_PLUS:ns,CHAR_QUESTION_MARK:xu,CHAR_RIGHT_CURLY_BRACE:is,CHAR_RIGHT_PARENTHESES:Ru,CHAR_RIGHT_SQUARE_BRACKET:ss}=je,ku=t=>t===_u||t===ot,Tu=t=>{t.isPrefix!==!0&&(t.depth=t.isGlobstar?1/0:1)};var as=(t,e)=>{const r=e||{},u=t.length-1,n=r.parts===!0||r.scanToEnd===!0,s=[],i=[],a=[];let o=t,c=-1,f=0,l=0,E=!1,F=!1,y=!1,A=!1,v=!1,C=!1,m=!1,b=!1,x=!1,B=!1,L=0,N,S,P={value:"",depth:0,isGlob:!1};const K=()=>c>=u,d=()=>o.charCodeAt(c+1),I=()=>(N=S,o.charCodeAt(++c));for(;c<u;){S=I();let Z;if(S===ot){m=P.backslashes=!0,S=I(),S===hr&&(C=!0);continue}if(C===!0||S===hr){for(L++;K()!==!0&&(S=I());){if(S===ot){m=P.backslashes=!0,I();continue}if(S===hr){L++;continue}if(C!==!0&&S===fr&&(S=I())===fr){if(E=P.isBrace=!0,y=P.isGlob=!0,B=!0,n===!0)continue;break}if(C!==!0&&S===rs){if(E=P.isBrace=!0,y=P.isGlob=!0,B=!0,n===!0)continue;break}if(S===is&&(L--,L===0)){C=!1,E=P.isBrace=!0,B=!0;break}}if(n===!0)continue;break}if(S===_u){if(s.push(c),i.push(P),P={value:"",depth:0,isGlob:!1},B===!0)continue;if(N===fr&&c===f+1){f+=2;continue}l=c+1;continue}if(r.noext!==!0&&(S===ns||S===ts||S===lr||S===xu||S===Dr)===!0&&d()===dr){if(y=P.isGlob=!0,A=P.isExtglob=!0,B=!0,S===Dr&&c===f&&(x=!0),n===!0){for(;K()!==!0&&(S=I());){if(S===ot){m=P.backslashes=!0,S=I();continue}if(S===Ru){y=P.isGlob=!0,B=!0;break}}continue}break}if(S===lr){if(N===lr&&(v=P.isGlobstar=!0),y=P.isGlob=!0,B=!0,n===!0)continue;break}if(S===xu){if(y=P.isGlob=!0,B=!0,n===!0)continue;break}if(S===us){for(;K()!==!0&&(Z=I());){if(Z===ot){m=P.backslashes=!0,I();continue}if(Z===ss){F=P.isBracket=!0,y=P.isGlob=!0,B=!0;break}}if(n===!0)continue;break}if(r.nonegate!==!0&&S===Dr&&c===f){b=P.negated=!0,f++;continue}if(r.noparen!==!0&&S===dr){if(y=P.isGlob=!0,n===!0){for(;K()!==!0&&(S=I());){if(S===dr){m=P.backslashes=!0,S=I();continue}if(S===Ru){B=!0;break}}continue}break}if(y===!0){if(B=!0,n===!0)continue;break}}r.noext===!0&&(A=!1,y=!1);let H=o,oe="",h="";f>0&&(oe=o.slice(0,f),o=o.slice(f),l-=f),H&&y===!0&&l>0?(H=o.slice(0,l),h=o.slice(l)):y===!0?(H="",h=o):H=o,H&&H!==""&&H!=="/"&&H!==o&&ku(H.charCodeAt(H.length-1))&&(H=H.slice(0,-1)),r.unescape===!0&&(h&&(h=X.removeBackslashes(h)),H&&m===!0&&(H=X.removeBackslashes(H)));const D={prefix:oe,input:t,start:f,base:H,glob:h,isBrace:E,isBracket:F,isGlob:y,isExtglob:A,isGlobstar:v,negated:b,negatedExtglob:x};if(r.tokens===!0&&(D.maxDepth=0,ku(S)||i.push(P),D.tokens=i),r.parts===!0||r.tokens===!0){let Z;for(let O=0;O<s.length;O++){const ie=Z?Z+1:f,Y=s[O],te=t.slice(ie,Y);r.tokens&&(O===0&&f!==0?(i[O].isPrefix=!0,i[O].value=oe):i[O].value=te,Tu(i[O]),D.maxDepth+=i[O].depth),(O!==0||te!=="")&&a.push(te),Z=Y}if(Z&&Z+1<t.length){const O=t.slice(Z+1);a.push(O),r.tokens&&(i[i.length-1].value=O,Tu(i[i.length-1]),D.maxDepth+=i[i.length-1].depth)}D.slashes=s,D.parts=a}return D};const{MAX_LENGTH:bt,POSIX_REGEX_SOURCE:os,REGEX_NON_SPECIAL_CHARS:cs,REGEX_SPECIAL_CHARS_BACKREF:ls,REPLACEMENTS:$u}=je,fs=(t,e)=>{if(typeof e.expandRange=="function")return e.expandRange(...t,e);t.sort();const r=`[${t.join("-")}]`;try{new RegExp(r)}catch{return t.map(n=>X.escapeRegex(n)).join("..")}return r},tt=(t,e)=>`Missing ${t}: "${e}" - use "\\\\${e}" to match literal characters`,Pu=(t,e)=>{if(typeof t!="string")throw new TypeError("Expected a string");t=$u[t]||t;const r=qe({},e),u=typeof r.maxLength=="number"?Math.min(bt,r.maxLength):bt;let n=t.length;if(n>u)throw new SyntaxError(`Input length: ${n}, exceeds maximum allowed length: ${u}`);const s={type:"bos",value:"",output:r.prepend||""},i=[s],a=r.capture?"":"?:",o=X.isWindows(e),c=je.globChars(o),f=je.extglobChars(c),{DOT_LITERAL:l,PLUS_LITERAL:E,SLASH_LITERAL:F,ONE_CHAR:y,DOTS_SLASH:A,NO_DOT:v,NO_DOT_SLASH:C,NO_DOTS_SLASH:m,QMARK:b,QMARK_NO_DOT:x,STAR:B,START_ANCHOR:L}=c,N=w=>`(${a}(?:(?!${L}${w.dot?A:l}).)*?)`,S=r.dot?"":v,P=r.dot?b:x;let K=r.bash===!0?N(r):B;r.capture&&(K=`(${K})`),typeof r.noext=="boolean"&&(r.noextglob=r.noext);const d={input:t,index:-1,start:0,dot:r.dot===!0,consumed:"",output:"",prefix:"",backtrack:!1,negated:!1,brackets:0,braces:0,parens:0,quotes:0,globstar:!1,tokens:i};t=X.removePrefix(t,d),n=t.length;const I=[],H=[],oe=[];let h=s,D;const Z=()=>d.index===n-1,O=d.peek=(w=1)=>t[d.index+w],ie=d.advance=()=>t[++d.index]||"",Y=()=>t.slice(d.index+1),te=(w="",z=0)=>{d.consumed+=w,d.index+=z},ge=w=>{d.output+=w.output!=null?w.output:w.value,te(w.value)},ht=()=>{let w=1;for(;O()==="!"&&(O(2)!=="("||O(3)==="?");)ie(),d.start++,w++;return w%2===0?!1:(d.negated=!0,d.start++,!0)},$e=w=>{d[w]++,oe.push(w)},Fe=w=>{d[w]--,oe.pop()},k=w=>{if(h.type==="globstar"){const z=d.braces>0&&(w.type==="comma"||w.type==="brace"),g=w.extglob===!0||I.length&&(w.type==="pipe"||w.type==="paren");w.type!=="slash"&&w.type!=="paren"&&!z&&!g&&(d.output=d.output.slice(0,-h.output.length),h.type="star",h.value="*",h.output=K,d.output+=h.output)}if(I.length&&w.type!=="paren"&&(I[I.length-1].inner+=w.value),(w.value||w.output)&&ge(w),h&&h.type==="text"&&w.type==="text"){h.value+=w.value,h.output=(h.output||"")+w.value;return}w.prev=h,i.push(w),h=w},Ge=(w,z)=>{const g=vt(qe({},f[z]),{conditions:1,inner:""});g.prev=h,g.parens=d.parens,g.output=d.output;const T=(r.capture?"(":"")+g.open;$e("parens"),k({type:w,value:z,output:d.output?"":y}),k({type:"paren",extglob:!0,value:ie(),output:T}),I.push(g)},It=w=>{let z=w.close+(r.capture?")":""),g;if(w.type==="negate"){let T=K;w.inner&&w.inner.length>1&&w.inner.includes("/")&&(T=N(r)),(T!==K||Z()||/^\)+$/.test(Y()))&&(z=w.close=`)$))${T}`),w.inner.includes("*")&&(g=Y())&&/^\.[^\\/.]+$/.test(g)&&(z=w.close=`)${g})${T})`),w.prev.type==="bos"&&(d.negatedExtglob=!0)}k({type:"paren",extglob:!0,value:D,output:z}),Fe("parens")};if(r.fastpaths!==!1&&!/(^[*!]|[/()[\]{}"])/.test(t)){let w=!1,z=t.replace(ls,(g,T,V,ue,J,Pr)=>ue==="\\"?(w=!0,g):ue==="?"?T?T+ue+(J?b.repeat(J.length):""):Pr===0?P+(J?b.repeat(J.length):""):b.repeat(V.length):ue==="."?l.repeat(V.length):ue==="*"?T?T+ue+(J?K:""):K:T?g:`\\${g}`);return w===!0&&(r.unescape===!0?z=z.replace(/\\/g,""):z=z.replace(/\\+/g,g=>g.length%2===0?"\\\\":g?"\\":"")),z===t&&r.contains===!0?(d.output=t,d):(d.output=X.wrapOutput(z,d,e),d)}for(;!Z();){if(D=ie(),D==="\0")continue;if(D==="\\"){const g=O();if(g==="/"&&r.bash!==!0||g==="."||g===";")continue;if(!g){D+="\\",k({type:"text",value:D});continue}const T=/^\\+/.exec(Y());let V=0;if(T&&T[0].length>2&&(V=T[0].length,d.index+=V,V%2!==0&&(D+="\\")),r.unescape===!0?D=ie():D+=ie(),d.brackets===0){k({type:"text",value:D});continue}}if(d.brackets>0&&(D!=="]"||h.value==="["||h.value==="[^")){if(r.posix!==!1&&D===":"){const g=h.value.slice(1);if(g.includes("[")&&(h.posix=!0,g.includes(":"))){const T=h.value.lastIndexOf("["),V=h.value.slice(0,T),ue=h.value.slice(T+2),J=os[ue];if(J){h.value=V+J,d.backtrack=!0,ie(),!s.output&&i.indexOf(h)===1&&(s.output=y);continue}}}(D==="["&&O()!==":"||D==="-"&&O()==="]")&&(D=`\\${D}`),D==="]"&&(h.value==="["||h.value==="[^")&&(D=`\\${D}`),r.posix===!0&&D==="!"&&h.value==="["&&(D="^"),h.value+=D,ge({value:D});continue}if(d.quotes===1&&D!=='"'){D=X.escapeRegex(D),h.value+=D,ge({value:D});continue}if(D==='"'){d.quotes=d.quotes===1?0:1,r.keepQuotes===!0&&k({type:"text",value:D});continue}if(D==="("){$e("parens"),k({type:"paren",value:D});continue}if(D===")"){if(d.parens===0&&r.strictBrackets===!0)throw new SyntaxError(tt("opening","("));const g=I[I.length-1];if(g&&d.parens===g.parens+1){It(I.pop());continue}k({type:"paren",value:D,output:d.parens?")":"\\)"}),Fe("parens");continue}if(D==="["){if(r.nobracket===!0||!Y().includes("]")){if(r.nobracket!==!0&&r.strictBrackets===!0)throw new SyntaxError(tt("closing","]"));D=`\\${D}`}else $e("brackets");k({type:"bracket",value:D});continue}if(D==="]"){if(r.nobracket===!0||h&&h.type==="bracket"&&h.value.length===1){k({type:"text",value:D,output:`\\${D}`});continue}if(d.brackets===0){if(r.strictBrackets===!0)throw new SyntaxError(tt("opening","["));k({type:"text",value:D,output:`\\${D}`});continue}Fe("brackets");const g=h.value.slice(1);if(h.posix!==!0&&g[0]==="^"&&!g.includes("/")&&(D=`/${D}`),h.value+=D,ge({value:D}),r.literalBrackets===!1||X.hasRegexChars(g))continue;const T=X.escapeRegex(h.value);if(d.output=d.output.slice(0,-h.value.length),r.literalBrackets===!0){d.output+=T,h.value=T;continue}h.value=`(${a}${T}|${h.value})`,d.output+=h.value;continue}if(D==="{"&&r.nobrace!==!0){$e("braces");const g={type:"brace",value:D,output:"(",outputIndex:d.output.length,tokensIndex:d.tokens.length};H.push(g),k(g);continue}if(D==="}"){const g=H[H.length-1];if(r.nobrace===!0||!g){k({type:"text",value:D,output:D});continue}let T=")";if(g.dots===!0){const V=i.slice(),ue=[];for(let J=V.length-1;J>=0&&(i.pop(),V[J].type!=="brace");J--)V[J].type!=="dots"&&ue.unshift(V[J].value);T=fs(ue,r),d.backtrack=!0}if(g.comma!==!0&&g.dots!==!0){const V=d.output.slice(0,g.outputIndex),ue=d.tokens.slice(g.tokensIndex);g.value=g.output="\\{",D=T="\\}",d.output=V;for(const J of ue)d.output+=J.output||J.value}k({type:"brace",value:D,output:T}),Fe("braces"),H.pop();continue}if(D==="|"){I.length>0&&I[I.length-1].conditions++,k({type:"text",value:D});continue}if(D===","){let g=D;const T=H[H.length-1];T&&oe[oe.length-1]==="braces"&&(T.comma=!0,g="|"),k({type:"comma",value:D,output:g});continue}if(D==="/"){if(h.type==="dot"&&d.index===d.start+1){d.start=d.index+1,d.consumed="",d.output="",i.pop(),h=s;continue}k({type:"slash",value:D,output:F});continue}if(D==="."){if(d.braces>0&&h.type==="dot"){h.value==="."&&(h.output=l);const g=H[H.length-1];h.type="dots",h.output+=D,h.value+=D,g.dots=!0;continue}if(d.braces+d.parens===0&&h.type!=="bos"&&h.type!=="slash"){k({type:"text",value:D,output:l});continue}k({type:"dot",value:D,output:l});continue}if(D==="?"){if(!(h&&h.value==="(")&&r.noextglob!==!0&&O()==="("&&O(2)!=="?"){Ge("qmark",D);continue}if(h&&h.type==="paren"){const T=O();let V=D;if(T==="<"&&!X.supportsLookbehinds())throw new Error("Node.js v10 or higher is required for regex lookbehinds");(h.value==="("&&!/[!=<:]/.test(T)||T==="<"&&!/<([!=]|\w+>)/.test(Y()))&&(V=`\\${D}`),k({type:"text",value:D,output:V});continue}if(r.dot!==!0&&(h.type==="slash"||h.type==="bos")){k({type:"qmark",value:D,output:x});continue}k({type:"qmark",value:D,output:b});continue}if(D==="!"){if(r.noextglob!==!0&&O()==="("&&(O(2)!=="?"||!/[!=<:]/.test(O(3)))){Ge("negate",D);continue}if(r.nonegate!==!0&&d.index===0){ht();continue}}if(D==="+"){if(r.noextglob!==!0&&O()==="("&&O(2)!=="?"){Ge("plus",D);continue}if(h&&h.value==="("||r.regex===!1){k({type:"plus",value:D,output:E});continue}if(h&&(h.type==="bracket"||h.type==="paren"||h.type==="brace")||d.parens>0){k({type:"plus",value:D});continue}k({type:"plus",value:E});continue}if(D==="@"){if(r.noextglob!==!0&&O()==="("&&O(2)!=="?"){k({type:"at",extglob:!0,value:D,output:""});continue}k({type:"text",value:D});continue}if(D!=="*"){(D==="$"||D==="^")&&(D=`\\${D}`);const g=cs.exec(Y());g&&(D+=g[0],d.index+=g[0].length),k({type:"text",value:D});continue}if(h&&(h.type==="globstar"||h.star===!0)){h.type="star",h.star=!0,h.value+=D,h.output=K,d.backtrack=!0,d.globstar=!0,te(D);continue}let w=Y();if(r.noextglob!==!0&&/^\([^?]/.test(w)){Ge("star",D);continue}if(h.type==="star"){if(r.noglobstar===!0){te(D);continue}const g=h.prev,T=g.prev,V=g.type==="slash"||g.type==="bos",ue=T&&(T.type==="star"||T.type==="globstar");if(r.bash===!0&&(!V||w[0]&&w[0]!=="/")){k({type:"star",value:D,output:""});continue}const J=d.braces>0&&(g.type==="comma"||g.type==="brace"),Pr=I.length&&(g.type==="pipe"||g.type==="paren");if(!V&&g.type!=="paren"&&!J&&!Pr){k({type:"star",value:D,output:""});continue}for(;w.slice(0,3)==="/**";){const Lt=t[d.index+4];if(Lt&&Lt!=="/")break;w=w.slice(3),te("/**",3)}if(g.type==="bos"&&Z()){h.type="globstar",h.value+=D,h.output=N(r),d.output=h.output,d.globstar=!0,te(D);continue}if(g.type==="slash"&&g.prev.type!=="bos"&&!ue&&Z()){d.output=d.output.slice(0,-(g.output+h.output).length),g.output=`(?:${g.output}`,h.type="globstar",h.output=N(r)+(r.strictSlashes?")":"|$)"),h.value+=D,d.globstar=!0,d.output+=g.output+h.output,te(D);continue}if(g.type==="slash"&&g.prev.type!=="bos"&&w[0]==="/"){const Lt=w[1]!==void 0?"|$":"";d.output=d.output.slice(0,-(g.output+h.output).length),g.output=`(?:${g.output}`,h.type="globstar",h.output=`${N(r)}${F}|${F}${Lt})`,h.value+=D,d.output+=g.output+h.output,d.globstar=!0,te(D+ie()),k({type:"slash",value:"/",output:""});continue}if(g.type==="bos"&&w[0]==="/"){h.type="globstar",h.value+=D,h.output=`(?:^|${F}|${N(r)}${F})`,d.output=h.output,d.globstar=!0,te(D+ie()),k({type:"slash",value:"/",output:""});continue}d.output=d.output.slice(0,-h.output.length),h.type="globstar",h.output=N(r),h.value+=D,d.output+=h.output,d.globstar=!0,te(D);continue}const z={type:"star",value:D,output:K};if(r.bash===!0){z.output=".*?",(h.type==="bos"||h.type==="slash")&&(z.output=S+z.output),k(z);continue}if(h&&(h.type==="bracket"||h.type==="paren")&&r.regex===!0){z.output=D,k(z);continue}(d.index===d.start||h.type==="slash"||h.type==="dot")&&(h.type==="dot"?(d.output+=C,h.output+=C):r.dot===!0?(d.output+=m,h.output+=m):(d.output+=S,h.output+=S),O()!=="*"&&(d.output+=y,h.output+=y)),k(z)}for(;d.brackets>0;){if(r.strictBrackets===!0)throw new SyntaxError(tt("closing","]"));d.output=X.escapeLast(d.output,"["),Fe("brackets")}for(;d.parens>0;){if(r.strictBrackets===!0)throw new SyntaxError(tt("closing",")"));d.output=X.escapeLast(d.output,"("),Fe("parens")}for(;d.braces>0;){if(r.strictBrackets===!0)throw new SyntaxError(tt("closing","}"));d.output=X.escapeLast(d.output,"{"),Fe("braces")}if(r.strictSlashes!==!0&&(h.type==="star"||h.type==="bracket")&&k({type:"maybe_slash",value:"",output:`${F}?`}),d.backtrack===!0){d.output="";for(const w of d.tokens)d.output+=w.output!=null?w.output:w.value,w.suffix&&(d.output+=w.suffix)}return d};Pu.fastpaths=(t,e)=>{const r=qe({},e),u=typeof r.maxLength=="number"?Math.min(bt,r.maxLength):bt,n=t.length;if(n>u)throw new SyntaxError(`Input length: ${n}, exceeds maximum allowed length: ${u}`);t=$u[t]||t;const s=X.isWindows(e),{DOT_LITERAL:i,SLASH_LITERAL:a,ONE_CHAR:o,DOTS_SLASH:c,NO_DOT:f,NO_DOTS:l,NO_DOTS_SLASH:E,STAR:F,START_ANCHOR:y}=je.globChars(s),A=r.dot?l:f,v=r.dot?E:f,C=r.capture?"":"?:",m={negated:!1,prefix:""};let b=r.bash===!0?".*?":F;r.capture&&(b=`(${b})`);const x=S=>S.noglobstar===!0?b:`(${C}(?:(?!${y}${S.dot?c:i}).)*?)`,B=S=>{switch(S){case"*":return`${A}${o}${b}`;case".*":return`${i}${o}${b}`;case"*.*":return`${A}${b}${i}${o}${b}`;case"*/*":return`${A}${b}${a}${o}${v}${b}`;case"**":return A+x(r);case"**/*":return`(?:${A}${x(r)}${a})?${v}${o}${b}`;case"**/*.*":return`(?:${A}${x(r)}${a})?${v}${b}${i}${o}${b}`;case"**/.*":return`(?:${A}${x(r)}${a})?${i}${o}${b}`;default:{const P=/^(.*?)\.(\w+)$/.exec(S);if(!P)return;const K=B(P[1]);return K?K+i+P[2]:void 0}}},L=X.removePrefix(t,m);let N=B(L);return N&&r.strictSlashes!==!0&&(N+=`${a}?`),N};var pr=Pu;const Ds=t=>t&&typeof t=="object"&&!Array.isArray(t),G=(t,e,r=!1)=>{if(Array.isArray(t)){const f=t.map(E=>G(E,e,r));return E=>{for(const F of f){const y=F(E);if(y)return y}return!1}}const u=Ds(t)&&t.tokens&&t.input;if(t===""||typeof t!="string"&&!u)throw new TypeError("Expected pattern to be a non-empty string");const n=e||{},s=X.isWindows(e),i=u?G.compileRe(t,e):G.makeRe(t,e,!1,!0),a=i.state;delete i.state;let o=()=>!1;if(n.ignore){const f=vt(qe({},e),{ignore:null,onMatch:null,onResult:null});o=G(n.ignore,f,r)}const c=(f,l=!1)=>{const{isMatch:E,match:F,output:y}=G.test(f,i,e,{glob:t,posix:s}),A={glob:t,state:a,regex:i,posix:s,input:f,output:y,match:F,isMatch:E};return typeof n.onResult=="function"&&n.onResult(A),E===!1?(A.isMatch=!1,l?A:!1):o(f)?(typeof n.onIgnore=="function"&&n.onIgnore(A),A.isMatch=!1,l?A:!1):(typeof n.onMatch=="function"&&n.onMatch(A),l?A:!0)};return r&&(c.state=a),c};G.test=(t,e,r,{glob:u,posix:n}={})=>{if(typeof t!="string")throw new TypeError("Expected input to be a string");if(t==="")return{isMatch:!1,output:""};const s=r||{},i=s.format||(n?X.toPosixSlashes:null);let a=t===u,o=a&&i?i(t):t;return a===!1&&(o=i?i(t):t,a=o===u),(a===!1||s.capture===!0)&&(s.matchBase===!0||s.basename===!0?a=G.matchBase(t,e,r,n):a=e.exec(o)),{isMatch:Boolean(a),match:a,output:o}},G.matchBase=(t,e,r,u=X.isWindows(r))=>(e instanceof RegExp?e:G.makeRe(e,r)).test(ar.basename(t)),G.isMatch=(t,e,r)=>G(e,r)(t),G.parse=(t,e)=>Array.isArray(t)?t.map(r=>G.parse(r,e)):pr(t,vt(qe({},e),{fastpaths:!1})),G.scan=(t,e)=>as(t,e),G.compileRe=(t,e,r=!1,u=!1)=>{if(r===!0)return t.output;const n=e||{},s=n.contains?"":"^",i=n.contains?"":"$";let a=`${s}(?:${t.output})${i}`;t&&t.negated===!0&&(a=`^(?!${a}).*$`);const o=G.toRegex(a,e);return u===!0&&(o.state=t),o},G.makeRe=(t,e={},r=!1,u=!1)=>{if(!t||typeof t!="string")throw new TypeError("Expected a non-empty string");let n={negated:!1,fastpaths:!0};return e.fastpaths!==!1&&(t[0]==="."||t[0]==="*")&&(n.output=pr.fastpaths(t,e)),n.output||(n=pr(t,e)),G.compileRe(n,e,r,u)},G.toRegex=(t,e)=>{try{const r=e||{};return new RegExp(t,r.flags||(r.nocase?"i":""))}catch(r){if(e&&e.debug===!0)throw r;return/$^/}},G.constants=je;var hs=G,ds=hs;function Ar(t,e){return Array.isArray(e)?e.some(r=>Ar(t,r)):ds(e)(t)}function Bt(t,e,r){var u,n;if(e===void 0)return;if(t.length===0)return r(e);if(typeof e!="object"||e===null)return;const s=t.shift();if(s==="**"){for(;t.length>0&&t[0]==="*";)t.shift();const i=["**",...t].join("/"),a=new Set;Ou("",e,a);for(const o of a)Ar(o,i)&&Bt(o.split("/"),e,r)}else if(s.startsWith("*")){let i;s.length>=1&&(i=new RegExp((n=(u=s.match(/(\*{)(.+)(})/))==null?void 0:u[2])!=null?n:".*"));for(const a in e)i&&a.match(i)!==null&&Bt([...t],e[a],r)}else Bt(t,e[s],r)}function Ou(t,e,r){for(const u in e)r.add(`${t}${u}`),typeof e[u]=="object"&&Ou(`${t}${u}/`,e[u],r)}function Hu(t,e,r){const u=t.length===0||t==="/"?[]:t.split("/");return Bt(u,e,r)}function ps(t,e){let r=!1;for(const u of e)if(Hu(u,t,()=>r=!0),r)return!0;return!1}new TextEncoder;function pe(t){if(typeof t!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(t))}function Iu(t,e){for(var r="",u=0,n=-1,s=0,i,a=0;a<=t.length;++a){if(a<t.length)i=t.charCodeAt(a);else{if(i===47)break;i=47}if(i===47){if(!(n===a-1||s===1))if(n!==a-1&&s===2){if(r.length<2||u!==2||r.charCodeAt(r.length-1)!==46||r.charCodeAt(r.length-2)!==46){if(r.length>2){var o=r.lastIndexOf("/");if(o!==r.length-1){o===-1?(r="",u=0):(r=r.slice(0,o),u=r.length-1-r.lastIndexOf("/")),n=a,s=0;continue}}else if(r.length===2||r.length===1){r="",u=0,n=a,s=0;continue}}e&&(r.length>0?r+="/..":r="..",u=2)}else r.length>0?r+="/"+t.slice(n+1,a):r=t.slice(n+1,a),u=a-n-1;n=a,s=0}else i===46&&s!==-1?++s:s=-1}return r}function As(t,e){var r=e.dir||e.root,u=e.base||(e.name||"")+(e.ext||"");return r?r===e.root?r+u:r+t+u:u}var rt={resolve:function(){for(var e="",r=!1,u,n=arguments.length-1;n>=-1&&!r;n--){var s;n>=0?s=arguments[n]:(u===void 0&&(u=process.cwd()),s=u),pe(s),s.length!==0&&(e=s+"/"+e,r=s.charCodeAt(0)===47)}return e=Iu(e,!r),r?e.length>0?"/"+e:"/":e.length>0?e:"."},normalize:function(e){if(pe(e),e.length===0)return".";var r=e.charCodeAt(0)===47,u=e.charCodeAt(e.length-1)===47;return e=Iu(e,!r),e.length===0&&!r&&(e="."),e.length>0&&u&&(e+="/"),r?"/"+e:e},isAbsolute:function(e){return pe(e),e.length>0&&e.charCodeAt(0)===47},join:function(){if(arguments.length===0)return".";for(var e,r=0;r<arguments.length;++r){var u=arguments[r];pe(u),u.length>0&&(e===void 0?e=u:e+="/"+u)}return e===void 0?".":rt.normalize(e)},relative:function(e,r){if(pe(e),pe(r),e===r||(e=rt.resolve(e),r=rt.resolve(r),e===r))return"";for(var u=1;u<e.length&&e.charCodeAt(u)===47;++u);for(var n=e.length,s=n-u,i=1;i<r.length&&r.charCodeAt(i)===47;++i);for(var a=r.length,o=a-i,c=s<o?s:o,f=-1,l=0;l<=c;++l){if(l===c){if(o>c){if(r.charCodeAt(i+l)===47)return r.slice(i+l+1);if(l===0)return r.slice(i+l)}else s>c&&(e.charCodeAt(u+l)===47?f=l:l===0&&(f=0));break}var E=e.charCodeAt(u+l),F=r.charCodeAt(i+l);if(E!==F)break;E===47&&(f=l)}var y="";for(l=u+f+1;l<=n;++l)(l===n||e.charCodeAt(l)===47)&&(y.length===0?y+="..":y+="/..");return y.length>0?y+r.slice(i+f):(i+=f,r.charCodeAt(i)===47&&++i,r.slice(i))},_makeLong:function(e){return e},dirname:function(e){if(pe(e),e.length===0)return".";for(var r=e.charCodeAt(0),u=r===47,n=-1,s=!0,i=e.length-1;i>=1;--i)if(r=e.charCodeAt(i),r===47){if(!s){n=i;break}}else s=!1;return n===-1?u?"/":".":u&&n===1?"//":e.slice(0,n)},basename:function(e,r){if(r!==void 0&&typeof r!="string")throw new TypeError('"ext" argument must be a string');pe(e);var u=0,n=-1,s=!0,i;if(r!==void 0&&r.length>0&&r.length<=e.length){if(r.length===e.length&&r===e)return"";var a=r.length-1,o=-1;for(i=e.length-1;i>=0;--i){var c=e.charCodeAt(i);if(c===47){if(!s){u=i+1;break}}else o===-1&&(s=!1,o=i+1),a>=0&&(c===r.charCodeAt(a)?--a===-1&&(n=i):(a=-1,n=o))}return u===n?n=o:n===-1&&(n=e.length),e.slice(u,n)}else{for(i=e.length-1;i>=0;--i)if(e.charCodeAt(i)===47){if(!s){u=i+1;break}}else n===-1&&(s=!1,n=i+1);return n===-1?"":e.slice(u,n)}},extname:function(e){pe(e);for(var r=-1,u=0,n=-1,s=!0,i=0,a=e.length-1;a>=0;--a){var o=e.charCodeAt(a);if(o===47){if(!s){u=a+1;break}continue}n===-1&&(s=!1,n=a+1),o===46?r===-1?r=a:i!==1&&(i=1):r!==-1&&(i=-1)}return r===-1||n===-1||i===0||i===1&&r===n-1&&r===u+1?"":e.slice(r,n)},format:function(e){if(e===null||typeof e!="object")throw new TypeError('The "pathObject" argument must be of type Object. Received type '+typeof e);return As("/",e)},parse:function(e){pe(e);var r={root:"",dir:"",base:"",ext:"",name:""};if(e.length===0)return r;var u=e.charCodeAt(0),n=u===47,s;n?(r.root="/",s=1):s=0;for(var i=-1,a=0,o=-1,c=!0,f=e.length-1,l=0;f>=s;--f){if(u=e.charCodeAt(f),u===47){if(!c){a=f+1;break}continue}o===-1&&(c=!1,o=f+1),u===46?i===-1?i=f:l!==1&&(l=1):i!==-1&&(l=-1)}return i===-1||o===-1||l===0||l===1&&i===o-1&&i===a+1?o!==-1&&(a===0&&n?r.base=r.name=e.slice(1,o):r.base=r.name=e.slice(a,o)):(a===0&&n?(r.name=e.slice(1,i),r.base=e.slice(1,o)):(r.name=e.slice(a,i),r.base=e.slice(a,o)),r.ext=e.slice(i,o)),a>0?r.dir=e.slice(0,a-1):n&&(r.dir="/"),r},sep:"/",delimiter:":",win32:null,posix:null};rt.posix=rt;var le=rt,Cs=/[\u1680\u2000-\u200A\u202F\u205F\u3000]/,gs=/[\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0561-\u0587\u05D0-\u05EA\u05F0-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u08A0-\u08B4\u08B6-\u08BD\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u170C\u170E-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1877\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4B\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C88\u1CE9-\u1CEC\u1CEE-\u1CF1\u1CF5\u1CF6\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312E\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FEA\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6EF\uA717-\uA71F\uA722-\uA788\uA78B-\uA7AE\uA7B0-\uA7B7\uA7F7-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB65\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDD40-\uDD74\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF2D-\uDF4A\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF\uDFD1-\uDFD5]|\uD801[\uDC00-\uDC9D\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE33\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2]|\uD804[\uDC03-\uDC37\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDF00-\uDF19]|\uD806[\uDCA0-\uDCDF\uDCFF\uDE00\uDE0B-\uDE32\uDE3A\uDE50\uDE5C-\uDE83\uDE86-\uDE89\uDEC0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC72-\uDC8F\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD30\uDD46]|\uD808[\uDC00-\uDF99]|\uD809[\uDC00-\uDC6E\uDC80-\uDD43]|[\uD80C\uD81C-\uD820\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDF00-\uDF44\uDF50\uDF93-\uDF9F\uDFE0\uDFE1]|\uD821[\uDC00-\uDFEC]|\uD822[\uDC00-\uDEF2]|\uD82C[\uDC00-\uDD1E\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD83A[\uDC00-\uDCC4\uDD00-\uDD43]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDED6\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF34\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D]/,Fs=/[\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0300-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u0483-\u0487\u048A-\u052F\u0531-\u0556\u0559\u0561-\u0587\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u05D0-\u05EA\u05F0-\u05F2\u0610-\u061A\u0620-\u0669\u066E-\u06D3\u06D5-\u06DC\u06DF-\u06E8\u06EA-\u06FC\u06FF\u0710-\u074A\u074D-\u07B1\u07C0-\u07F5\u07FA\u0800-\u082D\u0840-\u085B\u0860-\u086A\u08A0-\u08B4\u08B6-\u08BD\u08D4-\u08E1\u08E3-\u0963\u0966-\u096F\u0971-\u0983\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BC-\u09C4\u09C7\u09C8\u09CB-\u09CE\u09D7\u09DC\u09DD\u09DF-\u09E3\u09E6-\u09F1\u09FC\u0A01-\u0A03\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A3C\u0A3E-\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A59-\u0A5C\u0A5E\u0A66-\u0A75\u0A81-\u0A83\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABC-\u0AC5\u0AC7-\u0AC9\u0ACB-\u0ACD\u0AD0\u0AE0-\u0AE3\u0AE6-\u0AEF\u0AF9-\u0AFF\u0B01-\u0B03\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3C-\u0B44\u0B47\u0B48\u0B4B-\u0B4D\u0B56\u0B57\u0B5C\u0B5D\u0B5F-\u0B63\u0B66-\u0B6F\u0B71\u0B82\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCD\u0BD0\u0BD7\u0BE6-\u0BEF\u0C00-\u0C03\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D-\u0C44\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C58-\u0C5A\u0C60-\u0C63\u0C66-\u0C6F\u0C80-\u0C83\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBC-\u0CC4\u0CC6-\u0CC8\u0CCA-\u0CCD\u0CD5\u0CD6\u0CDE\u0CE0-\u0CE3\u0CE6-\u0CEF\u0CF1\u0CF2\u0D00-\u0D03\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D44\u0D46-\u0D48\u0D4A-\u0D4E\u0D54-\u0D57\u0D5F-\u0D63\u0D66-\u0D6F\u0D7A-\u0D7F\u0D82\u0D83\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0DCA\u0DCF-\u0DD4\u0DD6\u0DD8-\u0DDF\u0DE6-\u0DEF\u0DF2\u0DF3\u0E01-\u0E3A\u0E40-\u0E4E\u0E50-\u0E59\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB9\u0EBB-\u0EBD\u0EC0-\u0EC4\u0EC6\u0EC8-\u0ECD\u0ED0-\u0ED9\u0EDC-\u0EDF\u0F00\u0F18\u0F19\u0F20-\u0F29\u0F35\u0F37\u0F39\u0F3E-\u0F47\u0F49-\u0F6C\u0F71-\u0F84\u0F86-\u0F97\u0F99-\u0FBC\u0FC6\u1000-\u1049\u1050-\u109D\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u135D-\u135F\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u170C\u170E-\u1714\u1720-\u1734\u1740-\u1753\u1760-\u176C\u176E-\u1770\u1772\u1773\u1780-\u17D3\u17D7\u17DC\u17DD\u17E0-\u17E9\u180B-\u180D\u1810-\u1819\u1820-\u1877\u1880-\u18AA\u18B0-\u18F5\u1900-\u191E\u1920-\u192B\u1930-\u193B\u1946-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u19D0-\u19D9\u1A00-\u1A1B\u1A20-\u1A5E\u1A60-\u1A7C\u1A7F-\u1A89\u1A90-\u1A99\u1AA7\u1AB0-\u1ABD\u1B00-\u1B4B\u1B50-\u1B59\u1B6B-\u1B73\u1B80-\u1BF3\u1C00-\u1C37\u1C40-\u1C49\u1C4D-\u1C7D\u1C80-\u1C88\u1CD0-\u1CD2\u1CD4-\u1CF9\u1D00-\u1DF9\u1DFB-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u203F\u2040\u2054\u2071\u207F\u2090-\u209C\u20D0-\u20DC\u20E1\u20E5-\u20F0\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D7F-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2DE0-\u2DFF\u2E2F\u3005-\u3007\u3021-\u302F\u3031-\u3035\u3038-\u303C\u3041-\u3096\u3099\u309A\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312E\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FEA\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA62B\uA640-\uA66F\uA674-\uA67D\uA67F-\uA6F1\uA717-\uA71F\uA722-\uA788\uA78B-\uA7AE\uA7B0-\uA7B7\uA7F7-\uA827\uA840-\uA873\uA880-\uA8C5\uA8D0-\uA8D9\uA8E0-\uA8F7\uA8FB\uA8FD\uA900-\uA92D\uA930-\uA953\uA960-\uA97C\uA980-\uA9C0\uA9CF-\uA9D9\uA9E0-\uA9FE\uAA00-\uAA36\uAA40-\uAA4D\uAA50-\uAA59\uAA60-\uAA76\uAA7A-\uAAC2\uAADB-\uAADD\uAAE0-\uAAEF\uAAF2-\uAAF6\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB65\uAB70-\uABEA\uABEC\uABED\uABF0-\uABF9\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE00-\uFE0F\uFE20-\uFE2F\uFE33\uFE34\uFE4D-\uFE4F\uFE70-\uFE74\uFE76-\uFEFC\uFF10-\uFF19\uFF21-\uFF3A\uFF3F\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDD40-\uDD74\uDDFD\uDE80-\uDE9C\uDEA0-\uDED0\uDEE0\uDF00-\uDF1F\uDF2D-\uDF4A\uDF50-\uDF7A\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF\uDFD1-\uDFD5]|\uD801[\uDC00-\uDC9D\uDCA0-\uDCA9\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00-\uDE03\uDE05\uDE06\uDE0C-\uDE13\uDE15-\uDE17\uDE19-\uDE33\uDE38-\uDE3A\uDE3F\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE6\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2]|\uD804[\uDC00-\uDC46\uDC66-\uDC6F\uDC7F-\uDCBA\uDCD0-\uDCE8\uDCF0-\uDCF9\uDD00-\uDD34\uDD36-\uDD3F\uDD50-\uDD73\uDD76\uDD80-\uDDC4\uDDCA-\uDDCC\uDDD0-\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE37\uDE3E\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEEA\uDEF0-\uDEF9\uDF00-\uDF03\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3C-\uDF44\uDF47\uDF48\uDF4B-\uDF4D\uDF50\uDF57\uDF5D-\uDF63\uDF66-\uDF6C\uDF70-\uDF74]|\uD805[\uDC00-\uDC4A\uDC50-\uDC59\uDC80-\uDCC5\uDCC7\uDCD0-\uDCD9\uDD80-\uDDB5\uDDB8-\uDDC0\uDDD8-\uDDDD\uDE00-\uDE40\uDE44\uDE50-\uDE59\uDE80-\uDEB7\uDEC0-\uDEC9\uDF00-\uDF19\uDF1D-\uDF2B\uDF30-\uDF39]|\uD806[\uDCA0-\uDCE9\uDCFF\uDE00-\uDE3E\uDE47\uDE50-\uDE83\uDE86-\uDE99\uDEC0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC36\uDC38-\uDC40\uDC50-\uDC59\uDC72-\uDC8F\uDC92-\uDCA7\uDCA9-\uDCB6\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD36\uDD3A\uDD3C\uDD3D\uDD3F-\uDD47\uDD50-\uDD59]|\uD808[\uDC00-\uDF99]|\uD809[\uDC00-\uDC6E\uDC80-\uDD43]|[\uD80C\uD81C-\uD820\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE60-\uDE69\uDED0-\uDEED\uDEF0-\uDEF4\uDF00-\uDF36\uDF40-\uDF43\uDF50-\uDF59\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDF00-\uDF44\uDF50-\uDF7E\uDF8F-\uDF9F\uDFE0\uDFE1]|\uD821[\uDC00-\uDFEC]|\uD822[\uDC00-\uDEF2]|\uD82C[\uDC00-\uDD1E\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99\uDC9D\uDC9E]|\uD834[\uDD65-\uDD69\uDD6D-\uDD72\uDD7B-\uDD82\uDD85-\uDD8B\uDDAA-\uDDAD\uDE42-\uDE44]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB\uDFCE-\uDFFF]|\uD836[\uDE00-\uDE36\uDE3B-\uDE6C\uDE75\uDE84\uDE9B-\uDE9F\uDEA1-\uDEAF]|\uD838[\uDC00-\uDC06\uDC08-\uDC18\uDC1B-\uDC21\uDC23\uDC24\uDC26-\uDC2A]|\uD83A[\uDC00-\uDCC4\uDCD0-\uDCD6\uDD00-\uDD4A\uDD50-\uDD59]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDED6\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF34\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D]|\uDB40[\uDD00-\uDDEF]/,Cr={Space_Separator:Cs,ID_Start:gs,ID_Continue:Fs},U={isSpaceSeparator(t){return typeof t=="string"&&Cr.Space_Separator.test(t)},isIdStartChar(t){return typeof t=="string"&&(t>="a"&&t<="z"||t>="A"&&t<="Z"||t==="$"||t==="_"||Cr.ID_Start.test(t))},isIdContinueChar(t){return typeof t=="string"&&(t>="a"&&t<="z"||t>="A"&&t<="Z"||t>="0"&&t<="9"||t==="$"||t==="_"||t==="\u200C"||t==="\u200D"||Cr.ID_Continue.test(t))},isDigit(t){return typeof t=="string"&&/[0-9]/.test(t)},isHexDigit(t){return typeof t=="string"&&/[0-9A-Fa-f]/.test(t)}};let gr,re,me,_t,ke,fe,Q,Fr,ct;var Es=function(e,r){gr=String(e),re="start",me=[],_t=0,ke=1,fe=0,Q=void 0,Fr=void 0,ct=void 0;do Q=ys(),ms[re]();while(Q.type!=="eof");return typeof r=="function"?Lu({"":ct},"",r):ct};function Lu(t,e,r){const u=t[e];if(u!=null&&typeof u=="object")for(const n in u){const s=Lu(u,n,r);s===void 0?delete u[n]:u[n]=s}return r.call(t,e,u)}let R,_,lt,Se,$;function ys(){for(R="default",_="",lt=!1,Se=1;;){$=be();const t=Nu[R]();if(t)return t}}function be(){if(gr[_t])return String.fromCodePoint(gr.codePointAt(_t))}function p(){const t=be();return t===`
`?(ke++,fe=0):t?fe+=t.length:fe++,t&&(_t+=t.length),t}const Nu={default(){switch($){case"	":case"\v":case"\f":case" ":case"\xA0":case"\uFEFF":case`
`:case"\r":case"\u2028":case"\u2029":p();return;case"/":p(),R="comment";return;case void 0:return p(),M("eof")}if(U.isSpaceSeparator($)){p();return}return Nu[re]()},comment(){switch($){case"*":p(),R="multiLineComment";return;case"/":p(),R="singleLineComment";return}throw j(p())},multiLineComment(){switch($){case"*":p(),R="multiLineCommentAsterisk";return;case void 0:throw j(p())}p()},multiLineCommentAsterisk(){switch($){case"*":p();return;case"/":p(),R="default";return;case void 0:throw j(p())}p(),R="multiLineComment"},singleLineComment(){switch($){case`
`:case"\r":case"\u2028":case"\u2029":p(),R="default";return;case void 0:return p(),M("eof")}p()},value(){switch($){case"{":case"[":return M("punctuator",p());case"n":return p(),We("ull"),M("null",null);case"t":return p(),We("rue"),M("boolean",!0);case"f":return p(),We("alse"),M("boolean",!1);case"-":case"+":p()==="-"&&(Se=-1),R="sign";return;case".":_=p(),R="decimalPointLeading";return;case"0":_=p(),R="zero";return;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":_=p(),R="decimalInteger";return;case"I":return p(),We("nfinity"),M("numeric",1/0);case"N":return p(),We("aN"),M("numeric",NaN);case'"':case"'":lt=p()==='"',_="",R="string";return}throw j(p())},identifierNameStartEscape(){if($!=="u")throw j(p());p();const t=Er();switch(t){case"$":case"_":break;default:if(!U.isIdStartChar(t))throw Mu();break}_+=t,R="identifierName"},identifierName(){switch($){case"$":case"_":case"\u200C":case"\u200D":_+=p();return;case"\\":p(),R="identifierNameEscape";return}if(U.isIdContinueChar($)){_+=p();return}return M("identifier",_)},identifierNameEscape(){if($!=="u")throw j(p());p();const t=Er();switch(t){case"$":case"_":case"\u200C":case"\u200D":break;default:if(!U.isIdContinueChar(t))throw Mu();break}_+=t,R="identifierName"},sign(){switch($){case".":_=p(),R="decimalPointLeading";return;case"0":_=p(),R="zero";return;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":_=p(),R="decimalInteger";return;case"I":return p(),We("nfinity"),M("numeric",Se*(1/0));case"N":return p(),We("aN"),M("numeric",NaN)}throw j(p())},zero(){switch($){case".":_+=p(),R="decimalPoint";return;case"e":case"E":_+=p(),R="decimalExponent";return;case"x":case"X":_+=p(),R="hexadecimal";return}return M("numeric",Se*0)},decimalInteger(){switch($){case".":_+=p(),R="decimalPoint";return;case"e":case"E":_+=p(),R="decimalExponent";return}if(U.isDigit($)){_+=p();return}return M("numeric",Se*Number(_))},decimalPointLeading(){if(U.isDigit($)){_+=p(),R="decimalFraction";return}throw j(p())},decimalPoint(){switch($){case"e":case"E":_+=p(),R="decimalExponent";return}if(U.isDigit($)){_+=p(),R="decimalFraction";return}return M("numeric",Se*Number(_))},decimalFraction(){switch($){case"e":case"E":_+=p(),R="decimalExponent";return}if(U.isDigit($)){_+=p();return}return M("numeric",Se*Number(_))},decimalExponent(){switch($){case"+":case"-":_+=p(),R="decimalExponentSign";return}if(U.isDigit($)){_+=p(),R="decimalExponentInteger";return}throw j(p())},decimalExponentSign(){if(U.isDigit($)){_+=p(),R="decimalExponentInteger";return}throw j(p())},decimalExponentInteger(){if(U.isDigit($)){_+=p();return}return M("numeric",Se*Number(_))},hexadecimal(){if(U.isHexDigit($)){_+=p(),R="hexadecimalInteger";return}throw j(p())},hexadecimalInteger(){if(U.isHexDigit($)){_+=p();return}return M("numeric",Se*Number(_))},string(){switch($){case"\\":p(),_+=vs();return;case'"':if(lt)return p(),M("string",_);_+=p();return;case"'":if(!lt)return p(),M("string",_);_+=p();return;case`
`:case"\r":throw j(p());case"\u2028":case"\u2029":Ss($);break;case void 0:throw j(p())}_+=p()},start(){switch($){case"{":case"[":return M("punctuator",p())}R="value"},beforePropertyName(){switch($){case"$":case"_":_=p(),R="identifierName";return;case"\\":p(),R="identifierNameStartEscape";return;case"}":return M("punctuator",p());case'"':case"'":lt=p()==='"',R="string";return}if(U.isIdStartChar($)){_+=p(),R="identifierName";return}throw j(p())},afterPropertyName(){if($===":")return M("punctuator",p());throw j(p())},beforePropertyValue(){R="value"},afterPropertyValue(){switch($){case",":case"}":return M("punctuator",p())}throw j(p())},beforeArrayValue(){if($==="]")return M("punctuator",p());R="value"},afterArrayValue(){switch($){case",":case"]":return M("punctuator",p())}throw j(p())},end(){throw j(p())}};function M(t,e){return{type:t,value:e,line:ke,column:fe}}function We(t){for(const e of t){if(be()!==e)throw j(p());p()}}function vs(){switch(be()){case"b":return p(),"\b";case"f":return p(),"\f";case"n":return p(),`
`;case"r":return p(),"\r";case"t":return p(),"	";case"v":return p(),"\v";case"0":if(p(),U.isDigit(be()))throw j(p());return"\0";case"x":return p(),ws();case"u":return p(),Er();case`
`:case"\u2028":case"\u2029":return p(),"";case"\r":return p(),be()===`
`&&p(),"";case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":throw j(p());case void 0:throw j(p())}return p()}function ws(){let t="",e=be();if(!U.isHexDigit(e)||(t+=p(),e=be(),!U.isHexDigit(e)))throw j(p());return t+=p(),String.fromCodePoint(parseInt(t,16))}function Er(){let t="",e=4;for(;e-- >0;){const r=be();if(!U.isHexDigit(r))throw j(p());t+=p()}return String.fromCodePoint(parseInt(t,16))}const ms={start(){if(Q.type==="eof")throw ze();yr()},beforePropertyName(){switch(Q.type){case"identifier":case"string":Fr=Q.value,re="afterPropertyName";return;case"punctuator":xt();return;case"eof":throw ze()}},afterPropertyName(){if(Q.type==="eof")throw ze();re="beforePropertyValue"},beforePropertyValue(){if(Q.type==="eof")throw ze();yr()},beforeArrayValue(){if(Q.type==="eof")throw ze();if(Q.type==="punctuator"&&Q.value==="]"){xt();return}yr()},afterPropertyValue(){if(Q.type==="eof")throw ze();switch(Q.value){case",":re="beforePropertyName";return;case"}":xt()}},afterArrayValue(){if(Q.type==="eof")throw ze();switch(Q.value){case",":re="beforeArrayValue";return;case"]":xt()}},end(){}};function yr(){let t;switch(Q.type){case"punctuator":switch(Q.value){case"{":t={};break;case"[":t=[];break}break;case"null":case"boolean":case"numeric":case"string":t=Q.value;break}if(ct===void 0)ct=t;else{const e=me[me.length-1];Array.isArray(e)?e.push(t):e[Fr]=t}if(t!==null&&typeof t=="object")me.push(t),Array.isArray(t)?re="beforeArrayValue":re="beforePropertyName";else{const e=me[me.length-1];e==null?re="end":Array.isArray(e)?re="afterArrayValue":re="afterPropertyValue"}}function xt(){me.pop();const t=me[me.length-1];t==null?re="end":Array.isArray(t)?re="afterArrayValue":re="afterPropertyValue"}function j(t){return Rt(t===void 0?`JSON5: invalid end of input at ${ke}:${fe}`:`JSON5: invalid character '${ju(t)}' at ${ke}:${fe}`)}function ze(){return Rt(`JSON5: invalid end of input at ${ke}:${fe}`)}function Mu(){return fe-=5,Rt(`JSON5: invalid identifier character at ${ke}:${fe}`)}function Ss(t){console.warn(`JSON5: '${ju(t)}' in strings is not valid ECMAScript; consider escaping`)}function ju(t){const e={"'":"\\'",'"':'\\"',"\\":"\\\\","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","	":"\\t","\v":"\\v","\0":"\\0","\u2028":"\\u2028","\u2029":"\\u2029"};if(e[t])return e[t];if(t<" "){const r=t.charCodeAt(0).toString(16);return"\\x"+("00"+r).substring(r.length)}return t}function Rt(t){const e=new SyntaxError(t);return e.lineNumber=ke,e.columnNumber=fe,e}var bs=function(e,r,u){const n=[];let s="",i,a,o="",c;if(r!=null&&typeof r=="object"&&!Array.isArray(r)&&(u=r.space,c=r.quote,r=r.replacer),typeof r=="function")a=r;else if(Array.isArray(r)){i=[];for(const A of r){let v;typeof A=="string"?v=A:(typeof A=="number"||A instanceof String||A instanceof Number)&&(v=String(A)),v!==void 0&&i.indexOf(v)<0&&i.push(v)}}return u instanceof Number?u=Number(u):u instanceof String&&(u=String(u)),typeof u=="number"?u>0&&(u=Math.min(10,Math.floor(u)),o="          ".substr(0,u)):typeof u=="string"&&(o=u.substr(0,10)),f("",{"":e});function f(A,v){let C=v[A];switch(C!=null&&(typeof C.toJSON5=="function"?C=C.toJSON5(A):typeof C.toJSON=="function"&&(C=C.toJSON(A))),a&&(C=a.call(v,A,C)),C instanceof Number?C=Number(C):C instanceof String?C=String(C):C instanceof Boolean&&(C=C.valueOf()),C){case null:return"null";case!0:return"true";case!1:return"false"}if(typeof C=="string")return l(C);if(typeof C=="number")return String(C);if(typeof C=="object")return Array.isArray(C)?y(C):E(C)}function l(A){const v={"'":.1,'"':.2},C={"'":"\\'",'"':'\\"',"\\":"\\\\","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","	":"\\t","\v":"\\v","\0":"\\0","\u2028":"\\u2028","\u2029":"\\u2029"};let m="";for(let x=0;x<A.length;x++){const B=A[x];switch(B){case"'":case'"':v[B]++,m+=B;continue;case"\0":if(U.isDigit(A[x+1])){m+="\\x00";continue}}if(C[B]){m+=C[B];continue}if(B<" "){let L=B.charCodeAt(0).toString(16);m+="\\x"+("00"+L).substring(L.length);continue}m+=B}const b=c||Object.keys(v).reduce((x,B)=>v[x]<v[B]?x:B);return m=m.replace(new RegExp(b,"g"),C[b]),b+m+b}function E(A){if(n.indexOf(A)>=0)throw TypeError("Converting circular structure to JSON5");n.push(A);let v=s;s=s+o;let C=i||Object.keys(A),m=[];for(const x of C){const B=f(x,A);if(B!==void 0){let L=F(x)+":";o!==""&&(L+=" "),L+=B,m.push(L)}}let b;if(m.length===0)b="{}";else{let x;if(o==="")x=m.join(","),b="{"+x+"}";else{let B=`,
`+s;x=m.join(B),b=`{
`+s+x+`,
`+v+"}"}}return n.pop(),s=v,b}function F(A){if(A.length===0)return l(A);const v=String.fromCodePoint(A.codePointAt(0));if(!U.isIdStartChar(v))return l(A);for(let C=v.length;C<A.length;C++)if(!U.isIdContinueChar(String.fromCodePoint(A.codePointAt(C))))return l(A);return A}function y(A){if(n.indexOf(A)>=0)throw TypeError("Converting circular structure to JSON5");n.push(A);let v=s;s=s+o;let C=[];for(let b=0;b<A.length;b++){const x=f(String(b),A);C.push(x!==void 0?x:"null")}let m;if(C.length===0)m="[]";else if(o===""){let b=C.join(",");m="["+b+"]"}else{let b=`,
`+s,x=C.join(b);m=`[
`+s+x+`,
`+v+"]"}return n.pop(),s=v,m}},vr={parse:Es,stringify:bs};const wr={behaviorPack:"./BP",resourcePack:"./RP",skinPack:"./SP",worldTemplate:"./WT"};class Bs{constructor(e){this.basePath=e,this.data={}}async refreshConfig(){this.data=await this.readConfig()}async setup(){await this.refreshConfig()}get(){return this.data}getRelativePackRoot(e){var r,u;return(u=(r=this.data.packs)==null?void 0:r[e])!=null?u:wr[e]}getAbsolutePackRoot(e){return this.resolvePackPath(e)}resolvePackPath(e,r){return!r&&!e?this.basePath:!e&&r?le.join(this.basePath,r):!r&&e?le.join(this.basePath,this.getRelativePackRoot(e)):le.join(this.basePath,`${this.getRelativePackRoot(e)}/${r}`)}getAvailablePackPaths(){var e;const r=[];for(const u of Object.keys((e=this.data.packs)!=null?e:{}))r.push(this.resolvePackPath(u));return r}getAvailablePacks(){var e;const r={};for(const u in(e=this.data.packs)!=null?e:{})r[u]=this.resolvePackPath(u);return r}async save(){await this.writeConfig(this.data)}}class _s{constructor(e){this.projectConfig=e,this.packTypes=[],this.extensionPackTypes=new Set}setProjectConfig(e){this.projectConfig=e}get all(){return this.packTypes.concat(...Array.from(this.extensionPackTypes.values()))}getFromId(e){return this.all.find(r=>r.id===e)}get(e){var r,u;const n=(u=(r=this.projectConfig)==null?void 0:r.getAvailablePacks())!=null?u:wr;for(const s in n)if(e.startsWith(n[s]))return this.getFromId(s)}getId(e){var r,u;return(u=(r=this.get(e))==null?void 0:r.id)!=null?u:"unknown"}addExtensionPackType(e){return this.extensionPackTypes.add(e),{dispose:()=>this.extensionPackTypes.delete(e)}}}class xs{constructor(e,r){this.projectConfig=e,this.isMatch=r,this.pluginFileTypes=new Set,this.fileTypes=[]}get all(){return this.fileTypes.concat([...this.pluginFileTypes.values()])}setProjectConfig(e){this.projectConfig=e}addPluginFileType(e){return this.pluginFileTypes.add(e),{dispose:()=>this.pluginFileTypes.delete(e)}}getPluginFileTypes(){return[...this.pluginFileTypes.values()]}setPluginFileTypes(e=[]){this.pluginFileTypes.clear(),e.forEach(r=>this.pluginFileTypes.add(r))}get(e,r,u=!0){var n,s,i,a,o,c,f,l,E,F,y,A,v;const C=e?le.extname(e):null;if(!!C)for(const m of this.all){if(r!==void 0&&r===m.id)return m;if(!e)continue;const b=((n=m.detect)==null?void 0:n.packType)===void 0?[]:Array.isArray((s=m.detect)==null?void 0:s.packType)?(i=m.detect)==null?void 0:i.packType:[(a=m.detect)==null?void 0:a.packType],x=(o=m.detect)==null?void 0:o.fileExtensions,B=!!((c=m.detect)!=null&&c.scope),L=Array.isArray((f=m.detect)==null?void 0:f.scope)?(l=m.detect)==null?void 0:l.scope:[(E=m.detect)==null?void 0:E.scope],N=!!((F=m.detect)!=null&&F.matcher),S=Array.isArray((y=m.detect)==null?void 0:y.matcher)?(A=m.detect)==null?void 0:A.matcher:[(v=m.detect)==null?void 0:v.matcher];if(!(u&&x&&!x.includes(C)))if(B){if(this.prefixMatchers(b,L).some(P=>e.startsWith(P)))return m}else if(N){const P=this.prefixMatchers(b,S.filter(d=>!d.startsWith("!"))),K=this.prefixMatchers(b,S.filter(d=>d.startsWith("!")).map(d=>d.slice(1)));if(this.isMatch(e,P)&&!this.isMatch(e,K))return m}else throw console.log(m),new Error('Invalid file definition, no "detect" properties')}}prefixMatchers(e,r){if(!this.projectConfig)return[];if(e.length===0)return r.map(n=>this.projectConfig.resolvePackPath(void 0,n));const u=[];for(const n of e)for(const s of r)u.push(this.projectConfig.resolvePackPath(n,s));return u}getIds(){const e=[];for(const r of this.all)e.push(r.id);return e}async guessFolder(e){var r;const u=(f,l)=>{var E,F;let y=Array.isArray(f)?f[0]:f;y.endsWith("/")||(y+="/");const A=(F=(E=this.projectConfig)==null?void 0:E.getAbsolutePackRoot(l))!=null?F:"./unknown";return le.join(A,y)},n=`.${e.name.split(".").pop()}`,s=this.all.filter(({detect:f})=>{var l;return!f||!f.scope?!1:(l=f.fileExtensions)==null?void 0:l.includes(n)}),i=s.length===1,a=n!==".json"&&s.length>0;if(i||a){const{detect:f}=s[0];return u(f.scope,Array.isArray(f.packType)?f.packType[0]:(r=f.packType)!=null?r:"behaviorPack")}if(n!==".json")return null;const o=await e.getFile();let c;try{c=vr.parse(await o.text())}catch{return null}for(const{type:f,detect:l}of s){if(typeof f=="string"&&f!=="json")continue;const{scope:E,fileContent:F,packType:y="behaviorPack"}=l!=null?l:{};if(!(!E||!F)&&!!ps(c,F))return u(E,Array.isArray(y)?y[0]:y)}return null}getId(e){var r,u;return(u=(r=this.get(e))==null?void 0:r.id)!=null?u:"unknown"}isJsonFile(e){var r,u;const n=(u=(r=this.get(e))==null?void 0:r.meta)==null?void 0:u.language;return n?n==="json":e.endsWith(".json")}}class Rs extends xs{constructor(e){super(e,Ar),this.ready=new Ve,this.lCacheFiles={},this.lCacheFilesLoaded=new Ve,this.packSpiderFiles={},this.packSpiderFilesLoaded=new Ve}setProjectConfig(e){this.projectConfig=e}async setup(e){this.fileTypes.length>0||(await e.fired,this.fileTypes=await e.readJSON("data/packages/minecraftBedrock/fileDefinitions.json"),this.loadLightningCache(e),this.loadPackSpider(e),this.ready.dispatch())}getMonacoSchemaEntries(){return this.fileTypes.map(({detect:e={},schema:r})=>{if(!e.matcher)return null;const u=(e==null?void 0:e.packType)===void 0?[]:Array.isArray(e==null?void 0:e.packType)?e==null?void 0:e.packType:[e==null?void 0:e.packType];return{fileMatch:this.prefixMatchers(u,Array.isArray(e.matcher)?[...e.matcher]:[e.matcher]).map(n=>encodeURI(n).replaceAll(/;|,|@|&|=|\+|\$|\.|!|'|\(|\)|#/g,"*")),uri:r}}).filter(e=>e!==null).flat()}async loadLightningCache(e){var n;const r=await e.readJSON("data/packages/minecraftBedrock/lightningCaches.json"),u=s=>Object.entries(r).find(([i])=>i.endsWith(s));for(const s of this.fileTypes){if(!s.lightningCache)continue;const[i,a]=(n=u(s.lightningCache))!=null?n:[];if(!i)throw new Error(`Lightning cache file "${s.lightningCache}" for file type "${s.id}" not found`);this.lCacheFiles[s.lightningCache]=a}this.lCacheFilesLoaded.dispatch()}async getLightningCache(e){var u,n;const{lightningCache:r}=(u=this.get(e))!=null?u:{};return r?(await this.lCacheFilesLoaded.fired,(n=this.lCacheFiles[r])!=null?n:[]):[]}async loadPackSpider(e){const r=await e.readJSON("data/packages/minecraftBedrock/packSpiders.json");this.packSpiderFiles=Object.fromEntries(this.fileTypes.map(({id:u,packSpider:n})=>{if(!!n)return[u,r[`file:///data/packages/minecraftBedrock/packSpider/${n}`]]}).filter(u=>u!==void 0)),this.packSpiderFilesLoaded.dispatch()}async getPackSpiderData(){return await this.packSpiderFilesLoaded.fired,this.packSpiderFiles}}class ks{constructor(e,r,u){this.taskService=e,this.current=r,this.total=u}addToCurrent(e){this.current+=e!=null?e:1,this.taskService.dispatch([this.getCurrent(),this.getTotal()])}addToTotal(e){this.total+=e!=null?e:1,this.taskService.dispatch([this.getCurrent(),this.getTotal()])}getTotal(){return this.total}getCurrent(){return this.current}setTotal(e){this.total=e}}class Ts extends Mr{constructor(){super(...arguments),this.lastDispatch=0}async start(e){this.progress=new ks(this,0,0);const r=await this.onStart(e);return this.dispatch([this.progress.getCurrent(),this.progress.getCurrent()]),r}dispatch(e){this.lastDispatch+200>Date.now()||(super.dispatch(e),this.lastDispatch=Date.now())}}const Wu=le.dirname,mr=le.join,$s=le.extname,Sr=le.basename;le.resolve,le.relative;class Ps{constructor(e,r,u){this.fileType=r,this.projectPath=u,this._visitedFiles=0,this._totalFiles=0,this.fs=e}get visitedFiles(){return this._visitedFiles}get totalFiles(){return this._totalFiles}reset(){this.store={}}async setup(){var s,i;let e=[];try{e=(await this.fs.readFile(".bridge/.lightningCache").then(a=>a.text())).split(`
`)}catch{}if(this.store={},this._visitedFiles=0,this._totalFiles=0,e.length===0)return;let r=0;e[0].startsWith("$formatVersion: ")&&(r=Number((i=(s=e[0].match(/\d+/))==null?void 0:s[0])!=null?i:0),e.shift());const u=this.projectPath;let n="unknown";for(const a of e){if(a==="")continue;if(a[0]==="#"){n=a.slice(1),this.store[n]={};continue}let[o,c,f]=a.split("|");r===0&&(o=mr(u,o)),this._totalFiles++,this.store[n][o]={lastModified:Number(c),data:f?JSON.parse(f):void 0}}}async saveStore(e=!0){let r=`$formatVersion: 1
`;const u=[];for(const n in this.store){r+=`#${n}
`;for(const s in this.store[n]){const i=this.store[n][s];if(!i.isForeignFile){if(e&&!i.visited){u.push(s),delete this.store[n][s];continue}r+=`${s}|${i.lastModified}`,i.data?r+=`|${JSON.stringify(i.data)}
`:r+=`
`}}}return await this.fs.writeFile(".bridge/.lightningCache",r),u}add(e,{lastModified:r,data:u,isForeignFile:n},s=this.fileType.getId(e)){var i,a;this.store[s]||(this.store[s]={}),this._visitedFiles++,this.store[s][e]||this._totalFiles++,this.store[s][e]={visited:!0,lastModified:r,isForeignFile:n,data:u!=null?u:(a=(i=this.store[s])==null?void 0:i[e])==null?void 0:a.data}}remove(e,r=this.fileType.getId(e)){!this.store[r]||delete this.store[r][e]}setVisited(e,r,u=this.fileType.getId(e)){var n,s;this._visitedFiles++,(s=(n=this.store)==null?void 0:n[u])!=null&&s[e]&&(this.store[u][e].visited=r)}getLastModified(e,r=this.fileType.getId(e)){var u,n;return(n=(u=this.store[r])==null?void 0:u[e])==null?void 0:n.lastModified}find(e,r,u,n=!1){var a,o;if(!u||u.length===0)return[];const s=this.store[e],i=[];for(const c in s)if(((o=(a=s[c].data)==null?void 0:a[r])!=null?o:[]).find(l=>u.includes(l)))if(n)i.push(c);else return[c];return i}findMultiple(e,r,u,n=!1){const s=[];for(const i of e){const a=this.find(i,r,u,n);if(a.length>0&&!n)return a;s.push(...a)}return s}async forEach(e,r){const u=this.store[e],n=[];for(const s in u)n.push(r(s,u[s]));await Promise.all(n)}get(e,r=this.fileType.getId(e)){var u,n;return(n=(u=this.store[r])==null?void 0:u[e])!=null?n:{}}has(e,r=this.fileType.getId(e)){var u;return!!((u=this.store[r])!=null&&u[e])}allFiles(e){const r=[];if(e&&this.store)for(const u in this.store[e])this.store[e][u].isForeignFile||r.push(u);else for(const u in this.store)for(const n in this.store[u])this.store[u][n].isForeignFile||r.push(n);return r}getAllFrom(e,r){var n,s,i;const u={};for(const a in(n=this.store[e])!=null?n:{}){if(r&&r!==a)continue;const o=(i=((s=this.store[e][a])!=null?s:{}).data)!=null?i:{};for(const c in o)u[c]?u[c].push(...o[c]):u[c]=[...o[c]]}for(const a in u)u[a]=[...new Set(u[a])];return u}async getSchemasFor(e,r){const u=await this.getAllFrom(e,r),n=`file:///data/packages/minecraftBedrock/schema/${e}/dynamic`,s=[];for(const i in u)s.push({uri:`${n}/${r?"currentContext/":""}${i}Enum.json`,schema:{type:"string",enum:u[i]}}),s.push({uri:`${n}/${r?"currentContext/":""}${i}Property.json`,schema:{properties:Object.fromEntries(u[i].map(a=>[a,{}]))}});return s}getCacheDataFor(e,r,u){const n=this.getAllFrom(e,r);return typeof u=="string"?n[u]:n}}class Os{constructor(e,r){this.packIndexer=e,this.lightningStore=r,this.packSpiderFiles=new Map}get fileType(){return this.packIndexer.fileType}async setup(e){const r=await this.fileType.getPackSpiderData();for(const u in r){const n=r[u],s=this.lightningStore.allFiles(u);for(const i of s){const a=new Hs({lightningStore:this.lightningStore,filePath:i,fileType:u,instructions:n});this.packSpiderFiles.set(i,a)}}}getDiagnostics(e){const r=this.packSpiderFiles.get(e);return r?r.provideDiagnostics():[]}getConnectedFiles(e){const r=this.packSpiderFiles.get(e);return r?[...r.loadAllConnected()]:[]}async updateFile(e){}}class Hs{constructor({lightningStore:e,filePath:r,fileType:u,instructions:n}){this.dependencies=new Map,this.lightningStore=e,this.filePath=r,this.fileType=u,this.instructions=n}get cacheData(){var e;return(e=this.lightningStore.get(this.filePath).data)!=null?e:{}}loadAllConnected(){return new Set([...this.loadConnected(),...this.loadDirectReferences()])}loadDirectReferences(){var e,r;return new Set((r=(e=this.instructions.includeFiles)==null?void 0:e.map(u=>{var n;if(u)return(n=this.cacheData[u])!=null?n:[]}).flat())!=null?r:[])}loadConnected(e=this.instructions.connect){var u;const r=new Set;for(let{find:n,where:s,matches:i,shouldFindMultiple:a}of e!=null?e:[]){Array.isArray(n)||(n=[n]);const o=(u=this.cacheData[i])!=null?u:[],c=this.lightningStore.findMultiple(n,s,o,a!=null?a:!0);for(const f of c)f!==this.filePath&&r.add(f)}return r}provideDiagnostics(){var r;const e=[];for(let{if:u,...n}of(r=this.instructions.provideDiagnostics)!=null?r:[]){const s=this.loadConnected([u]);if(u.not){if(s.size>0)continue;e.push(n)}else{if(s.size===0)continue;e.push(n)}}return e}addDependency(e,r){this.dependencies.has(e)?this.dependencies.get(e).add(r):this.dependencies.set(e,new Set(r))}}function br(t){return Is(t)(...Object.values(t.env))}function Is({script:t,env:e,language:r,modules:u,async:n=!1}){if(r==="typeScript")throw new Error(`bridge.'s legacy script runner no longer supports TypeScript. Use "bridge-js-runner" instead.`);let s=Ls(t);if(u){const i=e.require;e.require=async a=>{if(u[a])return u[a];if(typeof i=="function")return await(i==null?void 0:i(a))}}try{return n?new Function(...Object.keys(e),`return (async () => {
${s}
})()`):new Function(...Object.keys(e),s)}catch(i){throw console.error(t),new Error(`Error within script: ${i}`)}}function Ls(t){return t.replace(/export default([ \(])/g,(e,r)=>`module.exports =${r}`).replace(/import\s+(\* as [a-z][a-z0-9]*|[a-z][a-z0-9]+|{[a-z\s][a-z0-9,\s]*})\s+from\s+["'](.+)["']/gi,(e,r,u)=>(r.startsWith("* as ")&&(r=r.replace("* as ","")),`const ${r} = await require('${u}')`))}function Ns(t){const e={exports:void 0};return br({script:t,env:{module:e}}),e.exports}async function Ms(t,e,r){for(const u of r){const n=`${e}${u}`;if(await t.fileExists(n))return n}}function js(t,e){return{Bridge:{value:t,withExtension:(r,u)=>Ms(e.fileSystem,r,u),resolvePackPath:(r,u)=>e.config.resolvePackPath(r,u)}}}const Ws=new Set([".js",".ts",".lang",".mcfunction",".txt",".molang",".html"]),zu=[".bridge","builds",".git","worlds"];class zs{constructor(e,r){this.service=e,this.lightningStore=r,this.folderIgnoreList=new Set,this.totalTime=0}get fileType(){return this.service.fileType}async loadIgnoreFolders(){try{(await(await this.service.projectFileSystem.readFile(".bridge/.ignoreFolders")).text()).split(`
`).concat(zu).forEach(r=>this.folderIgnoreList.add(r))}catch{zu.forEach(e=>this.folderIgnoreList.add(e))}}async start(e){if(await this.lightningStore.setup(),this.folderIgnoreList.size===0&&await this.loadIgnoreFolders(),!e&&this.service.getOptions().noFullLightningCacheRefresh){const o=this.lightningStore.allFiles();if(o.length>0)return[o,[],[]]}let r=!1;const u=[],n=[],s=this.service.config.getAvailablePackPaths(),i=await Promise.all(s.map(async o=>[o,await this.service.fileSystem.getDirectoryHandle(o).catch(()=>{})]));for(const[o,c]of i){if(!c){console.warn(`Cannot index pack "${o}" because it does not exist`);continue}await this.iterateDir(c,async(f,l)=>{l=mr(o,l),await this.processFile(l,f)&&(r||(r=!0),n.push(l)),u.push(l),this.service.progress.addToCurrent()})}let a=[];return(r||this.lightningStore.visitedFiles!==this.lightningStore.totalFiles)&&(a=await this.lightningStore.saveStore()),[u,n,a]}async unlinkFile(e,r=!0){this.lightningStore.remove(e),r&&await this.lightningStore.saveStore(!1)}async iterateDir(e,r,u=""){for await(const[n,s]of e.entries()){const i=u.length===0?n:`${u}/${n}`;if(s.kind==="directory"){if(this.folderIgnoreList.has(i))continue;await this.iterateDir(s,r,i)}else n[0]!=="."&&(this.service.progress.addToTotal(2),await r(s,i))}}async processFile(e,r,u=!1){const n=typeof r=="string",s=n?new File([r],Sr(e)):await r.getFile(),i=this.fileType.getId(e);if(!s)throw new Error('Invalid call to "processFile": Either fileContent or fileHandle needs to be defined!');if(!n&&s.lastModified===this.lightningStore.getLastModified(e,i))return this.lightningStore.setVisited(e,!0,i),!1;const a=$s(e);return this.fileType.isJsonFile(e)?await this.processJSON(e,i,s,n?r:void 0,u):Ws.has(a)?await this.processText(e,i,s,u):this.lightningStore.add(e,{lastModified:s.lastModified,isForeignFile:u},i),!0}async processText(e,r,u,n){const s=await this.fileType.getLightningCache(e);if(typeof s=="string"){const i=Ns(s);if(typeof i=="function"){const a=i(await u.text(),{resolvePackPath:(o,c)=>this.service.config.resolvePackPath(o,c)});this.lightningStore.add(e,{lastModified:u.lastModified,isForeignFile:n,data:Object.keys(a).length>0?a:void 0},r)}}this.lightningStore.add(e,{lastModified:u.lastModified,isForeignFile:n},r)}async processJSON(e,r,u,n,s){const i=await this.fileType.getLightningCache(e);if(i.length===0||typeof i=="string"){this.lightningStore.add(e,{lastModified:u.lastModified,isForeignFile:s},r);return}const a=n!==void 0;n===void 0&&(n=await u.text()),n===""&&(n="{}");let o;try{o=vr.parse(n)}catch(F){a||(console.error(`[${e}] ${F.message}`),this.lightningStore.add(e,{lastModified:u.lastModified,isForeignFile:s},r));return}const c={},f=(F,y,A)=>async v=>{let C;if(Array.isArray(v)?C=v:typeof v=="object"?C=Object.keys(v!=null?v:{}):C=[v],y&&(C=C.filter(m=>!y.includes(m))),A){const m={config:this.service.config,fileSystem:this.service.fileSystem};C=(await Promise.all(C.map(b=>br({async:!0,script:A,env:{...js(b,m)}})))).filter(b=>b!==void 0)}c[F]?c[F]=[...new Set(c[F].concat(C))]:c[F]=C},l=[],E=(F,y,A)=>v=>{l.push(f(F,y,A)(v))};for(const F of i){const y=F.cacheKey;if(!y)continue;let A=Array.isArray(F.path)?F.path:[F.path];const v=F.pathScript;if(v&&(A=br({script:v,env:{Bridge:{paths:A}}}),!Array.isArray(A)||A.length===0))return;for(const C of A)Hu(C,o,E(y,F.filter,F.script))}await Promise.all(l),this.lightningStore.add(e,{lastModified:u.lastModified,isForeignFile:s,data:Object.keys(c).length>0?c:void 0},r)}}async function Br(t,e,r=new Set,u=""){for await(const n of t.values()){const s=u.length===0?n.name:`${u}/${n.name}`;if(n.kind==="file"){if(n.name[0]===".")continue;await e(n,s,t)}else n.kind==="directory"&&!r.has(s)&&await Br(n,e,r,s)}}async function Gs(){return typeof(await(await navigator.storage.getDirectory()).getFileHandle("bridge-supports-writable-test",{create:!0})).createWritable=="function"}async function Gu(){var t;return typeof((t=navigator.storage)==null?void 0:t.getDirectory)!="function"||!await Gs()?new ae(null,"bridgeFolder",void 0):await navigator.storage.getDirectory()}class ut extends Ve{constructor(e){super(),e&&this.setup(e)}get baseDirectory(){return this._baseDirectory}setup(e){this._baseDirectory=e,this.hasFired||this.dispatch()}async getDirectoryHandle(e,{create:r,createOnce:u}={}){if(e===""||e===".")return this.baseDirectory;let n=this.baseDirectory;const s=e.split(/\\|\//g);s[0]==="."&&s.shift(),s[0]==="extensions"&&(s[0]="~local",s.splice(1,0,"extensions")),s[0]==="~local"&&(n=await Gu(),s.shift());for(const i of s){try{n=await n.getDirectoryHandle(i,{create:u||r})}catch{throw new Error(`Failed to access "${e}": Directory does not exist`)}u&&(u=!1,r=!1)}return n}async getFileHandle(e,r=!1){if(e.length===0)throw new Error("Error: filePath is empty");const u=await this.getDirectoryHandle(Wu(e),{create:r});try{return await u.getFileHandle(Sr(e),{create:r})}catch{throw new Error(`File does not exist: "${e}"`)}}async pathTo(e){const r=await Gu();if(e instanceof he&&!(r instanceof ae))return;let u=await r.resolve(e).then(n=>n==null?void 0:n.join("/"));return u?u="~local/"+u:u=await this.baseDirectory.resolve(e).then(n=>n==null?void 0:n.join("/")),u}async mkdir(e,{recursive:r}={}){await this.getDirectoryHandle(e,{create:!0})}async readdir(e,{withFileTypes:r}={}){const u=await this.getDirectoryHandle(e),n=[];for await(const s of u.values())s.kind==="file"&&s.name===".DS_Store"||(r?n.push(s):n.push(s.name));return n}async readFilesFromDir(e,r=this.getDirectoryHandle(e)){r=await r;const u=[];for await(const n of r.values())n.kind==="file"&&n.name===".DS_Store"||(n.kind==="file"?u.push({name:n.name,kind:n.kind,path:`${e}/${n.name}`}):n.kind==="directory"&&u.push(...await this.readFilesFromDir(`${e}/${n.name}`,n)));return u}readFile(e){return this.getFileHandle(e).then(r=>r.getFile())}async unlink(e){if(e.length===0)throw new Error("Error: filePath is empty");const r=e.split(/\\|\//g),u=r.pop();let n;try{n=await this.getDirectoryHandle(r.join("/"))}catch{return}try{await n.removeEntry(u,{recursive:!0})}catch{}}async writeFile(e,r){const u=await this.getFileHandle(e,!0);return await this.write(u,r),u}async write(e,r){const u=await e.createWritable({keepExistingData:!1});await u.write(r),await u.close()}async readJSON(e){const r=await this.readFile(e);try{return await vr.parse(await r.text())}catch{throw new Error(`Invalid JSON: ${e}`)}}writeJSON(e,r,u=!1){return this.writeFile(e,JSON.stringify(r,null,u?"	":void 0))}async move(e,r){if(await this.fileExists(e))await this.copyFile(e,r);else if(await this.directoryExists(e))await this.copyFolder(e,r);else throw new Error(`File or folder does not exist: ${e}`);await this.unlink(e)}async copyFile(e,r){const u=await this.getFileHandle(e,!1),n=await this.getFileHandle(r,!0);return await this.copyFileHandle(u,n)}async copyFileHandle(e,r){return await this.write(r,await e.getFile()),r}async copyFolder(e,r){const u=await this.getDirectoryHandle(e,{create:!1});await Br(u,async(n,s)=>{await this.copyFileHandle(n,await this.getFileHandle(mr(r,s),!0))})}async copyFolderByHandle(e,r){const u=new ut(r);await Br(e,async(n,s)=>{await this.copyFileHandle(n,await u.getFileHandle(s,!0))})}loadFileHandleAsDataUrl(e){return new Promise(async(r,u)=>{const n=new FileReader;try{const s=await e.getFile();n.addEventListener("load",()=>{r(n.result)}),n.addEventListener("error",u),n.readAsDataURL(s)}catch{u(`File does not exist: "${e.name}"`)}})}async fileExists(e){try{return await this.getFileHandle(e),!0}catch{return!1}}async directoryExists(e){try{return await this.getDirectoryHandle(e),!0}catch{return!1}}async getDirectoryHandlesFromGlob(e,r="."){const u=e.split(/\/|\\/g),n=new Set([await this.getDirectoryHandle(r)]);for(const s of u){if(s==="*")for(const i of[...n.values()]){n.delete(i);for await(const a of i.values())a.kind==="directory"&&n.add(a)}else{if(s==="**")return console.warn('"**" is not supported yet'),[];for(const i of[...n.values()]){n.delete(i);try{n.add(await i.getDirectoryHandle(s))}catch{}}}if(n.size===0)return[]}return[...n.values()]}}class Us extends _s{constructor(e){super(e),this.ready=new Ve}async setup(e){this.packTypes.length>0||(await e.fired,this.packTypes=await e.readJSON("data/packages/minecraftBedrock/packDefinitions.json").catch(()=>[]),this.ready.dispatch())}}const Ks="/";var Uu={},Vs=function(t,e,r,u,n){var s=Uu[e]||(Uu[e]=URL.createObjectURL(new Blob([t],{type:"text/javascript"}))),i=new Worker(s);return i.onerror=function(a){return n(a.error,null)},i.onmessage=function(a){return n(null,a.data)},i.postMessage(r,u),i},ee=Uint8Array,Ae=Uint16Array,ft=Uint32Array,_r=new ee([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),xr=new ee([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),Ku=new ee([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),Vu=function(t,e){for(var r=new Ae(31),u=0;u<31;++u)r[u]=e+=1<<t[u-1];for(var n=new ft(r[30]),u=1;u<30;++u)for(var s=r[u];s<r[u+1];++s)n[s]=s-r[u]<<5|u;return[r,n]},Ju=Vu(_r,2),Rr=Ju[0],Js=Ju[1];Rr[28]=258,Js[258]=28;for(var Xs=Vu(xr,0),Xu=Xs[0],kt=new Ae(32768),W=0;W<32768;++W){var Te=(W&43690)>>>1|(W&21845)<<1;Te=(Te&52428)>>>2|(Te&13107)<<2,Te=(Te&61680)>>>4|(Te&3855)<<4,kt[W]=((Te&65280)>>>8|(Te&255)<<8)>>>1}for(var nt=function(t,e,r){for(var u=t.length,n=0,s=new Ae(e);n<u;++n)++s[t[n]-1];var i=new Ae(e);for(n=0;n<e;++n)i[n]=i[n-1]+s[n-1]<<1;var a;if(r){a=new Ae(1<<e);var o=15-e;for(n=0;n<u;++n)if(t[n])for(var c=n<<4|t[n],f=e-t[n],l=i[t[n]-1]++<<f,E=l|(1<<f)-1;l<=E;++l)a[kt[l]>>>o]=c}else for(a=new Ae(u),n=0;n<u;++n)t[n]&&(a[n]=kt[i[t[n]-1]++]>>>15-t[n]);return a},Dt=new ee(288),W=0;W<144;++W)Dt[W]=8;for(var W=144;W<256;++W)Dt[W]=9;for(var W=256;W<280;++W)Dt[W]=7;for(var W=280;W<288;++W)Dt[W]=8;for(var Qu=new ee(32),W=0;W<32;++W)Qu[W]=5;var qu=nt(Dt,9,1),Zu=nt(Qu,5,1),Tt=function(t){for(var e=t[0],r=1;r<t.length;++r)t[r]>e&&(e=t[r]);return e},ce=function(t,e,r){var u=e/8|0;return(t[u]|t[u+1]<<8)>>(e&7)&r},$t=function(t,e){var r=e/8|0;return(t[r]|t[r+1]<<8|t[r+2]<<16)>>(e&7)},Yu=function(t){return(t/8|0)+(t&7&&1)},Pt=function(t,e,r){(e==null||e<0)&&(e=0),(r==null||r>t.length)&&(r=t.length);var u=new(t instanceof Ae?Ae:t instanceof ft?ft:ee)(r-e);return u.set(t.subarray(e,r)),u},en=function(t,e,r){var u=t.length;if(!u||r&&!r.l&&u<5)return e||new ee(0);var n=!e||r,s=!r||r.i;r||(r={}),e||(e=new ee(u*3));var i=function(k){var Ge=e.length;if(k>Ge){var It=new ee(Math.max(Ge*2,k));It.set(e),e=It}},a=r.f||0,o=r.p||0,c=r.b||0,f=r.l,l=r.d,E=r.m,F=r.n,y=u*8;do{if(!f){r.f=a=ce(t,o,1);var A=ce(t,o+1,3);if(o+=3,A)if(A==1)f=qu,l=Zu,E=9,F=5;else if(A==2){var b=ce(t,o,31)+257,x=ce(t,o+10,15)+4,B=b+ce(t,o+5,31)+1;o+=14;for(var L=new ee(B),N=new ee(19),S=0;S<x;++S)N[Ku[S]]=ce(t,o+S*3,7);o+=x*3;for(var P=Tt(N),K=(1<<P)-1,d=nt(N,P,1),S=0;S<B;){var I=d[ce(t,o,K)];o+=I&15;var v=I>>>4;if(v<16)L[S++]=v;else{var H=0,oe=0;for(v==16?(oe=3+ce(t,o,3),o+=2,H=L[S-1]):v==17?(oe=3+ce(t,o,7),o+=3):v==18&&(oe=11+ce(t,o,127),o+=7);oe--;)L[S++]=H}}var h=L.subarray(0,b),D=L.subarray(b);E=Tt(h),F=Tt(D),f=nt(h,E,1),l=nt(D,F,1)}else throw"invalid block type";else{var v=Yu(o)+4,C=t[v-4]|t[v-3]<<8,m=v+C;if(m>u){if(s)throw"unexpected EOF";break}n&&i(c+C),e.set(t.subarray(v,m),c),r.b=c+=C,r.p=o=m*8;continue}if(o>y){if(s)throw"unexpected EOF";break}}n&&i(c+131072);for(var Z=(1<<E)-1,O=(1<<F)-1,ie=o;;ie=o){var H=f[$t(t,o)&Z],Y=H>>>4;if(o+=H&15,o>y){if(s)throw"unexpected EOF";break}if(!H)throw"invalid length/literal";if(Y<256)e[c++]=Y;else if(Y==256){ie=o,f=null;break}else{var te=Y-254;if(Y>264){var S=Y-257,ge=_r[S];te=ce(t,o,(1<<ge)-1)+Rr[S],o+=ge}var ht=l[$t(t,o)&O],$e=ht>>>4;if(!ht)throw"invalid distance";o+=ht&15;var D=Xu[$e];if($e>3){var ge=xr[$e];D+=$t(t,o)&(1<<ge)-1,o+=ge}if(o>y){if(s)throw"unexpected EOF";break}n&&i(c+131072);for(var Fe=c+te;c<Fe;c+=4)e[c]=e[c-D],e[c+1]=e[c+1-D],e[c+2]=e[c+2-D],e[c+3]=e[c+3-D];c=Fe}}r.l=f,r.p=ie,r.b=c,f&&(a=1,r.m=E,r.d=l,r.n=F)}while(!a);return c==e.length?e:Pt(e,0,c)},Qs=new ee(0),qs=function(t,e){var r={};for(var u in t)r[u]=t[u];for(var u in e)r[u]=e[u];return r},tn=function(t,e,r){for(var u=t(),n=t.toString(),s=n.slice(n.indexOf("[")+1,n.lastIndexOf("]")).replace(/ /g,"").split(","),i=0;i<u.length;++i){var a=u[i],o=s[i];if(typeof a=="function"){e+=";"+o+"=";var c=a.toString();if(a.prototype)if(c.indexOf("[native code]")!=-1){var f=c.indexOf(" ",8)+1;e+=c.slice(f,c.indexOf("(",f))}else{e+=c;for(var l in a.prototype)e+=";"+o+".prototype."+l+"="+a.prototype[l].toString()}else e+=c}else r[o]=a}return[e,r]},Ot=[],Zs=function(t){var e=[];for(var r in t)(t[r]instanceof ee||t[r]instanceof Ae||t[r]instanceof ft)&&e.push((t[r]=new t[r].constructor(t[r])).buffer);return e},Ys=function(t,e,r,u){var n;if(!Ot[r]){for(var s="",i={},a=t.length-1,o=0;o<a;++o)n=tn(t[o],s,i),s=n[0],i=n[1];Ot[r]=tn(t[a],s,i)}var c=qs({},Ot[r][1]);return Vs(Ot[r][0]+";onmessage=function(e){for(var k in e.data)self[k]=e.data[k];onmessage="+e.toString()+"}",r,c,Zs(c),u)},ea=function(){return[ee,Ae,ft,_r,xr,Ku,Rr,Xu,qu,Zu,kt,nt,Tt,ce,$t,Yu,Pt,en,Tr,rn,un]},rn=function(t){return postMessage(t,[t.buffer])},un=function(t){return t&&t.size&&new ee(t.size)},ta=function(t,e,r,u,n,s){var i=Ys(r,u,n,function(a,o){i.terminate(),s(a,o)});return i.postMessage([t,e],e.consume?[t.buffer]:[]),function(){i.terminate()}},Ce=function(t,e){return t[e]|t[e+1]<<8},De=function(t,e){return(t[e]|t[e+1]<<8|t[e+2]<<16|t[e+3]<<24)>>>0},kr=function(t,e){return De(t,e)+De(t,e+4)*4294967296};function ra(t,e,r){if(r||(r=e,e={}),typeof r!="function")throw"no callback";return ta(t,e,[ea],function(u){return rn(Tr(u.data[0],un(u.data[1])))},1,r)}function Tr(t,e){return en(t,e)}var $r=typeof TextDecoder<"u"&&new TextDecoder,ua=0;try{$r.decode(Qs,{stream:!0}),ua=1}catch{}var na=function(t){for(var e="",r=0;;){var u=t[r++],n=(u>127)+(u>223)+(u>239);if(r+n>t.length)return[e,Pt(t,r-1)];n?n==3?(u=((u&15)<<18|(t[r++]&63)<<12|(t[r++]&63)<<6|t[r++]&63)-65536,e+=String.fromCharCode(55296|u>>10,56320|u&1023)):n&1?e+=String.fromCharCode((u&31)<<6|t[r++]&63):e+=String.fromCharCode((u&15)<<12|(t[r++]&63)<<6|t[r++]&63):e+=String.fromCharCode(u)}};function ia(t,e){if(e){for(var r="",u=0;u<t.length;u+=16384)r+=String.fromCharCode.apply(null,t.subarray(u,u+16384));return r}else{if($r)return $r.decode(t);var n=na(t),s=n[0],i=n[1];if(i.length)throw"invalid utf-8 data";return s}}var sa=function(t,e){return e+30+Ce(t,e+26)+Ce(t,e+28)},aa=function(t,e,r){var u=Ce(t,e+28),n=ia(t.subarray(e+46,e+46+u),!(Ce(t,e+8)&2048)),s=e+46+u,i=De(t,e+20),a=r&&i==4294967295?oa(t,s):[i,De(t,e+24),De(t,e+42)],o=a[0],c=a[1],f=a[2];return[Ce(t,e+10),o,c,n,s+Ce(t,e+30)+Ce(t,e+32),f]},oa=function(t,e){for(;Ce(t,e)!=1;e+=4+Ce(t,e+2));return[kr(t,e+12),kr(t,e+4),kr(t,e+20)]};function ca(t,e){if(typeof e!="function")throw"no callback";for(var r=[],u=function(){for(var E=0;E<r.length;++E)r[E]()},n={},s=t.length-22;De(t,s)!=101010256;--s)if(!s||t.length-s>65558){e("invalid zip file",null);return}var i=Ce(t,s+8);i||e(null,{});var a=i,o=De(t,s+16),c=o==4294967295;if(c){if(s=De(t,s-12),De(t,s)!=101075792){e("invalid zip file",null);return}a=i=De(t,s+32),o=De(t,s+48)}for(var f=function(E){var F=aa(t,o,c),y=F[0],A=F[1],v=F[2],C=F[3],m=F[4],b=F[5],x=sa(t,b);o=m;var B=function(N,S){N?(u(),e(N,null)):(n[C]=S,--i||e(null,n))};if(!y)B(null,Pt(t,x,x+A));else if(y==8){var L=t.subarray(x,x+A);if(A<32e4)try{B(null,Tr(L,new ee(v)))}catch(N){B(N,null)}else r.push(ra(L,{size:v},B))}else B("unknown compression type "+y,null)},l=0;l<a;++l)f();return u}const nn=1088596;function la(t){return new Promise(async e=>{typeof requestIdleCallback=="function"?requestIdleCallback(async()=>{await t(),e()}):(await t(),e())})}class fa extends ut{constructor(e=!1){super(),this.isMainLoader=e}get virtualFileSystem(){if(!this._virtualFileSystem)throw new Error("DataLoader: virtualFileSystem is not initialized");return this._virtualFileSystem}async loadData(e=!1){if(this.hasFired){console.warn("This dataLoader instance already loaded data. You called loadData() twice.");return}let r=await Kt("savedAllDataInIdb");e&&(r=!1,await Vt("savedAllDataInIdb",!1)),this.isMainLoader&&console.log(r?"[APP] Data saved; restoring from cache...":"[APP] Data not saved; fetching now..."),console.time("[App] Data");const u=this.isMainLoader&&!r;if(this._virtualFileSystem=new ae(new it("data-fs"),"bridgeFolder",r?void 0:new Map,u),await this._virtualFileSystem.setupDone.fired,r){this.setup(this._virtualFileSystem),console.timeEnd("[App] Data");return}const n=await fetch(Ks+"packages.zip").then(o=>o.arrayBuffer());if(n.byteLength!==nn)throw new Error(`Error: Data package was larger than the expected size of ${nn} bytes; got ${n.byteLength} bytes`);const s=await new Promise((o,c)=>ca(new Uint8Array(n),async(f,l)=>{if(f)return c(f);o(l)})),a={".":await this._virtualFileSystem.getDirectoryHandle("data",{create:!0})};for(const o in s){const c=Sr(o),f=Wu(o);if(o.endsWith("/")){const l=await a[f].getDirectoryHandle(c,{create:!0});a[o.slice(0,-1)]=l}else await a[f].getFileHandle(c,{create:!0,initialData:s[o]})}this.setup(this._virtualFileSystem),console.timeEnd("[App] Data"),this.isMainLoader&&!e&&la(async()=>{await this._virtualFileSystem.moveToIdb(),await Vt("savedAllDataInIdb",!0)})}}class Da extends Bs{constructor(e,r,u){super(r),this.fileSystem=e,this.project=u,u&&u.fileSave.on(this.resolvePackPath(void 0,"config.json"),()=>{this.refreshConfig(),this.project.app.windows.createPreset.onPresetsChanged(),this.project.compilerService.reloadPlugins()})}readConfig(){return this.fileSystem.readJSON("config.json").catch(()=>({}))}async writeConfig(e){await this.fileSystem.writeJSON("config.json",e,!0)}async setup(e=!0){var n,s,i,a,o,c,f;if(e&&await this.fileSystem.fileExists(".bridge/config.json")){const{darkTheme:l,lightTheme:E,gameTestAPI:F,scriptingAPI:y,prefix:A,...v}=await this.fileSystem.readJSON(".bridge/config.json");await this.fileSystem.unlink(".bridge/config.json");const C={};F&&(C.enableGameTestFramework=!0),y&&(C.additionalModdingCapabilities=!0);const m={type:"minecraftBedrock",name:this.fileSystem.baseDirectory.name,namespace:A,experimentalGameplay:C,...v,authors:v.author?[v.author]:["Unknown"],packs:wr,bridge:{darkTheme:l,lightTheme:E}};await this.fileSystem.writeJSON("config.json",m,!0),this.data=m;return}await super.setup();const r=(s=(n=this.data.bridge)==null?void 0:n.formatVersion)!=null?s:0;this.data.bridge||(this.data.bridge={});let u=!1;if(e&&this.project&&this.data.capabilities){const l=await this.project.app.dataLoader.readJSON("data/packages/minecraftBedrock/experimentalGameplay.json"),E=(i=this.data.experimentalGameplay)!=null?i:{},F=(a=this.data.capabilities)!=null?a:[];E.enableGameTestFramework=F.includes("gameTestAPI"),E.additionalModdingCapabilities=F.includes("scriptingAPI");for(const y of l)(c=E[o=y.id])!=null||(E[o]=!0);this.data.experimentalGameplay=E,this.data.capabilities=void 0,u=!0}if(e&&this.data.author&&!this.data.authors&&(this.data.authors=typeof this.data.author=="string"?[this.data.author]:this.data.author,this.data.author=void 0,u=!0),e&&await this.fileSystem.fileExists(".bridge/compiler/default.json")){const l=await this.fileSystem.readJSON(".bridge/compiler/default.json");this.data.compiler={plugins:l.plugins},await this.fileSystem.unlink(".bridge/compiler/default.json"),u=!0}e&&r===0&&((f=this.data.compiler)==null?void 0:f.plugins)&&!this.data.compiler.plugins.includes("formatVersionCorrection")&&(this.data.bridge.formatVersion=1,this.data.compiler.plugins.push("formatVersionCorrection"),u=!0),u&&await this.writeConfig(this.data)}async getWorldHandles(){var u;if(!this.project)throw new Error("Cannot use getWorldHandles() within web workers yet");const e=this.project.app,r=((u=this.get().worlds)!=null?u:["./worlds/*"]).map(n=>this.resolvePackPath(void 0,n));return(await Promise.all(r.map(n=>e.fileSystem.getDirectoryHandlesFromGlob(n)))).flat()}getAuthorImage(){var r;const e=(r=this.get().authors)==null?void 0:r.find(u=>typeof u!="string"&&u.logo);if(!!e)return this.resolvePackPath(void 0,e.logo)}async toggleExperiment(e,r){var n,s;e.app.windows.loadingWindow.open();const u=(s=(n=this.get())==null?void 0:n.experimentalGameplay)!=null?s:{};u[r]=!u[r],await this.save(),e.isActiveProject&&await e.refresh(),e.app.windows.loadingWindow.close()}}globalThis.process={cwd:()=>"",env:{}};const Ht=new fa;class ha extends Ts{constructor(e,r,u){super(),this.projectDirectory=e,this.options=u,this.fileSystem=new ut(r),this.projectFileSystem=new ut(e),this.config=new Da(this.projectFileSystem,u.projectPath),this.fileType=new Rs(this.config),this.packType=new Us(this.config),this.globalFileSystem=new ut(r),this.lightningStore=new Ps(this.projectFileSystem,this.fileType,u.projectPath),this.packSpider=new Os(this,this.lightningStore),this.lightningCache=new zs(this,this.lightningStore),this.fileType.setPluginFileTypes(u.pluginFileTypes)}getOptions(){return{projectDirectory:this.projectDirectory,baseDirectory:this.fileSystem.baseDirectory,...this.options}}async onStart(e){console.time("[WORKER] SETUP"),this.lightningStore.reset(),Ht.hasFired||await Ht.loadData(),await Promise.all([this.fileType.setup(Ht),this.packType.setup(Ht),this.config.setup(!1)]),console.timeEnd("[WORKER] SETUP"),console.time("[WORKER] LightningCache");const[r,u,n]=await this.lightningCache.start(e);return console.timeEnd("[WORKER] LightningCache"),console.time("[WORKER] PackSpider"),await this.packSpider.setup(r),console.timeEnd("[WORKER] PackSpider"),[u,n]}async updateFile(e,r,u=!1,n=!1){const s=await this.lightningCache.processFile(e,r!=null?r:await this.fileSystem.getFileHandle(e),u);return s&&(n||await this.lightningStore.saveStore(!1),await this.packSpider.updateFile(e)),s}async updateFiles(e,r=!1){console.log("Update: ",e.join(", "));let u=!1;for(let n=0;n<e.length;n++)await this.updateFile(e[n],void 0,!1,!1)&&(u=!0);return!r&&u&&await this.lightningStore.saveStore(!1),u}hasFile(e){return this.lightningStore.has(e)}unlinkFile(e,r=!0){return this.lightningCache.unlinkFile(e,r)}saveCache(){return this.lightningStore.saveStore(!1)}updatePlugins(e){this.fileType.setPluginFileTypes(e)}find(e,r,u,n=!1){return this.lightningStore.find(e,r,u,n)}findMultiple(e,r,u,n=!1){return this.lightningStore.findMultiple(e,r,u,n)}getAllFiles(e,r=!1){return r?this.lightningStore.allFiles(e).sort((u,n)=>u.localeCompare(n)):this.lightningStore.allFiles(e)}getFileDiagnostics(e){return this.packSpider.getDiagnostics(e)}getConnectedFiles(e){return this.packSpider.getConnectedFiles(e)}getSchemasFor(e,r){return this.lightningStore.getSchemasFor(e,r)}getCacheDataFor(e,r,u){return this.lightningStore.getCacheDataFor(e,r,u)}}Mt(ha,self)})();
