import{V as e,v as t,d as i,l as n,e as s,D as a,M as o,r,c,a as l,g as d,s as h,m as p,b as u,f as m,h as g,i as f,j as w,k as v,U as b,w as y,p as k,n as S,o as x,q as _,t as C,u as P,x as j,W as T,y as F,z as E,A as W,B as M}from"./editor.worker.d2c322af.js";import{e as A,d as D,p as B,b as $,r as I,E as O}from"./path.c1e5c099.js";import{E as L,S as V,r as N,F as R,a as z,b as U}from"./run.54c795c4.js";!function(e=".",t="__import__"){try{self[t]=new Function("u","return import(u)")}catch(i){const n=new URL(e,location),s=e=>{URL.revokeObjectURL(e.src),e.remove()};self[t]=e=>new Promise(((i,a)=>{const o=new URL(e,n);if(self[t].moduleMap[o])return i(self[t].moduleMap[o]);const r=new Blob([`import * as m from '${o}';`,`${t}.moduleMap['${o}']=m;`],{type:"text/javascript"}),c=Object.assign(document.createElement("script"),{type:"module",src:URL.createObjectURL(r),onerror(){a(new Error(`Failed to import: ${e}`)),s(c)},onload(){i(self[t].moduleMap[o]),s(c)}});document.head.appendChild(c)})),self[t].moduleMap={}}}("/editor/assets/");let H=e.observable({});const K={methods:{t(e){const t=e;e?.startsWith("$vuetify.")||(e=`$vuetify.${e}`);const i=this.$vuetify.lang.t(e);return i===e?t:i}}};function q(e,t,i,n,s,a,o,r){var c,l="function"==typeof e?e.options:e;if(t&&(l.render=t,l.staticRenderFns=i,l._compiled=!0),n&&(l.functional=!0),a&&(l._scopeId="data-v-"+a),o?(c=function(e){(e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),s&&s.call(this,e),e&&e._registeredComponents&&e._registeredComponents.add(o)},l._ssrRegister=c):s&&(c=r?function(){s.call(this,(l.functional?this.parent:this).$root.$options.shadowRoot)}:s),c)if(l.functional){l._injectStyles=c;var d=l.render;l.render=function(e,t){return c.call(t),d(e,t)}}else{var h=l.beforeCreate;l.beforeCreate=h?[].concat(h,c):[c]}return{exports:e,options:l}}const J={name:"SidebarButton",mixins:[K],props:{displayName:String,icon:String,iconColor:String,color:String,isLoading:{type:Boolean,default:!1},alwaysAllowClick:{type:Boolean,default:!1},opacity:{type:Number,default:1}},data:()=>({settingsState:H,hasClicked:!1}),computed:{isSidebarRight(){return this.settingsState&&this.settingsState.appearance&&this.settingsState.appearance.isSidebarRight},smallerSidebarElements(){return this.settingsState&&this.settingsState.appearance&&this.settingsState.appearance.smallerSidebarElements},computedColor(){return this.color?this.color.startsWith("#")?this.color:`var(--v-${this.color}-base)`:this.isLoading?"var(--v-primary-base)":"var(--v-sidebarSelection-base)"}},methods:{onClick(){!this.alwaysAllowClick&&this.isLoading||(this.$emit("click"),this.hasClicked=!0,this.$nextTick((()=>this.hasClicked=!1)))}}},G={};var Z=q(J,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("v-tooltip",{attrs:{color:e.color?e.color:"tooltip",disabled:e.hasClicked,right:!e.isSidebarRight,left:e.isSidebarRight},scopedSlots:e._u([{key:"activator",fn:function(t){var n=t.on;return[i("div",e._g({directives:[{name:"ripple",rawName:"v-ripple",value:e.alwaysAllowClick||!e.isLoading,expression:"alwaysAllowClick || !isLoading"}],staticClass:"rounded-lg ma-2 d-flex justify-center sidebar-button",class:{loading:e.isLoading,"pa-1":e.smallerSidebarElements,"pa-2":!e.smallerSidebarElements},style:{"background-color":e.computedColor},on:{click:e.onClick}},n),[i("v-icon",{style:{position:e.isLoading?"absolute":"relative",margin:e.isLoading?"4px":0},attrs:{color:e.isLoading?"white":e.iconColor,small:e.isLoading}},[e._v("\n\t\t\t\t"+e._s(e.icon)+"\n\t\t\t")]),e._v(" "),e.isLoading?e._t("default",[i("v-progress-circular",{attrs:{size:"24",width:"2",color:"white",indeterminate:""}})]):e._e()],2)]}}],null,!0)},[e._v(" "),i("span",[e._v(e._s(e.t(e.displayName)))])])}),[],!1,(function(e){for(let t in G)this[t]=G[t]}),"4f33c0ae",null,null).exports;const Q=e.observable({currentState:null,sidebarElements:{}});function X(e){const t=Object.values(Q.sidebarElements).find((({uuid:t})=>t===e));if(!t)throw new Error(`Sidebar with id "${e}" not found`);t?.click()}const Y=e.observable({});function ee(i,n={},s=!0,a=(()=>{})){const o={};o.done=new Promise((e=>{o.setDone=e}));const r=t(),c=e.observable(Object.assign(n,{isVisible:!1,shouldRender:!1})),l={component:i,getState:()=>c,close:()=>{a(),c.isVisible=!1,setTimeout((()=>{c.shouldRender=!1,s&&l.dispose()}),600)},open:()=>{c.shouldRender=!0,c.isVisible=!0},dispose:()=>e.delete(Y,r),status:o};return e.set(Y,r,l),l}function te(){if(H?.developers?.simulateOS&&"auto"!==H.developers.simulateOS)return H.developers.simulateOS;const e=navigator.platform.toLowerCase();return e.includes("win")?"win32":e.includes("linux")?"linux":e.includes("mac")?"darwin":void 0}const ie={name:"WindowsToolbar",props:{windowTitle:String,sidebarWidth:{type:String,default:"25%"},hasCloseButton:{type:Boolean,default:!0},hasMaximizeButton:{type:Boolean,default:!0},hasSidebar:Boolean},computed:{isDarkMode(){return this.$vuetify.theme.dark}}},ne={};var se=q(ie,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("v-system-bar",{style:{"padding-right":"0px","padding-left":e.hasSidebar?"calc("+e.sidebarWidth+" + 12px)":void 0},attrs:{height:"30px",color:"toolbar"}},[i("span",[e._v(e._s(e.windowTitle))]),e._v(" "),i("v-spacer"),e._v(" "),i("v-toolbar-items",{staticClass:"px14-font"},[e._t("default"),e._v(" "),e.hasMaximizeButton?i("v-btn",{attrs:{small:"",icon:""},on:{click:function(t){return t.stopPropagation(),e.$emit("toggleFullscreen")}}},[i("v-icon",{attrs:{small:""}},[e._v("mdi-plus")])],1):e._e(),e._v(" "),e.hasCloseButton?i("v-btn",{attrs:{small:"",icon:"",color:"error"},on:{click:function(t){return t.stopPropagation(),e.$emit("closeWindow")}}},[i("v-icon",{attrs:{color:e.isDarkMode?"white":"grey darken-1",small:""}},[e._v("\n\t\t\t\tmdi-close\n\t\t\t")])],1):e._e()],2)],1)}),[],!1,(function(e){for(let t in ne)this[t]=ne[t]}),null,null,null).exports;const ae={props:{color:String,disabled:Boolean},data:()=>({windowHasFocus:!0}),mounted(){window.addEventListener("focus",this.enableButton),window.addEventListener("blur",this.disableButton)},destroyed(){window.removeEventListener("focus",this.enableButton),window.removeEventListener("blur",this.disableButton)},computed:{isDarkMode(){return this.$vuetify.theme.dark}},methods:{disableButton(){this.windowHasFocus=!1},enableButton(){this.windowHasFocus=!0}}},oe={};const re={components:{MacButton:q(ae,(function(){var e=this,t=e.$createElement;return(e._self._c||t)("v-icon",{directives:[{name:"ripple",rawName:"v-ripple",value:!e.disabled,expression:"!disabled"}],staticClass:"mr-1",staticStyle:{"font-size":"15px"},attrs:{color:e.disabled||!e.windowHasFocus?e.isDarkMode?"grey darken-2":"grey":e.color,small:""},nativeOn:{click:function(t){return t.stopPropagation(),e.$emit("click")}}},[e._v("\n\tmdi-checkbox-blank-circle\n")])}),[],!1,(function(e){for(let t in oe)this[t]=oe[t]}),null,null,null).exports},props:{hasCloseButton:{type:Boolean,default:!0},hasMinimizeButton:{type:Boolean,default:!1},hasMaximizeButton:{type:Boolean,default:!0}},computed:{isDarkMode(){return this.$vuetify.theme.dark}}},ce={};var le=q(re,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticStyle:{position:"fixed","z-index":"1"}},[e.hasCloseButton?i("MacButton",{attrs:{color:"error"},on:{click:function(t){return e.$emit("closeWindow")}}}):e._e(),e._v(" "),e.hasCloseButton?i("MacButton",{attrs:{color:"warning",disabled:!e.hasMinimizeButton},on:{click:function(t){return e.$emit("minimizeWindow")}}}):e._e(),e._v(" "),e.hasCloseButton?i("MacButton",{attrs:{color:"success",disabled:!e.hasMaximizeButton},on:{click:function(t){return e.$emit("toggleFullscreen")}}}):e._e()],1)}),[],!1,(function(e){for(let t in ce)this[t]=ce[t]}),null,null,null).exports;const de={name:"MacToolbar",components:{MacWindowControls:le},props:{windowTitle:String,hasSidebar:Boolean,sidebarWidth:{type:String,default:"25%"},hasCloseButton:{type:Boolean,default:!0},hasMinimizeButton:{type:Boolean,default:!1},hasMaximizeButton:{type:Boolean,default:!0}}},he={};const pe={name:"BaseWindow",mixins:[K],components:{WindowsToolbar:se,MacToolbar:q(de,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("v-system-bar",{attrs:{height:"30px",color:"toolbar"}},[i("span",{class:{"window-title":!e.hasSidebar},style:{"padding-left":e.hasSidebar?"calc("+e.sidebarWidth+" + 12px)":void 0}},[e._v(e._s(e.windowTitle))]),e._v(" "),i("div",{staticStyle:{position:"absolute",top:"3px"}},[e.hasSidebar?e._e():i("MacWindowControls",e._g({attrs:{hasCloseButton:e.hasCloseButton,hasMaximizeButton:e.hasMaximizeButton,hasMinimizeButton:e.hasMinimizeButton}},e.$listeners))],1),e._v(" "),i("v-spacer"),e._v(" "),e._t("default")],2)}),[],!1,(function(e){for(let t in he)this[t]=he[t]}),"77f6222e",null,null).exports,MacWindowControls:le},props:{isFullscreen:Boolean,isVisible:Boolean,shouldRender:Boolean,isPersistent:Boolean,sidebarWidth:{type:String,default:"25%"},blurBackground:{type:Boolean,default:!0},hideToolbar:Boolean,windowTitle:String,hasCloseButton:{type:Boolean,default:!0},hasMaximizeButton:{type:Boolean,default:!1},width:{type:Number,default:1600},maxWidth:{type:Number,default:1600},height:{type:Number,default:800},maxHeight:{type:Number,default:800},heightUnset:Boolean,percentageHeight:Number,percentageWidth:Number,maxPercentageHeight:Number,maxPercentageWidth:Number},data(){return{platform:te(),globalWindowWidth:window.innerWidth,globalWindowHeight:window.innerHeight,updateWindowSize:i((function(){this.globalWindowWidth=window.innerWidth,this.globalWindowHeight=window.innerHeight}),200).bind(this)}},mounted(){window.addEventListener("resize",this.updateWindowSize)},destroyed(){window.removeEventListener("resize",this.updateWindowSize)},computed:{isDarkMode(){return this.$vuetify.theme.dark},windowWidth(){return null==this.percentageWidth?this.width:this.globalWindowWidth/100*this.percentageWidth},windowHeight(){return null==this.percentageHeight?this.height:this.globalWindowHeight/100*this.percentageHeight-150},maxWindowWidth(){return null==this.maxPercentageWidth?this.maxWidth:this.globalWindowWidth/100*this.maxPercentageWidth},maxWindowHeight(){return null==this.maxPercentageHeight?this.maxHeight:this.globalWindowHeight/100*this.maxPercentageHeight-150}}},ue={};var me=q(pe,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("v-dialog",{attrs:{value:e.isVisible,persistent:e.isPersistent,"hide-overlay":!e.blurBackground,"max-width":e.isFullscreen?e.maxWindowWidth:e.windowWidth,"content-class":"no-overflow"},on:{input:function(t){return e.$emit("closeWindow")}}},[i("v-card",{attrs:{height:"100%",width:"100%",color:"background",rounded:"darwin"===e.platform?"lg":void 0}},[e.hideToolbar?e._e():i("darwin"===e.platform?"MacToolbar":"WindowsToolbar",{tag:"component",attrs:{windowTitle:e.t(e.windowTitle),hasMaximizeButton:e.hasMaximizeButton,hasCloseButton:e.hasCloseButton,hasSidebar:!!e.$slots.sidebar,sidebarWidth:e.sidebarWidth},on:{toggleFullscreen:function(t){return e.$emit("toggleFullscreen")},closeWindow:function(t){return e.$emit("closeWindow")}}},[e._t("toolbar")],2),e._v(" "),e.$slots.sidebar?i("v-navigation-drawer",{staticStyle:{visibility:"visible",transform:"translateX(0)"},attrs:{absolute:"",width:e.sidebarWidth,permanent:"",clipped:"",stateless:"",color:"expandedSidebar"}},["darwin"===e.platform?i("MacWindowControls",{staticClass:"pl-3 pt-1",staticStyle:{width:"calc(100% - 1px)","background-color":"var(--v-expandedSidebar-base)"},attrs:{hasMaximizeButton:e.hasMaximizeButton,hasCloseButton:e.hasCloseButton},on:{toggleFullscreen:function(t){return e.$emit("toggleFullscreen")},closeWindow:function(t){return e.$emit("closeWindow")}}}):e._e(),e._v(" "),i("v-container",{class:{"pt-8":"darwin"===e.platform}},[e._t("sidebar")],2)],1):e._e(),e._v(" "),i("v-card-text",{staticStyle:{"padding-top":"12px","overflow-y":"auto"},style:{height:e.heightUnset?void 0:(e.isFullscreen?e.maxWindowHeight:e.windowHeight)+"px","max-height":e.maxWindowHeight+"px","padding-top":e.hideToolbar?"24px":"12px","padding-left":e.$slots.sidebar?"calc("+e.sidebarWidth+" + 12px)":void 0}},[e._t("default")],2),e._v(" "),e.$slots.actions?i("v-card-actions",{style:{"padding-left":e.$slots.sidebar?"calc("+e.sidebarWidth+" + 12px)":void 0},attrs:{"background-color":"footer"}},[e._t("actions")],2):e._e()],1)],1)}),[],!1,(function(e){for(let t in ue)this[t]=ue[t]}),null,null,null).exports;const ge={};var fe=q({name:"Information",mixins:[K],components:{BaseWindow:me},props:["currentWindow"],data(){return this.currentWindow.getState()},methods:{close(){this.currentWindow.close(),"function"==typeof this.callback&&this.callback()}}},(function(){var e=this,t=e.$createElement,i=e._self._c||t;return e.shouldRender?i("BaseWindow",{attrs:{windowTitle:e.windowTitle,isVisible:e.isVisible,hasMaximizeButton:!1,isFullscreen:!1,width:440,height:120,hasCloseButton:!1,isPersistent:e.isPersistent},scopedSlots:e._u([{key:"default",fn:function(){return[i("p",{staticClass:"mt-2"},[e._v(e._s(e.t(e.content)))])]},proxy:!0},{key:"actions",fn:function(){return[i("v-spacer"),e._v(" "),i("v-btn",{attrs:{color:"primary"},on:{click:e.close}},[i("v-icon",[e._v("mdi-check")]),e._v(" "),i("span",[e._v(e._s(e.t("windows.common.information.confirm")))])],1)]},proxy:!0}],null,!1,2024708491)}):e._e()}),[],!1,(function(e){for(let t in ge)this[t]=ge[t]}),null,null,null).exports;const we={};var ve=q({name:"Input",mixins:[K],components:{BaseWindow:me},props:["currentWindow"],data(){return this.currentWindow.getState()},methods:{onClose(){this.currentWindow.close(),this.inputValue=""},onConfirm(){this.currentWindow.close(),this.onConfirmCb(this.inputValue+this.expandText),this.inputValue=""}}},(function(){var e=this,t=e.$createElement,i=e._self._c||t;return e.shouldRender?i("BaseWindow",{attrs:{windowTitle:e.windowTitle,isVisible:e.isVisible,hasMaximizeButton:!1,isFullscreen:!1,width:440,height:120},on:{closeWindow:e.onClose},scopedSlots:e._u([{key:"default",fn:function(){return[i("v-row",[i("v-text-field",{attrs:{label:e.label,autofocus:""},nativeOn:{keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.onConfirm(t)}},model:{value:e.inputValue,callback:function(t){e.inputValue=t},expression:"inputValue"}}),e._v(" "),""!==e.expandText?i("p",{staticClass:"expand_text"},[e._v("\n\t\t\t\t"+e._s(e.expandText)+"\n\t\t\t")]):e._e()],1)]},proxy:!0},{key:"actions",fn:function(){return[i("v-spacer"),e._v(" "),i("v-btn",{attrs:{color:"primary",disabled:""===e.inputValue},on:{click:e.onConfirm}},[i("span",[e._v(e._s(e.t("windows.common.input.confirm")))])])]},proxy:!0}],null,!1,3754622360)}):e._e()}),[],!1,(function(e){for(let t in we)this[t]=we[t]}),null,null,null).exports;const be={};var ye=q({name:"Dropdown",mixins:[K],components:{BaseWindow:me},props:["currentWindow"],data(){return this.currentWindow.getState()},methods:{onClose(){this.currentWindow.close()},onConfirm(){this.currentWindow.close(),this.onConfirmCb(this.selectedValue)}}},(function(){var e=this,t=e.$createElement,i=e._self._c||t;return e.shouldRender?i("BaseWindow",{attrs:{windowTitle:e.windowTitle,isVisible:e.isVisible,hasMaximizeButton:!1,isFullscreen:!1,width:440,height:140},on:{closeWindow:e.onClose},scopedSlots:e._u([{key:"default",fn:function(){return[i("v-select",{staticClass:"mt-4",attrs:{autofocus:"",solo:"",items:e.items,"background-color":"background"},model:{value:e.selectedValue,callback:function(t){e.selectedValue=t},expression:"selectedValue"}})]},proxy:!0},{key:"actions",fn:function(){return[i("v-spacer"),e._v(" "),i("v-btn",{attrs:{color:"primary",disabled:""===e.selectedValue},on:{click:e.onConfirm}},[i("span",[e._v(e._s(e.t("windows.common.dropdown.confirm")))])])]},proxy:!0}],null,!1,3645510937)}):e._e()}),[],!1,(function(e){for(let t in be)this[t]=be[t]}),null,null,null).exports;const ke={};var Se=q({name:"Confirm",mixins:[K],components:{BaseWindow:me},props:["currentWindow"],data(){return this.currentWindow.getState()},methods:{onCancel(){this.currentWindow.close(),this.onCancelCb()},onConfirm(){this.currentWindow.close(),this.onConfirmCb()}}},(function(){var e=this,t=e.$createElement,i=e._self._c||t;return e.shouldRender?i("BaseWindow",{attrs:{windowTitle:"windows.common.confirm.title",isVisible:e.isVisible,isPersistent:!0,hasMaximizeButton:!1,isFullscreen:!1,width:440,height:130,hasCloseButton:!1},scopedSlots:e._u([{key:"default",fn:function(){return[i("p",{staticClass:"mt-2"},[e._v(e._s(e.t(e.content)))])]},proxy:!0},{key:"actions",fn:function(){return[i("v-spacer"),e._v(" "),i("v-btn",{on:{click:e.onCancel}},[i("span",[e._v(e._s(e.t(e.cancelText)))])]),e._v(" "),i("v-btn",{attrs:{color:"primary"},on:{click:e.onConfirm}},[i("span",[e._v(e._s(e.t(e.confirmText)))])])]},proxy:!0}],null,!1,595575578)}):e._e()}),[],!1,(function(e){for(let t in ke)this[t]=ke[t]}),null,null,null).exports;function xe(e,t,i){const n=ee(fe,{windowTitle:e,content:t,isPersistent:"function"==typeof i,callback:async()=>{await(i?.()),n.status.setDone?.()}});return n.open(),n}function _e(e,t,i,n,s){const a=ee(Se,{content:e,confirmText:t,cancelText:i,onConfirmCb:n??(()=>{}),onCancelCb:s??(()=>{})});return a.open(),a}class Ce{constructor(e,t){this.taskManager=e,this.taskDetails=t,this.currentStepCount=0}update(e,t){this.currentStepCount=e,t&&(this.taskDetails.totalTaskSteps=t)}createWindow(){this.window=xe(this.name,this.description)}complete(){this.window&&this.window.dispose(),this.dispose()}dispose(){this.taskManager.delete(this)}get name(){return this.taskDetails.name}get description(){return this.taskDetails.description}get totalStepCount(){return this.taskDetails.totalTaskSteps??100}get icon(){return this.taskDetails.icon}get progress(){return Math.round(this.currentStepCount/this.totalStepCount*100)}}const Pe=e.observable([]);class je{create(e){const t=new Ce(this,e);return Pe.push(t),t}delete(e){Pe.splice(Pe.indexOf(e),1)}get hasRunningTasks(){return Pe.length>0}}const Te=e.observable({});const Fe={name:"Sidebar",props:{app:Boolean},components:{SidebarButton:Z},data:()=>({SidebarState:Q,settingsState:H,tasks:Pe,NotificationStore:Te}),computed:{hasVisibleNotifications:()=>Object.values(Te).some((({isVisible:e})=>e)),isSidebarRight(){return this.settingsState&&this.settingsState.appearance&&this.settingsState.appearance.isSidebarRight}}},Ee={};var We=q(Fe,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("v-navigation-drawer",{attrs:{"mini-variant":"","mini-variant-width":"60",stateless:"",value:!0,app:e.app,absolute:"",right:e.isSidebarRight,color:"sidebarNavigation"}},[i("v-list",e._l(e.SidebarState.sidebarElements,(function(e,t){return i("SidebarButton",{key:""+t,attrs:{displayName:e.displayName,icon:e.icon,isLoading:e.isLoading},on:{click:function(t){return e.click()}}})})),1),e._v(" "),e.hasVisibleNotifications?i("v-list",[i("v-divider",{staticClass:"mx-3 mb-6"}),e._v(" "),e._l(e.NotificationStore,(function(t){return[t.isVisible?i("SidebarButton",{key:t.id,attrs:{displayName:t.message,icon:t.icon,color:t.color,iconColor:t.textColor},on:{click:function(e){return t.onClick()}}}):e._e()]}))],2):e._e(),e._v(" "),e.tasks.length>0?i("v-list",[i("v-divider",{staticClass:"mx-3 mb-6"}),e._v(" "),e._l(e.tasks,(function(e,t){return i("SidebarButton",{key:""+t,attrs:{displayName:e.name,icon:e.icon,color:"primary",isLoading:"",alwaysAllowClick:""},on:{click:function(t){return e.createWindow()}}},[i("v-progress-circular",{attrs:{rotate:"-90",size:"24",width:"2",color:"white",value:e.progress}})],1)}))],2):e._e()],1)}),[],!1,(function(e){for(let t in Ee)this[t]=Ee[t]}),null,null,null).exports;const Me={};var Ae=q({name:"WindowAction",components:{},props:{action:Function,icon:String,color:String}},(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("v-btn",{staticClass:"toolbar-btn",attrs:{small:"",icon:"",color:e.color},on:{click:function(t){return t.stopPropagation(),e.action(t)}}},[i("v-icon",{attrs:{small:""}},[e._v(e._s(e.icon))])],1)}),[],!1,(function(e){for(let t in Me)this[t]=Me[t]}),"b0e50f88",null,null).exports;const De={};var Be=q({name:"MenuList",mixins:[K],props:{elements:Object},methods:{onClick(e){e.trigger()}}},(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("v-list",{staticClass:"app-menu",staticStyle:{"border-radius":"0"},attrs:{color:"menu"}},e._l(e.elements,(function(t,n,s){return i("v-menu",{key:"menu."+s+"."+Math.random(),attrs:{"open-on-hover":"","offset-x":"",tile:"","z-index":"11"},scopedSlots:e._u([{key:"activator",fn:function(n){var s=n.on;return[i("v-list-item",e._g({attrs:{dense:""},on:{click:function(i){return e.onClick(t)}}},"category"===t.type?s:void 0),[t.icon?i("v-list-item-icon",[i("v-icon",{attrs:{color:"accent",small:""}},[e._v(e._s(t.icon))])],1):e._e(),e._v(" "),i("v-list-item-content",[i("v-list-item-title",[e._v("\n\t\t\t\t\t\t"+e._s(e.t(t.name))+"\n\t\t\t\t\t")])],1),e._v(" "),i("v-list-item-action",[i("v-list-item-action-text",["category"!==t.type&&t.keyBinding?i("span",[e._v("\n\t\t\t\t\t\t\t"+e._s(t.keyBinding.toStrKeyCode())+"\n\t\t\t\t\t\t")]):e._e(),e._v(" "),"category"===t.type?i("v-icon",{attrs:{small:""}},[e._v("\n\t\t\t\t\t\t\tmdi-chevron-right\n\t\t\t\t\t\t")]):e._e()],1)],1)],1)]}}],null,!0)},[e._v(" "),i("MenuList",{attrs:{elements:t.state}})],1)})),1)}),[],!1,(function(e){for(let t in De)this[t]=De[t]}),null,null,null).exports;const $e={};var Ie=q({name:"MenuButton",mixins:[K],props:{displayName:String,displayIcon:String}},(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("v-btn",{staticClass:"toolbar-btn",attrs:{small:"",text:""},on:{click:function(t){return e.$emit("click",t)}}},[e.displayIcon?i("v-icon",{staticStyle:{"margin-right":"6px","font-style":"normal"},attrs:{color:"accent"}},[e._v("\n\t\t"+e._s(e.displayIcon)+"\n\t")]):e._e(),e._v(" "),i("span",[e._v(" "+e._s(e.t(e.displayName))+" ")])],1)}),[],!1,(function(e){for(let t in $e)this[t]=$e[t]}),"aa152d4c",null,null).exports;const Oe={};var Le=q({name:"MenuActivator",components:{MenuList:Be,MenuButton:Ie},props:{item:Object}},(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("v-menu",{attrs:{"min-width":"260px","offset-y":"",tile:"","z-index":"11"},scopedSlots:e._u([{key:"activator",fn:function(t){var n=t.on;return[i("MenuButton",e._g({attrs:{displayIcon:e.item.icon,displayName:e.item.name}},n))]}}]),model:{value:e.item.isVisible,callback:function(t){e.$set(e.item,"isVisible",t)},expression:"item.isVisible"}},[e._v(" "),e.item.isVisible?i("MenuList",{attrs:{elements:e.item.state}}):e._e()],1)}),[],!1,(function(e){for(let t in Oe)this[t]=Oe[t]}),null,null,null).exports;class Ve{constructor(i){this.config=i,this.id=t(),this.isVisible=this.config.isVisible??!0,e.set(Te,this.id,this),"function"==typeof navigator.setAppBadge&&navigator.setAppBadge(Object.keys(Te).length)}get icon(){return this.config.icon}get message(){return this.config.message}get color(){return this.config.color}get textColor(){return this.config.textColor}onClick(){"function"==typeof this.config.onClick&&this.config.onClick()}onMiddleClick(){this.config.onMiddleClick?.(),this.config.disposeOnMiddleClick&&e.delete(Te,this.id)}addClickHandler(e){this.config.onClick=e}show(){this.isVisible=!0}dispose(){e.delete(Te,this.id),"function"==typeof navigator.setAppBadge&&navigator.setAppBadge(Object.keys(Te).length)}}function Ne(e){return new Ve(e)}function Re(e){const t=e.message;let i=t;t.includes(": ")&&(i=t.split(": ").shift()),i.length>24&&(i=t.length>24?`${t.substr(0,23)}...`:t);const n=Ne({icon:"mdi-alert-circle-outline",message:i,color:"error",disposeOnMiddleClick:!0,onClick:()=>{xe(`ERROR: ${i}`,t),n.dispose()}});return n}window.addEventListener("error",(e=>{Re(e.error??e),fs.ready.once((e=>e.windows.loadingWindow.closeAll()))})),window.onunhandledrejection=e=>{Re(new Error(e.reason)),fs.ready.once((e=>e.windows.loadingWindow.closeAll()))};class ze{constructor({id:e,extensions:t,config:i,tokenProvider:a}){this.disposables=[],this.models=new Map,this.id=e,n.register({id:e,extensions:t}),this.disposables=[n.setLanguageConfiguration(e,i),n.setMonarchTokensProvider(e,a),s.onDidCreateModel(this.onModelAdded.bind(this)),s.onWillDisposeModel(this.onModelRemoved.bind(this)),s.onDidChangeModelLanguage((e=>{this.onModelRemoved(e.model),this.onModelAdded(e.model)}))]}onModelAdded(e){e.getModeId()===this.id&&(this.validate(e),this.models.set(e.uri.toString(),e.onDidChangeContent(i((t=>this.validate(e,t)),500))))}onModelRemoved(e){s.setModelMarkers(e,this.id,[]);const t=e.uri.toString();this.models.get(t)?.dispose(),this.models.delete(t)}dispose(){this.disposables.forEach((e=>e.dispose())),this.disposables=[]}}const Ue={comments:{lineComment:"##"}},He={tokenizer:{root:[[/##.*/,"comment"],[/=|\.|:/,"definition"]]}};class Ke extends ze{constructor(){super({id:"lang",extensions:["lang"],config:Ue,tokenProvider:He})}validate(){}}const qe={comments:{lineComment:"#"},autoClosingPairs:[{open:"(",close:")"},{open:"[",close:"]"},{open:"{",close:"}"},{open:'"',close:'"'}]},Je={brackets:[["(",")","delimiter.parenthesis"],["[","]","delimiter.square"],["{","}","delimiter.curly"]],keywords:["alwaysday","ability","clear","camerashake","clearspawnpoint","clone","difficulty","effect","event","enchant","execute","fill","fog","function","gamemode","gamerule","give","kick","kill","locate","list","me","mobevent","music","particle","playsound","playanimation","ride","reload","replaceitem","say","schedule","score","scoreboard","setblock","setmaxplayers","structure","setworldspawn","spawnpoint","spreadplayers","stopsound","summon","tag","teleport","tell","tellraw","testfor","testforblock","testforblocks","tickingarea","time","title","titleraw","toggledownfall","tp","w","weather","xp"],selectors:["@a","@e","@p","@r","@s"],tokenizer:{root:[[/#.*/,"comment"],[/"[^"]*"|'[^']*'/,"string"],[/\=|\,|\!|%=|\*=|\+=|-=|\/=|<|=|>|<>/,"definition"],[/true|false/,"number"],[/-?([0-9]+(\.[0-9]+)?)|(\~|\^-?([0-9]+(\.[0-9]+)?)?)/,"number"],[/[a-z_$][\w$]*/,{cases:{"@keywords":"keyword","@default":"identifier"}}],[/@[a|p|r|e|s]/,{cases:{"@selectors":"type.identifier","@default":"identifier"}}]]}};class Ge extends ze{constructor(){super({id:"mcfunction",extensions:["mcfunction"],config:qe,tokenProvider:Je})}validate(){}}const Ze={autoClosingPairs:[{open:"(",close:")"},{open:"[",close:"]"},{open:"{",close:"}"},{open:"'",close:"'"}]},Qe={ignoreCase:!0,brackets:[["(",")","delimiter.parenthesis"],["[","]","delimiter.square"],["{","}","delimiter.curly"]],keywords:["return","loop","for_each","break","continue","this"],identifiers:["v","t","c","q","variable","temp","context","query"],tokenizer:{root:[[/'[^']'/,"string"],[/[0-9]+(\.[0-9]+)?/,"number"],[/true|false/,"number"],[/\=|\,|\!|%=|\*=|\+=|-=|\/=|<|=|>|<>/,"definition"],[/[a-z_$][\w$]*/,{cases:{"@keywords":"keyword","@identifiers":"type.identifier","@default":"identifier"}}]]}};class Xe extends ze{constructor(){super({id:"molang",extensions:["molang"],config:Ze,tokenProvider:Qe}),this.molang=new a({})}validate(e){try{this.molang.execute(e.getValue()),s.setModelMarkers(e,this.id,[])}catch(t){const i=this.molang.getParser().getLastConsumed();let{startColumn:n=0,endColumn:a=1/0,startLineNumber:r=0,endLineNumber:c=1/0}=i?.getPosition()??{};s.setModelMarkers(e,this.id,[{startColumn:n+1,endColumn:a+1,startLineNumber:r+1,endLineNumber:c+1,message:t.message,severity:o.Error}])}}}class Ye{constructor(){this.languages=new Set([new Xe,new Ke,new Ge])}}function et(e){e.waiting&&e.waiting.postMessage({type:"SKIP_WAITING"}),navigator.serviceWorker.addEventListener("controllerchange",(()=>{window.location.reload()}))}async function tt(e,t){for await(const i of e.values())"file"===i.kind?await t(i):"directory"===i.kind&&await tt(i,t)}function it(e,t){if(Array.isArray(e)&&Array.isArray(t))return e.concat(t);if(Array.isArray(e))return e.concat([t]);if(Array.isArray(t))return t.concat([e]);if("object"!=typeof t)return t;let i={};for(const n in e)void 0===t[n]?i[n]=e[n]:i[n]=it(e[n],t[n]);for(const n in t)void 0===e[n]&&(i[n]=t[n]);return i}r("/editor/service-worker.js",{ready(){console.log("App is being served from cache by a service worker.\nFor more details, visit https://goo.gl/AFskqB")},registered(){console.log("Service worker has been registered.")},cached(){console.log("Content has been cached for offline use.")},updatefound(){console.log("New content is downloading.")},updated(e){console.log("New content is available; please refresh."),"waiting"===fs.fileSystemSetup.status?et(e):Ne({icon:"mdi-update",color:"primary",message:"sidebar.notifications.updateAvailable.message",textColor:"white",onClick:()=>et(e)})},offline(){console.log("No internet connection found. App is running in offline mode.")},error(e){console.error("Error during service worker registration:",e)}});const nt={id:"bridge.default.dark",name:"Default Dark",colorScheme:"dark",colors:{text:"#fff",primary:"#1778D2",secondary:"#1778D2",accent:"#1778D2",error:"#ff5252",info:"#2196f3",warning:"#fb8c00",success:"#4caf50",background:"#121212",sidebarNavigation:"#1F1F1F",expandedSidebar:"#1F1F1F",sidebarSelection:"#151515",menu:"#252525",footer:"#111111",tooltip:"#1F1F1F",toolbar:"#000000",tabActive:"#121212",tabInactive:"#1F1F1F",lineHighlightBackground:"#1F1F1F"},highlighter:{type:{color:"#a6e22e"},keyword:{color:"#f92672"},definition:{color:"#fd971f"},atom:{color:"#ae81ff"},number:{color:"#ae81ff"},string:{color:"#e6db74"},variable:{color:"#9effff"},variable_strong:{color:"#9effff"},meta:{color:"white"},comment:{color:"#75715e"}}},st={id:"bridge.default.light",name:"Default Light",colorScheme:"light",colors:{text:"#000",primary:"#1778D2",secondary:"#1778D2",accent:"#1778D2",error:"#ff5252",info:"#2196f3",warning:"#fb8c00",success:"#4caf50",background:"#fafafa",sidebarNavigation:"#FFFFFF",expandedSidebar:"#FFFFFF",sidebarSelection:"#ececec",menu:"#fff",tooltip:"#424242",toolbar:"#e0e0e0",footer:"#f5f5f5",tabActive:"#fafafa",tabInactive:"#ececec",lineHighlightBackground:"#e0e0e0"},highlighter:{property:{color:"black"},keyword:{color:"#5A5CAD"},definition:{textDecoration:"underline"},atom:{color:"#6C8CD5"},number:{color:"#164"},string:{color:"red"},variable:{color:"black"},variable_strong:{color:"black"},meta:{color:"yellow"},comment:{color:"#0080FF"}}};class at{constructor(e){this.theme=e}apply(){s.defineTheme("bridgeMonacoDefault",{base:"light"===this.theme.colorScheme?"vs":"vs-dark",inherit:!1,colors:{"editor.background":this.convertColor(this.theme.getColor("background")),"editor.lineHighlightBackground":this.convertColor(this.theme.getColor("lineHighlightBackground")),"editorWidget.background":this.convertColor(this.theme.getColor("background")),"editorWidget.border":this.convertColor(this.theme.getColor("sidebarNavigation")),"pickerGroup.background":this.convertColor(this.theme.getColor("background")),"pickerGroup.border":this.convertColor(this.theme.getColor("sidebarNavigation")),"badge.background":this.convertColor(this.theme.getColor("background")),"input.background":this.convertColor(this.theme.getColor("sidebarNavigation")),"input.border":this.convertColor(this.theme.getColor("menu")),"inputOption.activeBorder":this.convertColor(this.theme.getColor("primary")),focusBorder:this.convertColor(this.theme.getColor("primary")),"list.focusBackground":this.convertColor(this.theme.getColor("menu")),"list.hoverBackground":this.convertColor(this.theme.getColor("sidebarNavigation")),contrastBorder:this.convertColor(this.theme.getColor("sidebarNavigation")),"peekViewTitle.background":this.convertColor(this.theme.getColor("background")),"peekView.border":this.convertColor(this.theme.getColor("primary")),"peekViewResult.background":this.convertColor(this.theme.getColor("sidebarNavigation")),"peekViewResult.selectionBackground":this.convertColor(this.theme.getColor("menu")),"peekViewEditor.background":this.convertColor(this.theme.getColor("background")),"peekViewEditor.matchHighlightBackground":this.convertColor(this.theme.getColor("menu")),...this.theme.getMonacoDefinition()},rules:[{background:this.convertColor(this.theme.getColor("background")),foreground:this.convertColor(this.theme.getColor("text"))},...Object.entries(this.theme.getHighlighterDefinition()).map((([e,{color:t,textDecoration:i,isItalic:n}])=>({token:e,foreground:this.convertColor(t),fontStyle:`${n?"italic ":""}${i}`}))).filter((({foreground:e})=>void 0!==e))]})}convertColor(e){return e?e.startsWith("#")?4===e.length?`#${e[1]}${e[1]}${e[2]}${e[2]}${e[3]}${e[3]}`:e:c.keyword.hex(e):e}}class ot{constructor(e,t){this.themeDefinition=e,this.isGlobal=t,this.id=e.id,this.name=e.name,this.colorScheme=e.colorScheme??"dark",this.colorMap=new Map(Object.entries(e.colors)),this.monacoDef=e.monaco,this.highlighterDef=e.highlighter,this.monacoSubTheme=new at(this)}apply(t,i){e.set(i.theme.themes,this.colorScheme,Object.fromEntries(this.colorMap.entries())),e.set(i.theme,"dark","dark"===this.colorScheme),t.setThemeColor(this.colorMap.get("toolbar")??"red"),this.monacoSubTheme.apply()}getColor(e){return this.colorMap.get(e)??"red"}getMonacoDefinition(){return this.monacoDef??{}}getHighlighterDefinition(){return this.highlighterDef??{}}getThemeDefinition(){return this.themeDefinition}}class rt extends L{constructor(e){super(),this.vuetify=e,this.themeMap=new Map,this.themeColorTag=document.querySelector("meta[name='theme-color']"),this.currentTheme="bridge.default.dark",this.colorScheme=new V;const t=window.matchMedia("(prefers-color-scheme: light)");this.mode=t.matches?"light":"dark",t.addEventListener("change",(e=>{this.colorScheme.dispatch(e.matches?"light":"dark"),this.mode=e.matches?"light":"dark",this.updateTheme()})),this.themeColorTag||(this.themeColorTag=document.createElement("meta"),document.head.appendChild(this.themeColorTag)),this.themeColorTag.setAttribute("name","theme-color"),this.themeColorTag.id="theme-color-tag",this.addTheme(nt,!0),this.addTheme(st,!0),this.applyTheme(this.themeMap.get("bridge.default.dark"))}applyTheme(e){e?.apply(this,this.vuetify)}async updateTheme(){const e=await fs.getApp();let t=H?.appearance?.colorScheme;t&&"auto"!==t||(t=this.mode);const i=await e.projectConfig.get(`${t}Theme`)??"bridge.noSelection",n=H?.appearance?.[`${t}Theme`]??`bridge.default.${t}`,s="bridge.noSelection"!==i?i:n,a=this.themeMap.get("bridge.noSelection"!==i?i:n),o=this.themeMap.get(`bridge.default.${t}`);this.currentTheme!==(a?s:`bridge.default.${t}`)&&(this.currentTheme=a?s:`bridge.default.${t}`,this.applyTheme(a??o),this.dispatch(a?.colorScheme??"dark"))}async loadDefaultThemes(e){try{await tt(await e.fileSystem.getDirectoryHandle("data/packages/themes"),(e=>this.loadTheme(e)))}catch{}this.updateTheme()}async loadTheme(e,t=!0,i){const n=await e.getFile();let s;try{s=l.parse(await n.text())}catch{throw new Error(`Failed to load theme "${n.name}"`)}const a=this.addTheme(s,t);i&&i.push(a)}getThemes(e,t){const i=[];for(const[n,s]of this.themeMap)e&&s.colorScheme!==e||!s.isGlobal&&t!==s.isGlobal||i.push(s);return i}setThemeColor(e){this.themeColorTag.setAttribute("content",e)}addTheme(e,t){const i=this.themeMap.get(`bridge.default.${e.colorScheme??"dark"}`);return this.themeMap.set(e.id,new ot(it(i?.getThemeDefinition()??{},e),t)),this.updateTheme(),{dispose:()=>this.themeMap.delete(e.id)}}}const ct={};var lt=q({name:"SelectProjectFolderWindow",mixins:[K],components:{BaseWindow:me},props:["currentWindow"],data(){return this.currentWindow.getState()},methods:{close(){this.currentWindow.close()},async selectFolder(){fs.fileSystemSetup.setStatus("userInteracted");try{this.callback(await window.showDirectoryPicker({mode:"readwrite"})),this.close()}catch(e){console.error(e)}}}},(function(){var e=this,t=e.$createElement,i=e._self._c||t;return e.shouldRender?i("BaseWindow",{attrs:{windowTitle:"windows.selectFolder.title",isVisible:e.isVisible,hasMaximizeButton:!1,hasCloseButton:!1,isFullscreen:!1,isPersistent:!0,width:420,height:100},on:{closeWindow:e.close},scopedSlots:e._u([{key:"default",fn:function(){return[i("p",[e._v("\n\t\t\t"+e._s(e.t("windows.selectFolder.content"))+"\n\t\t")])]},proxy:!0},{key:"actions",fn:function(){return[i("v-spacer"),e._v(" "),i("v-btn",{attrs:{color:"primary"},on:{click:e.selectFolder}},[i("v-icon",{staticClass:"pr-2"},[e._v("mdi-folder-outline")]),e._v(" "),i("span",[e._v(e._s(e.t("windows.selectFolder.select")))])],1)]},proxy:!0}],null,!1,55727943)}):e._e()}),[],!1,(function(e){for(let t in ct)this[t]=ct[t]}),null,null,null).exports;let dt;const ht={};var pt=q({name:"OldSidebarCompatWindow",components:{BaseWindow:me},data(){return this.currentWindow.getState()},props:["currentWindow"],methods:{onClose(){this.currentWindow.close()}}},(function(){var e=this,t=e.$createElement,i=e._self._c||t;return e.shouldRender?i("BaseWindow",{attrs:{windowTitle:e.sidebar.displayName,isVisible:e.isVisible,hasMaximizeButton:!1,isFullscreen:!1,percentageWidth:50,percentageHeight:80},on:{closeWindow:e.onClose}},[i(e.sidebar.component,{tag:"component"})],1):e._e()}),[],!1,(function(e){for(let t in ht)this[t]=ht[t]}),null,null,null).exports;function ut(e){return new mt(e)}class mt{constructor(i){this.config=i,this.sidebarUUID=t(),this.isLoading=!1,e.set(Q.sidebarElements,this.sidebarUUID,this)}get icon(){return this.config.icon}get uuid(){return this.sidebarUUID}get displayName(){return this.config.displayName}get component(){return this.config.component}dispose(){e.delete(Q.sidebarElements,this.sidebarUUID)}async click(){this.isLoading=!0,"function"==typeof this.config.onClick?await this.config.onClick():this.config.component&&function(e){const t=ee(pt,{sidebar:e});t.open()}(this),this.isLoading=!1}}class gt extends L{constructor(i,n){super(),this.icon=i,this.name=n,this.id=t(),this.type="category",this.isVisible=!1,this.state=e.observable({}),this.disposables={}}addItem(t){return e.set(this.state,t.id,t),this.disposables[t.id]=t.on((()=>this.trigger())),this}disposeItem(t){e.delete(this.state,t.id),this.disposables[t.id]?.dispose(),this.disposables[t.id]=void 0}trigger(){this.isVisible=!1,this.dispatch()}dispose(){fs.toolbar.disposeCategory(this)}}async function ft(e){!function(e){const t=new gt("mdi-file-outline","toolbar.file.name");t.addItem(e.actionManager.create({id:"bridge.action.newProject",icon:"mdi-folder-outline",name:"actions.newProject.name",description:"actions.newProject.description",onTrigger:()=>e.windows.createProject.open()})),t.addItem(e.actionManager.create({id:"bridge.action.newFile",icon:"mdi-file-plus-outline",name:"actions.newFile.name",description:"actions.newFile.description",keyBinding:"Ctrl + N",onTrigger:()=>e.windows.createPreset.open()})),t.addItem(e.actionManager.create({id:"bridge.action.openFile",icon:"mdi-file-upload-outline",name:"actions.openFile.name",description:"actions.openFile.description",keyBinding:"Ctrl + O",onTrigger:()=>e.windows.filePicker.open()})),t.addItem(e.actionManager.create({icon:"mdi-content-save-outline",name:"actions.saveFile.name",description:"actions.saveFile.description",keyBinding:"Ctrl + S",onTrigger:()=>fs.ready.once((e=>e.tabSystem?.save()))})),t.addItem(e.actionManager.create({icon:"mdi-file-cancel-outline",name:"actions.closeFile.name",description:"actions.closeFile.description",keyBinding:"Ctrl + W",onTrigger:()=>fs.ready.once((e=>e.tabSystem?.close()))})),t.addItem(new gt("mdi-palette-outline","toolbar.file.preferences.name").addItem(e.actionManager.create({id:"bridge.action.openSettings",icon:"mdi-cog-outline",name:"actions.settings.name",description:"actions.settings.description",keyBinding:"Ctrl + ,",onTrigger:()=>e.windows.settings.open()})).addItem(e.actionManager.create({icon:"mdi-puzzle-outline",name:"actions.extensions.name",description:"actions.extensions.description",onTrigger:()=>e.windows.extensionStore.open()}))),fs.toolbar.addCategory(t)}(e),function(e){const t=new gt("mdi-pencil-outline","toolbar.edit.name");t.addItem(e.actionManager.create({icon:"mdi-content-copy",name:"actions.copy.name",description:"actions.copy.description",keyBinding:"Ctrl + C",onTrigger:()=>e.tabSystem?.selectedTab?.copy()})),t.addItem(e.actionManager.create({icon:"mdi-content-cut",name:"actions.cut.name",description:"actions.cut.description",keyBinding:"Ctrl + X",onTrigger:()=>e.tabSystem?.selectedTab?.cut()})),t.addItem(e.actionManager.create({icon:"mdi-content-paste",name:"actions.paste.name",description:"actions.paste.description",keyBinding:"Ctrl + V",onTrigger:()=>e.tabSystem?.selectedTab?.paste()})),fs.toolbar.addCategory(t)}(e),function(e){const t=new gt("mdi-wrench-outline","toolbar.tools.name");t.addItem(e.actionManager.create({icon:"mdi-book-open-page-variant",name:"actions.docs.name",description:"actions.docs.description",onTrigger:()=>fs.createNativeWindow("https://bedrock.dev","DocWindow")})),fs.toolbar.addCategory(t)}(e),function(e){const t=new gt("mdi-help","toolbar.help.name");t.addItem(e.actionManager.create({name:"actions.releases.name",icon:"mdi-alert-decagram",description:"actions.releases.description",onTrigger:()=>window.open("https://github.com/bridge-core/editor/releases","_blank")})),t.addItem(e.actionManager.create({name:"actions.bugReports.name",icon:"mdi-bug-outline",description:"actions.bugReports.description",onTrigger:()=>window.open("https://github.com/bridge-core/editor/issues/new/choose","_blank")})),t.addItem(e.actionManager.create({name:"actions.pluginAPI.name",icon:"mdi-puzzle-outline",description:"actions.pluginAPI.description",onTrigger:()=>fs.createNativeWindow("https://bridge-core.github.io/plugin-docs/","_blank")})),t.addItem(e.actionManager.create({name:"actions.gettingStarted.name",icon:"mdi-help-circle-outline",description:"actions.gettingStarted.description",onTrigger:()=>fs.createNativeWindow("https://bridge-core.github.io/editor-docs/getting-started/","_blank")})),t.addItem(e.actionManager.create({name:"actions.faq.name",icon:"mdi-frequently-asked-questions",description:"actions.faq.description",onTrigger:()=>fs.createNativeWindow("https://bridge-core.github.io/editor-docs/faq/","_blank")})),fs.toolbar.addCategory(t)}(e)}class wt{constructor(e){this.vuetify=e}translate(e){const t=e;e?.startsWith("$vuetify.")||(e=`$vuetify.${e}`);const i=this.vuetify.lang.t(e);return i===e?t:i}addLanguage(t,i,n=!1){const s=this.vuetify.lang;if(t in s.locales&&!n)throw new Error(`Language key "${t}" already exists!`);return e.set(s.locales,t,i),{dispose:()=>{s.current===t&&(s.current=s.defaultLocale),e.delete(s.locales,t)}}}selectLanguage(e){const t=this.vuetify.lang;if(!(e in t.locales))throw new Error(`Undefined language: "${e}"`);t.current=e}getLanguages(){const e=this.vuetify.lang.locales;return Object.entries(e).filter((([e,t])=>void 0!==t.languageName)).map((([e,t])=>[e,t.languageName]))}getCurrentLanguage(){return this.vuetify.lang.current}}const vt={};const bt=ee(q({name:"Discord",mixins:[K],components:{BaseWindow:me},data:()=>bt.getState(),methods:{close:()=>bt.close(),openDiscord(){window.open("https://discord.gg/jj2PmqU","_blank")}}},(function(){var e=this,t=e.$createElement,i=e._self._c||t;return e.shouldRender?i("BaseWindow",{attrs:{windowTitle:"windows.discord.title",isVisible:e.isVisible,hasMaximizeButton:!1,isFullscreen:!1,width:420,height:80},on:{closeWindow:e.close},scopedSlots:e._u([{key:"default",fn:function(){return[i("p",[e._v(e._s(e.t("windows.discord.content")))])]},proxy:!0},{key:"actions",fn:function(){return[i("v-spacer"),e._v(" "),i("v-btn",{on:{click:e.close}},[i("span",[e._v(e._s(e.t("windows.discord.later")))])]),e._v(" "),i("v-btn",{attrs:{color:"#7289DA"},on:{click:e.openDiscord}},[i("v-icon",{attrs:{color:"white"}},[e._v("mdi-discord")]),e._v(" "),i("span",{staticClass:"white--text"},[e._v(e._s(e.t("windows.discord.join")))])],1)]},proxy:!0}],null,!1,800371676)}):e._e()}),[],!1,(function(e){for(let t in vt)this[t]=vt[t]}),null,null,null).exports);var yt;!function(e){let i=[],n=new Map;function s(){return i.concat([...n.values()])}function a(e){for(const t of s()){if("string"==typeof t.matcher&&p(e,t.matcher))return t;for(const i of t.matcher)if(p(e,i))return t}}e.ready=new V,e.all=s,e.setup=async function(t){i.length>0||(i=await t.readJSON("data/packages/packDefinitions.json"),e.ready.dispatch())},e.get=a,e.getId=function(e){return a(e)?.id??"unknown"},e.addExtensionPackType=function(e){const i=t();return n.set(i,e),{dispose:()=>n.delete(i)}}}(yt||(yt={}));class kt extends V{constructor(e,i=!1,n=!1){super(),this.component=e,this.disposeOnClose=i,this.keepAlive=n,this.windowUUID=t(),this.isVisible=!1,this.shouldRender=!1}defineWindow(){e.set(Y,this.windowUUID,this)}onClose(){}close(e){this.onClose(),this.isVisible=!1,this.dispatch(e),this.keepAlive||setTimeout((()=>{this.shouldRender=!1,this.disposeOnClose&&this.dispose()}),600)}open(){this.shouldRender=!0,this.isVisible=!0,this.resetSignal()}dispose(){e.delete(Y,this.windowUUID)}}const St={};var xt=q({name:"Discord",mixins:[K],components:{BaseWindow:me},props:["currentWindow"],data(){return this.currentWindow},methods:{onClose(){this.currentWindow.close()}}},(function(){var e=this,t=e.$createElement,i=e._self._c||t;return e.shouldRender?i("BaseWindow",{attrs:{windowTitle:"windows.browserUnsupported.title",isVisible:e.isVisible,isPersistent:!0,hasCloseButton:!1,width:420,height:240},on:{closeWindow:e.onClose},scopedSlots:e._u([{key:"default",fn:function(){return[i("div",{staticClass:"text-center"},[i("v-icon",{staticStyle:{"font-size":"8em"},attrs:{color:"error"}},[e._v("\n\t\t\t\tmdi-alert-octagon-outline\n\t\t\t")]),e._v(" "),i("p",[e._v(e._s(e.t("windows.browserUnsupported.description")))])],1)]},proxy:!0}],null,!1,3309414609)}):e._e()}),[],!1,(function(e){for(let t in St)this[t]=St[t]}),null,null,null).exports;class _t extends kt{constructor(){super(xt),this.defineWindow()}}class Ct{constructor({items:e,text:t,isOpen:i}){this.type="category",this.text=t,this.items=e,this.isOpen=i??!0}addItem(e){this.items.push(e)}removeItems(){this.items=[]}getText(){return this.text}getSearchText(){return this.text.toLowerCase()}getItems(){return this.items}setOpen(e){this.isOpen=e}getCurrentElement(e){return this.items.find((({id:t})=>t===e))}hasFilterMatches(e){return void 0!==this.items.find((t=>t.getSearchText().includes(e)))}filtered(t){return 0===t.length?this:e.observable(new Ct({items:this.items.filter((e=>e.getSearchText().includes(t))),text:this.text,isOpen:this.isOpen}))}}class Pt{constructor({id:e,text:t,icon:i,color:n}){this.type="item",this.id=e,this.text=t,this.icon=i,this.color=n}getText(){return this.text}getSearchText(){return this.text.toLowerCase()}}class jt{constructor(e){this._elements=e,this._filter="",this.state={},this.selected=this.findDefaultSelected()}addElement(e,t){"item"===e.type&&t&&(this.state[e.id]=t),this._elements.push(e),1===this._elements.length&&this.setDefaultSelected()}removeElements(){this._elements=[]}get filter(){return this._filter.toLowerCase()}get elements(){const e=this.sortSidebar(this._elements.filter((e=>"item"===e.type?e.getSearchText().includes(this.filter):e.hasFilterMatches(this.filter))).map((e=>"item"===e.type?e:e.filtered(this.filter))));if(1===e.length){const t=e[0];"category"===t.type&&1===t.getItems().length&&(t.setOpen(!0),this.setDefaultSelected(t.getItems()[0].id))}return e}get rawElements(){return this._elements}get currentElement(){if(!this.selected)return{};for(const e of this._elements){if("item"===e.type){if(e.id===this.selected)return e;continue}const t=e.getCurrentElement(this.selected);if(t)return t}return{}}get currentState(){return this.selected?this.state[this.selected]??{}:{}}getState(e){return this.state[e]??{}}setState(t,i){e.set(this.state,t,i)}sortSidebar(e){return e.sort(((e,t)=>e.type!==t.type?e.type.localeCompare(t.type):e.getSearchText().localeCompare(t.getSearchText())))}findDefaultSelected(){for(const e of this.elements){if("category"===e.type&&e.getItems().length>0)return e.getItems()[0].id;if("item"===e.type)return e.id}}setDefaultSelected(e){e?this.selected=e:this.selected||(this.selected=this.findDefaultSelected())}resetSelected(){this.selected=void 0}clearFilter(){this._filter=""}get selected(){return this._selected}set selected(e){this._selected=e}}const Tt={name:"SidebarItem",props:{isSelected:Boolean,text:String,icon:String,color:String}},Ft={};var Et=q(Tt,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{directives:[{name:"ripple",rawName:"v-ripple",value:!e.isSelected,expression:"!isSelected"}],staticClass:"pa-1 rounded-lg category d-flex",class:{selected:e.isSelected},on:{click:function(t){return e.$emit("click")}}},[i("v-icon",{staticClass:"pr-1",staticStyle:{"font-size":"22px"},attrs:{color:e.color}},[e._v("\n\t\t"+e._s(e.icon)+"\n\t")]),e._v(" "),i("span",[e._v(e._s(e.text))])],1)}),[],!1,(function(e){for(let t in Ft)this[t]=Ft[t]}),"74da6422",null,null).exports;const Wt={name:"SidebarGroup",mixins:[K],components:{SidebarItem:Et},props:{text:String,isOpen:Boolean,items:Array,selected:String}},Mt={};var At=q(Wt,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("details",{attrs:{open:e.isOpen}},[i("summary",{directives:[{name:"ripple",rawName:"v-ripple"}],staticClass:"d-flex rounded-lg",on:{click:function(t){return t.preventDefault(),e.$emit("toggleOpen")}}},[i("h2",{staticClass:"d-inline"},[e._v(e._s(e.t(e.text)))]),e._v(" "),i("v-spacer"),e._v(" "),i("v-icon",{attrs:{color:"primary"}},[e._v("\n\t\t\t"+e._s(e.isOpen?"mdi-chevron-down":"mdi-chevron-right")+"\n\t\t")])],1),e._v(" "),e._l(e.items,(function(t,n){var s=t.text,a=t.icon,o=t.color,r=t.id;return i("SidebarItem",{key:s+"."+n,attrs:{icon:a,color:o,text:s,isSelected:e.selected===r},on:{click:function(t){return e.$emit("click",r)}}})}))],2)}),[],!1,(function(e){for(let t in Mt)this[t]=Mt[t]}),"b8de0ae4",null,null).exports;const Dt={};var Bt=q({inheritAttrs:!1,components:{BaseWindow:me,SidebarItem:Et,SidebarGroup:At},props:{sidebarItems:Array,value:{type:String,default:void 0}},computed:{selected(){return this.value}},methods:{onSidebarChanged(e){this.$emit("input",e)},toggleOpenCategory(e){e.isOpen=!e.isOpen}}},(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("BaseWindow",e._g(e._b({scopedSlots:e._u([{key:"toolbar",fn:function(){return[e._t("toolbar",null,{selectedTab:e.selected})]},proxy:!0},{key:"sidebar",fn:function(){return[e._t("sidebar",null,{selectedSidebar:e.selected}),e._v(" "),e._l(e.sidebarItems,(function(t,n){return["item"===t.type?i("SidebarItem",{key:t.text+"."+n,attrs:{icon:t.icon,color:t.color,text:t.text,isSelected:e.selected===t.id},on:{click:function(i){return e.onSidebarChanged(t.id)}}}):i("SidebarGroup",{key:t.text+"."+n+"."+t.isOpen,attrs:{isOpen:t.isOpen,items:t.items,text:t.text,selected:e.selected},on:{toggleOpen:function(i){return e.toggleOpenCategory(t)},click:e.onSidebarChanged}})]}))]},proxy:!0},{key:"default",fn:function(){return[e._t("default",null,{selectedSidebar:e.selected})]},proxy:!0},{key:"actions",fn:function(){return[e._t("actions",null,{selectedSidebar:e.selected})]},proxy:!0}],null,!0)},"BaseWindow",e.$attrs,!1),e.$listeners))}),[],!1,(function(e){for(let t in Dt)this[t]=Dt[t]}),null,null,null).exports;const $t={};var It=q({name:"ExtensionCard",props:{extension:Object},computed:{tags(){return[{icon:"mdi-account-outline",color:"primary",text:this.extension.author,type:"search"},{icon:"mdi-code-braces",text:this.extension.displayVersion,type:"search"}].concat(this.extension.tags)}}},(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"body-1 pa-4 mb-2 rounded-lg card"},[i("div",{staticClass:"d-flex align-center"},[e.extension.icon?i("v-icon",{staticClass:"mr-1",attrs:{color:"accent"}},[e._v("\n\t\t\t"+e._s(e.extension.icon)+"\n\t\t")]):e._e(),e._v(" "),i("h3",[e._v(e._s(e.extension.name))]),e._v(" "),i("v-spacer"),e._v(" "),e.extension.isInstalled?e.extension.isUpdateAvailable?i("v-btn",{staticClass:"rounded-lg elevation-0",attrs:{loading:e.extension.isLoading,color:"primary",small:""},on:{click:function(t){return e.extension.update()}}},[i("v-icon",{staticClass:"mr-1",attrs:{small:""}},[e._v("mdi-sync")]),e._v("\n\t\t\tUpdate\n\t\t")],1):i("v-tooltip",{attrs:{color:"success",right:""},scopedSlots:e._u([{key:"activator",fn:function(t){var n=t.on;return[i("v-icon",e._g({attrs:{color:"success"}},n),[e._v("mdi-check")])]}}])},[e._v(" "),i("span",[e._v("Extension Active")])]):i("v-btn",{staticClass:"rounded-lg elevation-0",attrs:{loading:e.extension.isLoading,color:"primary",small:""},on:{click:function(t){return e.extension.download()}}},[i("v-icon",{staticClass:"mr-1",attrs:{small:""}},[e._v("mdi-download")]),e._v("\n\t\t\tDownload\n\t\t")],1),e._v(" "),e.extension.isInstalled?i("v-tooltip",{attrs:{color:"tooltip",right:""},scopedSlots:e._u([{key:"activator",fn:function(t){var n=t.on;return[i("v-btn",e._g({attrs:{small:"",icon:""}},n),[i("v-icon",[e._v("mdi-dots-vertical")])],1)]}}],null,!1,1851642333)},[e._v(" "),i("span",[e._v("More...")])]):e._e()],1),e._v(" "),i("div",{staticClass:"d-flex mb-4"},e._l(e.tags,(function(t){return i("v-chip",{key:t.text,staticClass:"mr-2",attrs:{color:t.color,"text-color":"white",small:""},on:{click:function(i){"search"===t.type?e.$emit("search",t.text):e.$emit("select",t.text.toLowerCase())}}},[i("v-icon",{staticClass:"mr-1"},[e._v(e._s(t.icon))]),e._v("\n\t\t\t"+e._s(t.text)+"\n\t\t")],1)})),1),e._v(" "),i("span",[e._v(e._s(e.extension.description))])])}),[],!1,(function(e){for(let t in $t)this[t]=$t[t]}),"cf08b2d8",null,null).exports;const Ot={};var Lt=q({name:"CreatePresetWindow",mixins:[K],components:{SidebarWindow:Bt,ExtensionCard:It},props:["currentWindow"],data(){return this.currentWindow},computed:{currentExtensions(){if(""!==this.sidebar._filter){const e=this.sidebar._filter.toLowerCase();return this.extensions.filter((t=>t.name.toLowerCase().includes(e)||t.description.toLowerCase().includes(e)||t.author.toLowerCase().includes(e)||t.version.includes(e)||t.tags.some((t=>t.text.toLowerCase().includes(e)))))}return this.sidebar.currentState}},methods:{onClose(){this.currentWindow.close()}}},(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("SidebarWindow",{attrs:{windowTitle:"windows.extensionStore.title",isVisible:e.isVisible,hasMaximizeButton:!1,isFullscreen:!1,percentageWidth:80,percentageHeight:80,sidebarItems:e.sidebar.elements},on:{closeWindow:e.onClose},scopedSlots:e._u([{key:"sidebar",fn:function(){return[i("v-text-field",{staticClass:"pt-2",attrs:{"prepend-inner-icon":"mdi-magnify",label:e.t("windows.extensionStore.searchExtensions"),autocomplete:"off",autofocus:"",outlined:"",dense:""},model:{value:e.sidebar._filter,callback:function(t){e.$set(e.sidebar,"_filter",t)},expression:"sidebar._filter"}})]},proxy:!0},{key:"default",fn:function(){return[0===e.currentExtensions.length?i("div",[e._v("\n\t\t\tNo plugins match your search...\n\t\t")]):e._l(e.currentExtensions,(function(t){return i("ExtensionCard",{key:t.id+"."+t.isInstalled+"."+t.isUpdateAvailable,attrs:{extension:t},on:{search:function(t){return e.sidebar._filter=t},select:function(t){return e.$data.selectedSidebar=t}}})}))]},proxy:!0}]),model:{value:e.$data.selectedSidebar,callback:function(t){e.$set(e.$data,"selectedSidebar",t)},expression:"$data.selectedSidebar"}})}),[],!1,(function(e){for(let t in Ot)this[t]=Ot[t]}),null,null,null).exports;const Vt={props:{action:Object,hideTriggerButton:Boolean,dense:Boolean},mixins:[K],methods:{onTrigger(){this.action.trigger()}}},Nt={};var Rt=q(Vt,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"body-1 pa-4 mb-2 rounded-lg control-bg"},[i("div",{staticClass:"d-flex align-center"},[e.action.icon?i("v-icon",{staticClass:"mr-1",attrs:{color:"accent"}},[e._v("\n\t\t\t"+e._s(e.action.icon)+"\n\t\t")]):e._e(),e._v(" "),i("h3",[e._v(e._s(e.t(e.action.name)))]),e._v(" "),i("v-spacer"),e._v(" "),e.action.keyBinding?i("span",[e._v("\n\t\t\t"+e._s(e.action.keyBinding.toStrKeyCode())+"\n\t\t")]):e._e(),e._v(" "),e.hideTriggerButton?e._e():i("v-btn",{attrs:{color:"primary",small:"",icon:""}},[i("v-icon",{on:{click:e.onTrigger}},[e._v("mdi-play")])],1)],1),e._v(" "),e.dense?e._e():i("span",[e._v(e._s(e.t(e.action.description)))])])}),[],!1,(function(e){for(let t in Nt)this[t]=Nt[t]}),"2a451340",null,null).exports;const zt={};var Ut=q({name:"InformedChoiceWindow",mixins:[K],components:{BaseWindow:me,ActionViewer:Rt},props:["currentWindow"],data(){return this.currentWindow},methods:{onClose(){this.currentWindow.close()},onClick(e){e.trigger(),this.currentWindow.close()}}},(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("BaseWindow",{attrs:{windowTitle:e.title,isVisible:e.isVisible,hasCloseButton:!e.opts.isPersistent,hasMaximizeButton:!1,percentageWidth:50,maxPercentageHeight:80,isPersistent:e.opts.isPersistent,heightUnset:""},on:{closeWindow:e.onClose},scopedSlots:e._u([{key:"default",fn:function(){return e._l(e.$data._actionManager.state,(function(t,n){return i("ActionViewer",{directives:[{name:"ripple",rawName:"v-ripple"}],key:n,staticStyle:{cursor:"pointer"},attrs:{action:t,hideTriggerButton:!0},nativeOn:{click:function(i){return e.onClick(t)}}})}))},proxy:!0}])})}),[],!1,(function(e){for(let t in zt)this[t]=zt[t]}),null,null,null).exports;function Ht({key:e,ctrlKey:t,altKey:i,shiftKey:n,metaKey:s}){let a=e.toUpperCase();return n&&(a="Shift + "+a),i&&(a="Alt + "+a),s&&(a="darwin"===te()?"Ctrl + "+a:"Meta + "+a),t&&(a="darwin"===te()?" + "+a:"Ctrl + "+a),a}class Kt extends L{constructor(e,t){super(),this.keyBindingManager=e,this.config=t}static fromStrKeyCode(e,t,i=!1){return e.create(function(e,t=!1){const i=e.toLowerCase().split(" + "),n={key:""};return i.forEach((e=>{""===e||("darwin"!==te()||t)&&"ctrl"===e?n.ctrlKey=!0:"alt"===e?n.altKey=!0:"shift"===e?n.shiftKey=!0:"meta"===e?n.metaKey=!0:n.key=e})),n}(t,i))}toStrKeyCode(){return Ht(this.config)}async trigger(){this.dispatch()}prevent(e){return"function"==typeof this.config.prevent&&this.config.prevent(e)}dispose(){this.keyBindingManager.disposeKeyBinding(this.toStrKeyCode())}}class qt extends L{constructor(e,i){super(),this.actionManager=e,this.config=i,this.id=i.id??t(),i.keyBinding&&this.addKeyBinding(Kt.fromStrKeyCode(e.app.keyBindingManager,i.keyBinding,!0))}get keyBinding(){return this._keyBinding}get name(){return this.config.name}get icon(){return this.config.icon}get description(){return this.config.description}addKeyBinding(e){return this._keyBinding=e,e.on((()=>this.trigger())),this}disposeKeyBinding(){this._keyBinding&&this._keyBinding.dispose()}async trigger(){return this.dispatch(),await this.config.onTrigger()}dispose(){this.actionManager.disposeAction(this.id),this.disposeKeyBinding()}}class Jt{constructor(t){this.app=t,this.state=e.observable({})}create(t){const i=new qt(this,t);return e.set(this.state,i.id,i),i}disposeAction(t){e.delete(this.state,t)}dispose(){Object.values(this.state).forEach((e=>e.dispose()))}async trigger(e){if(!this.state[e])throw new Error(`Failed to trigger "${e}": Action does not exist.`);await this.state[e].trigger()}}class Gt extends kt{constructor(e,t={}){super(Ut,!0),this.title=e,this.opts=t,this._ready=new V,this.setup()}get actionManager(){return new Promise((e=>this._ready.once(e)))}async setup(){this._actionManager=new Jt(await fs.getApp()),this._ready.dispatch(this._actionManager),this.defineWindow(),this.open()}async open(){await this.actionManager,super.open()}dispose(){super.dispose(),this._actionManager.dispose()}}class Zt{constructor(e,t){this.parent=e,this.icon=this.parent.getTagIcon(t),this.text=t,this.color=this.parent.getTagColor(t)}asSidebarElement(){return new Pt({id:this.text.toLowerCase(),text:this.text,color:this.color,icon:this.icon})}}class Qt{constructor(e,t){this.parent=e,this.config=t,this.isLoading=!1,this._isInstalled=!1,this.isActive=!1,this.isUpdateAvailable=!1,this.tags=this.config.tags.map((e=>(this.parent.tags[e]||(this.parent.tags[e]=new Zt(this.parent,e)),this.parent.tags[e])))}get author(){return this.config.author}get name(){return this.config.name}get version(){return this.config.version}get description(){return this.config.description}get icon(){return this.config.icon}get id(){return this.config.id}get releaseTimestamp(){return this.config.releaseTimestamp??Date.now()}get isInstalled(){return this._isInstalled}hasTag(e){return this.tags.includes(e)}async download(e){if(void 0!==e)return this.downloadExtension(e);const t=new Gt("windows.pluginInstallLocation.title"),i=await t.actionManager;i.create({icon:"mdi-folder-multiple-outline",name:"actions.pluginInstallLocation.global.name",description:"actions.pluginInstallLocation.global.description",onTrigger:()=>{this.downloadExtension(!0)}}),i.create({icon:"mdi-folder-outline",name:"actions.pluginInstallLocation.local.name",description:"actions.pluginInstallLocation.local.description",onTrigger:()=>{this.downloadExtension(!1)}})}async downloadExtension(e){this.isLoading=!0;const t=await fs.getApp(),i=await fetch(this.parent.getBaseUrl()+this.config.link).then((e=>e.arrayBuffer())),n=e?"plugins":`projects/${t.selectedProject}/bridge/plugins`,s=n+`/${this.name.replace(/\s+/g,"")}.zip`;await t.fileSystem.writeFile(s,i);try{await t.fileSystem.unlink(s.replace(".zip",""))}catch{}for(const o of this.config.dependencies??[]){const t=this.parent.getExtensionById(o);t&&(t.isInstalled||await t.downloadExtension(e))}const a=await t.extensionLoader.loadExtension(await t.fileSystem.getDirectoryHandle(n),await t.fileSystem.getFileHandle(s),!0,e);a&&this.setConnected(a),this.setInstalled(),this.isUpdateAvailable=!1,this.isLoading=!1}async update(){this.connected&&(this.connected.deactivate(),await this.downloadExtension(this.connected.isGlobal))}setInstalled(){this._isInstalled=!0,this.parent.addInstalledExtension(this)}setIsUpdateAvailable(){this.isUpdateAvailable=!0}setConnected(e){this.connected=e}get displayVersion(){return this.connected?.version??this.config.version}}class Xt extends kt{constructor(){super(Lt),this.baseUrl="https://raw.githubusercontent.com/bridge-core/plugins/master",this.sidebar=new jt([]),this.extensions=[],this.installedExtensions=new Set,this.tags={},this.defineWindow()}async open(){const e=await fs.getApp();e.windows.loadingWindow.open(),this.sidebar.removeElements(),this.installedExtensions.clear();const t=await new Promise((e=>{fs.ready.once((t=>{e(t.fileSystem)}))}));this.extensionTags=await t.readJSON("data/packages/extensionTags.json");const i=await e.extensionLoader.getInstalledExtensions(),n=await fetch(`${this.baseUrl}/extensions.json`).then((e=>e.json()));this.extensions=n.map((e=>new Qt(this,e))),i.forEach(((e,t)=>{const i=this.extensions.find((e=>e.id===t));i?(i.setInstalled(),i.setConnected(e),u.compare(e.version,i.version,"<")&&i.setIsUpdateAvailable()):e.forStore(this)})),this.setupSidebar(),e.windows.loadingWindow.close(),super.open()}setupSidebar(){this.sidebar.addElement(new Pt({id:"all",text:"All",icon:"mdi-format-list-bulleted-square",color:"primary"}),this.getExtensions()),this.sidebar.addElement(new Pt({id:"installed",text:"Installed",icon:"mdi-download-circle-outline",color:"primary"}),this.installedExtensions),Object.values(this.tags).forEach((e=>this.sidebar.addElement(e.asSidebarElement(),this.getExtensionsByTag(e))))}getExtensions(e){return[...new Set([...this.extensions,...this.installedExtensions])].filter((t=>!e||t.hasTag(e))).sort((({releaseTimestamp:e},{releaseTimestamp:t})=>t-e))}getExtensionsByTag(e){return this.getExtensions(e)}getTagIcon(e){return this.extensionTags[e].icon}getTagColor(e){return this.extensionTags[e].color}getExtensionById(e){return this.getExtensions().find((t=>t.id===e))}get selectedSidebar(){return this.sidebar.selected}set selectedSidebar(e){this.sidebar.clearFilter(),this.sidebar.selected=e}getBaseUrl(){return this.baseUrl}addInstalledExtension(e){this.installedExtensions.add(e)}}const Yt={};var ei=q({name:"LoadingWindow",components:{BaseWindow:me},props:["currentWindow"],data(){return this.currentWindow},methods:{onClose(){this.currentWindow.close()}}},(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("BaseWindow",{attrs:{windowTitle:e.$data.message||"windows.loadingWindow.titles.loading",isVisible:e.isVisible,hasMaximizeButton:!1,hasCloseButton:!1,isPersistent:!0,isFullscreen:!1,width:300,height:40},on:{closeWindow:e.onClose},scopedSlots:e._u([{key:"default",fn:function(){return[i("v-progress-linear",{attrs:{indeterminate:""}})]},proxy:!0}])})}),[],!1,(function(e){for(let t in Yt)this[t]=Yt[t]}),null,null,null).exports;class ti extends kt{constructor(){super(ei),this.virtualWindows=0,this.loadingMessages=[],this.defineWindow()}get message(){return this.loadingMessages[this.loadingMessages.length-1]}open(e){this.virtualWindows++,this.loadingMessages.push(e),this.isVisible||super.open()}close(){if(this.virtualWindows--,this.loadingMessages.pop(),0===this.virtualWindows)super.close();else if(this.virtualWindows<0)throw this.virtualWindows=0,new Error("Trying to close loadingWindow that doesn't exist")}closeAll(){this.virtualWindows=0,this.loadingMessages=[],super.close()}}const ii={data:()=>({isPackIndexerReady:!0}),mounted(){},destroyed(){},methods:{setIsPackIndexerReady(e){this.isPackIndexerReady=e}}};const ni={};var si=q({name:"CreatePresetWindow",mixins:[K,ii],components:{SidebarWindow:Bt},props:["currentWindow"],data(){return this.currentWindow},computed:{content(){return this.sidebar.currentState},fieldsReady(){return Object.values(this.content.fields||{}).every((([e,t,i={}])=>!!this.content.models[t]||i.optional))}},methods:{onClose(){this.currentWindow.close()},onCreatePreset(){this.currentWindow.close(),this.currentWindow.createPreset(this.content)}}},(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("SidebarWindow",{attrs:{windowTitle:"windows.createPreset.title",isVisible:e.isVisible,hasMaximizeButton:!1,isFullscreen:!1,percentageWidth:80,percentageHeight:80,sidebarItems:e.sidebar.elements},on:{closeWindow:e.onClose},scopedSlots:e._u([{key:"sidebar",fn:function(){return[i("v-text-field",{staticClass:"pt-2",attrs:{"prepend-inner-icon":"mdi-magnify",label:e.t("windows.createPreset.searchPresets"),autocomplete:"off",autofocus:"",outlined:"",dense:""},model:{value:e.sidebar._filter,callback:function(t){e.$set(e.sidebar,"_filter",t)},expression:"sidebar._filter"}})]},proxy:!0},{key:"default",fn:function(){return[i("h1",{staticClass:"mt-2 d-flex align-center",class:{"mb-6":!e.content.description}},[i("v-icon",{staticClass:"mr-1",attrs:{large:""}},[e._v(e._s(e.content.icon))]),e._v("\n\t\t\t"+e._s(e.content.name)+"\n\t\t")],1),e._v(" "),e.content.description?i("p",{staticClass:"mt-2 mb-6"},[e._v("\n\t\t\t"+e._s(e.content.description)+"\n\t\t")]):e._e(),e._v(" "),e._l(e.content.fields,(function(t,n){var s=t[0],a=t[1],o=t[2];return void 0===o&&(o={}),[o.type&&"textInput"!==o.type?"fileInput"===o.type?i("v-file-input",{key:n,staticClass:"mb-1",attrs:{accept:o.accept,"prepend-icon":null,"prepend-inner-icon":o.icon||"mdi-paperclip",label:s,autocomplete:"off",outlined:"",dense:""},model:{value:e.content.models[a],callback:function(t){e.$set(e.content.models,a,t)},expression:"content.models[id]"}}):"switch"===o.type?i("v-switch",{key:n,staticClass:"mb-1",attrs:{label:s},model:{value:e.content.models[a],callback:function(t){e.$set(e.content.models,a,t)},expression:"content.models[id]"}}):"numberInput"===o.type?i("v-slider",{key:n,staticClass:"mb-1",attrs:{min:o.min||0,max:o.max||10,discrete:"",step:o.step||1,"thumb-label":"always",label:s},model:{value:e.content.models[a],callback:function(t){e.$set(e.content.models,a,t)},expression:"content.models[id]"}}):e._e():i("v-text-field",{key:n,staticClass:"mb-1",attrs:{label:s,autocomplete:"off",outlined:"",dense:""},model:{value:e.content.models[a],callback:function(t){e.$set(e.content.models,a,t)},expression:"content.models[id]"}})]}))]},proxy:!0},{key:"actions",fn:function(){return[i("v-spacer"),e._v(" "),i("v-btn",{attrs:{color:"primary",disabled:!e.fieldsReady,loading:!e.isPackIndexerReady},on:{click:e.onCreatePreset}},[e._v("\n\t\t\tCreate\n\t\t")])]},proxy:!0}]),model:{value:e.sidebar.selected,callback:function(t){e.$set(e.sidebar,"selected",t)},expression:"sidebar.selected"}})}),[],!1,(function(e){for(let t in ni)this[t]=ni[t]}),null,null,null).exports;function ai(e,t,i){return t.forEach((t=>e=e.replaceAll(`{{${t}}}`,i[t]))),e}const oi=[".mcfunction",".json",".js",".ts",".txt",".molang"];class ri extends kt{constructor(){super(si),this.loadPresetPaths=new Map,this.sidebar=new jt([]),this.defineWindow()}async addPreset(e,i){const n=await fs.getApp(),s=await e.readJSON(i);if(!s.category)throw new Error(`Error loading ${i}: Missing preset category`);const a=await n.projectConfig.get("targetVersion")??(await n.fileSystem.readJSON("data/packages/formatVersions.json")).pop();if(s.targetVersion&&!u.compare(a,s.targetVersion[1],s.targetVersion[0]))return;let o=this.sidebar.rawElements.find((e=>e.getText()===s.category));o||(o=new Ct({text:s.category,items:[]}),this.sidebar.addElement(o));const r=t();o.addItem(new Pt({id:r,text:s.name,icon:s.icon,color:"primary"})),this.sidebar.setState(r,{...s,presetPath:D(i),models:{PROJECT_PREFIX:await n.projectConfig.get("prefix")??"bridge",...Object.fromEntries(s.fields.map((([e,t,i={}])=>[t,i.default??null])))}})}async loadPresets(e,t="data/packages/preset"){let i=[];try{i=await e.readdir(t,{withFileTypes:!0})}catch{}for(const n of i)if("directory"===n.kind)await this.loadPresets(e,`${t}/${n.name}`);else if("manifest.json"===n.name)return await this.addPreset(e,`${t}/${n.name}`)}async open(){const e=await fs.getApp(),t=e.fileSystem;e.windows.loadingWindow.open(),this.sidebar.removeElements(),await this.loadPresets(t);for(const[i,n]of this.loadPresetPaths)await this.loadPresets(t,n);e.windows.loadingWindow.close(),super.open()}addPresets(e){const i=t();return this.loadPresetPaths.set(i,e),{dispose:()=>this.loadPresetPaths.delete(i)}}async createPreset({presetPath:e,createFiles:t=[],expandFiles:i=[]}){if(!e)return;const n=await fs.getApp();n.windows.loadingWindow.open(),n.fileSystem;const s=[],a=[];s.push(...t.map((async t=>{"string"==typeof t?a.push(...await async function(e,t,i){const n=await fs.getApp(),s=n.project?.fileSystem,a=n.fileSystem,o=await s.readFile(`${e}/${t}`),r=await o.text(),c={};try{N(r,c,["module"])}catch(h){throw new Error(`Failed to execute PresetScript "${t}": ${h}`)}if("function"!=typeof c.exports)throw new Error(`Failed to execute PresetScript "${t}": module.exports is of type ${typeof c.exports}`);const d=[];return await c.exports({models:i,createFile:(e,t,{inject:n=[]}={inject:[]})=>("string"!=typeof t&&(t=JSON.stringify(t,null,"\t")),d.push(e),s.writeFile(e,ai(t,n,i))),expandFile:async(e,t,{inject:n=[]}={inject:[]})=>{let a="";try{a=await(await s.readFile(e)).text()}catch{}t=ai(t,n,i),d.push(e),"string"==typeof t?await s.writeFile(e,`${a}\n${t}`):await s.writeJSON(e,it(l.parse(a),l.parse(t)))},loadPresetFile:t=>a.readFile(`${e}/${t}`)}),d}(e,t,this.sidebar.currentState.models)):a.push(await async function(e,[t,i,n],s){const a=await fs.getApp(),o=a.fileSystem,r=n?.inject??[],c=`${e}/${t}`,l=ai(`projects/${a.selectedProject}/${i}`,r,s),d=A(l);if(await o.mkdir(m(l),{recursive:!0}),0!==r.length&&oi.includes(d)){const e=await o.readFile(c),t=await e.text();await o.writeFile(l,ai(t,r,s))}else await o.copyFile(c,l);return ai(i,r,s)}(e,t,this.sidebar.currentState.models))})),...i.map((async t=>{a.push(await async function(e,[t,i,n],s){const a=await fs.getApp(),o=a.fileSystem,r=n?.inject??[],c=`${e}/${t}`,l=ai(`projects/${a.selectedProject}/${i}`,r,s),d=A(l);if(await o.mkdir(m(l),{recursive:!0}),".json"===d){const e=await o.readJSON(c);let t;try{t=await o.readJSON(l)}catch{t={}}await o.writeFile(l,ai(JSON.stringify(it(t,e),null,"\t"),r,s))}else{const e=await o.readFile(c),t=await e.text();let i;try{i=await(await o.readFile(l)).text()}catch{i=""}const n=ai(t,r,s);await o.writeFile(l,`${i}${""!==i?"\n":""}${n}`)}return ai(i,r,s)}(e,t,this.sidebar.currentState.models))}))),await Promise.all(s);for(const o of a)n.project?.updateFile(o),n.project?.openFile(`projects/${n.project.name}/${o}`);n.windows.loadingWindow.close()}transformString(e,t){const i=this.sidebar.currentState.models;return t.forEach((t=>e=e.replaceAll(`{{${t}}}`,i[t]))),e}}const ci={name:"PackTypeViewer",mixins:[K],props:{packType:Object,selected:Boolean,isSelectable:Boolean}},li={};var di=q(ci,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("v-col",{directives:[{name:"ripple",rawName:"v-ripple",value:e.isSelectable,expression:"isSelectable"}],class:{"rounded-lg pa-3 content-area":!0,selected:e.selected},on:{click:function(t){return e.$emit("click")}}},[i("div",{staticClass:"d-flex"},[i("v-icon",{staticClass:"mr-2",attrs:{color:e.packType.color}},[e._v("\n\t\t\t"+e._s(e.packType.icon)+"\n\t\t")]),e._v(" "),i("span",{staticClass:"text-h6"},[e._v("\n\t\t\t"+e._s(e.t("packType."+e.packType.id+".name"))+"\n\t\t")])],1),e._v(" "),e.isSelectable?i("div",{staticClass:"d-flex align-center mb-2"},[e.selected?[i("v-icon",{staticClass:"mr-1",attrs:{color:"success",small:""}},[e._v("\n\t\t\t\tmdi-checkbox-marked-circle-outline\n\t\t\t")]),e._v(" "),i("span",[e._v("\n\t\t\t\t"+e._s(e.t("windows.createProject.selectedPack"))+"\n\t\t\t")])]:[i("v-icon",{staticClass:"mr-1",attrs:{small:""}},[e._v("\n\t\t\t\tmdi-checkbox-blank-circle-outline\n\t\t\t")]),e._v(" "),i("span",[e._v("\n\t\t\t\t"+e._s(e.t("windows.createProject.omitPack"))+"\n\t\t\t")])]],2):e._e(),e._v(" "),e.packType.version?i("div",{staticClass:"mb-2"},[e._v("\n\t\tPack Version: v"+e._s(e.packType.version.join("."))+"\n\t")]):e._e(),e._v(" "),i("span",[e._v(e._s(e.t("packType."+e.packType.id+".description")))])])}),[],!1,(function(e){for(let t in li)this[t]=li[t]}),"a690e19c",null,null).exports;const hi={data:()=>({isCompilerReady:!0}),mounted(){},destroyed(){},methods:{setIsCompilerReady(e){this.isCompilerReady=e}}};const pi={};var ui=q({name:"CreateProjectWindow",mixins:[K,hi,ii],components:{BaseWindow:me,PackTypeViewer:di},props:["currentWindow"],data(){return this.currentWindow},computed:{shouldLoad(){return this.isFirstProject?this.isCreatingProject:this.isCreatingProject||!this.isCompilerReady||!this.isPackIndexerReady}},methods:{close(){this.currentWindow.close()},async createProject(){this.isCreatingProject=!0,await this.currentWindow.createProject(),this.isCreatingProject=!1,this.currentWindow.close()},togglePack(e){const t=this.createOptions.packs,i=t.indexOf(e);i>-1?t.splice(i,1):t.push(e)}}},(function(){var e=this,t=e.$createElement,i=e._self._c||t;return e.shouldRender?i("BaseWindow",{attrs:{windowTitle:"windows.createProject.title",isVisible:e.isVisible,hasMaximizeButton:!1,hasCloseButton:!e.isFirstProject,isFullscreen:!1,isPersistent:e.isCreatingProject||e.isFirstProject,percentageWidth:80,percentageHeight:80},on:{closeWindow:e.close},scopedSlots:e._u([{key:"default",fn:function(){return[e.isFirstProject?i("div",{staticClass:"rounded-lg pa-3 content-area mb-2"},[i("h1",{staticClass:"text-h4"},[e._v("\n\t\t\t\t"+e._s(e.t("windows.createProject.welcome"))+"\n\t\t\t")]),e._v(" "),i("span",[e._v("\n\t\t\t\t"+e._s(e.t("windows.createProject.welcomeDescription"))+"\n\t\t\t")])]):e._e(),e._v(" "),i("v-row",{staticClass:"mb-6",attrs:{"no-gutters":""}},e._l(e.availablePackTypes,(function(t,n){return i("PackTypeViewer",{key:t.id,class:{"mr-1":0===n,"ml-1":n+1===e.availablePackTypes.length,"mx-1":n>0&&n+1<e.availablePackTypes.length},attrs:{packType:t,isSelectable:"",selected:e.createOptions.packs.includes(t.packPath)},on:{click:function(i){return e.togglePack(t.packPath)}}})})),1),e._v(" "),i("div",{staticClass:"d-flex"},[i("v-file-input",{staticClass:"mr-2",attrs:{label:e.t("windows.createProject.packIcon"),"prepend-icon":null,"prepend-inner-icon":"mdi-image-outline",accept:"image/png",outlined:"",dense:""},model:{value:e.createOptions.icon,callback:function(t){e.$set(e.createOptions,"icon",t)},expression:"createOptions.icon"}}),e._v(" "),i("v-text-field",{staticClass:"ml-2",attrs:{label:e.t("windows.createProject.projectName"),autocomplete:"off",outlined:"",dense:""},model:{value:e.createOptions.name,callback:function(t){e.$set(e.createOptions,"name",t)},expression:"createOptions.name"}})],1),e._v(" "),i("v-text-field",{attrs:{label:e.t("windows.createProject.projectDescription"),autocomplete:"off",outlined:"",dense:""},model:{value:e.createOptions.description,callback:function(t){e.$set(e.createOptions,"description",t)},expression:"createOptions.description"}}),e._v(" "),i("div",{staticClass:"d-flex"},[i("v-text-field",{staticClass:"mr-2",attrs:{label:e.t("windows.createProject.projectPrefix"),autocomplete:"off",outlined:"",dense:""},model:{value:e.createOptions.prefix,callback:function(t){e.$set(e.createOptions,"prefix",t)},expression:"createOptions.prefix"}}),e._v(" "),i("v-text-field",{staticClass:"mx-2",attrs:{label:e.t("windows.createProject.projectAuthor"),autocomplete:"off",outlined:"",dense:""},model:{value:e.createOptions.author,callback:function(t){e.$set(e.createOptions,"author",t)},expression:"createOptions.author"}}),e._v(" "),i("v-autocomplete",{staticClass:"ml-2",attrs:{label:e.t("windows.createProject.projectTargetVersion"),autocomplete:"off",items:e.availableTargetVersions,loading:e.availableTargetVersionsLoading,outlined:"",dense:"","menu-props":{maxHeight:220}},model:{value:e.createOptions.targetVersion,callback:function(t){e.$set(e.createOptions,"targetVersion",t)},expression:"createOptions.targetVersion"}})],1)]},proxy:!0},{key:"actions",fn:function(){return[i("v-spacer"),e._v(" "),i("v-btn",{attrs:{color:"primary",disabled:!e.currentWindow.hasRequiredData,loading:e.shouldLoad},on:{click:e.createProject}},[i("v-icon",{staticClass:"pr-2"},[e._v("mdi-plus")]),e._v(" "),i("span",[e._v(e._s(e.t("windows.createProject.create")))])],1)]},proxy:!0}],null,!1,2245899332)}):e._e()}),[],!1,(function(e){for(let t in pi)this[t]=pi[t]}),"3389c826",null,null).exports;class mi{async create(e,t){await e.mkdir(this.packPath);for(const i of this.createFiles)await i.create(e,t)}}class gi{}class fi extends gi{constructor(e){super(),this.pack=e}get type(){switch(this.pack){case"BP":return"data";case"RP":return"resources";case"SP":return"skin_pack"}}create(e,i){return e.writeJSON(`${this.pack}/manifest.json`,{format_version:2,header:{name:"pack.name",description:"pack.description",min_engine_version:(this.type,i.targetVersion.split(".").map((e=>Number(e)))),uuid:t(),version:[1,0,0]},modules:[{description:i.description,type:this.type,uuid:t(),version:[1,0,0]}]},!0)}}class wi extends gi{constructor(e){super(),this.packPath=e}async create(e,t){await e.mkdir(`${this.packPath}/texts`),await e.writeFile(`${this.packPath}/texts/en_US.lang`,`pack.name=${t.name} ${this.packPath}\npack.description=${t.description}`),await e.writeJSON(`${this.packPath}/texts/languages.json`,["en_US"],!0)}}class vi extends gi{constructor(e){super(),this.packPath=e}async create(e,t){let i=t.icon;if(!i){const e=await fs.getApp();i=await e.fileSystem.readFile("data/packages/packIcon.png")}await e.writeFile(`${this.packPath}/pack_icon.png`,i)}}class bi extends mi{constructor(){super(...arguments),this.packPath="BP",this.createFiles=[new fi(this.packPath),new wi(this.packPath),new vi(this.packPath)]}}class yi extends mi{constructor(){super(...arguments),this.packPath="RP",this.createFiles=[new fi(this.packPath),new wi(this.packPath),new vi(this.packPath)]}}class ki extends mi{constructor(){super(...arguments),this.packPath="SP",this.createFiles=[new fi(this.packPath),new wi(this.packPath),new vi(this.packPath)]}}class Si extends gi{async create(e,t){await e.mkdir("bridge/compiler"),await e.writeJSON("bridge/compiler/default.json",{icon:"mdi-cogs",name:"Default Script",description:'Transforms the "bridge." folder structure to "com.mojang". "bridge." runs it automatically in dev mode in the background to enable fast, incremental builds for testing.',plugins:{"*":[["comMojangRewrite",{packName:t.name}]]}},!0)}}class xi extends gi{async create(e,t){await e.writeJSON("bridge/config.json",{prefix:t.prefix,author:t.author,targetVersion:t.targetVersion,description:t.description},!0)}}class _i extends mi{constructor(){super(...arguments),this.packPath="bridge",this.createFiles=[new xi,new Si]}}class Ci extends gi{async create(e,t){await e.writeFile(".gitignore","Desktop.ini    \n.DS_Store \n!bridge/\nbridge/*\n!bridge/compiler/\n!bridge/plugins\n!bridge/config.json\nbuilds")}}class Pi extends kt{constructor(){super(ui,!1),this.isFirstProject=!1,this.createOptions={author:"",description:"",icon:null,name:"",prefix:"bridge",targetVersion:"",packs:["bridge","BP","RP"]},this.isCreatingProject=!1,this.availableTargetVersions=[],this.availableTargetVersionsLoading=!0,this.packs={BP:new bi,RP:new yi,SP:new ki,bridge:new _i},this.availablePackTypes=[],this.createFiles=[new Ci],this.defineWindow(),fs.ready.once((async e=>{this.availableTargetVersions=await e.fileSystem.readJSON("data/packages/formatVersions.json"),this.createOptions.targetVersion=this.availableTargetVersions[this.availableTargetVersions.length-1],this.availableTargetVersionsLoading=!1})),yt.ready.once((()=>{this.availablePackTypes=yt.all().filter((({id:e})=>"worldTemplate"!==e))}))}get hasRequiredData(){return this.createOptions.name.length>0&&this.createOptions.prefix.length>0&&this.createOptions.author.length>0&&this.createOptions.targetVersion.length>0}open(e=!1){this.isFirstProject=e,super.open()}createProject(){return new Promise((e=>fs.ready.once((async t=>{const i=t.fileSystem,n=await i.getDirectoryHandle(`projects/${this.createOptions.name}`,{create:!0}),s=new R(n);for(const e of this.createFiles)await e.create(s,this.createOptions);for(const e of this.createOptions.packs)await this.packs[e].create(s,this.createOptions);await t.projectManager.addProject(n),e()}))))}}const ji={};var Ti=q({name:"OpenFileWindow",mixins:[K],components:{BaseWindow:me},props:["currentWindow"],data(){return this.currentWindow},methods:{onClose(){this.currentWindow.close()},onChange(e){e&&this.currentWindow.openFile(e)}}},(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("BaseWindow",{attrs:{windowTitle:"windows.openFile.title",isVisible:e.isVisible,hasMaximizeButton:!1,hasCloseButton:!0,isFullscreen:!1,width:460,height:120},on:{closeWindow:e.onClose},scopedSlots:e._u([{key:"default",fn:function(){return[i("v-autocomplete",{attrs:{label:e.t("windows.openFile.search"),items:e.packFiles,dense:"","no-data-text":e.t("windows.openFile.noData"),outlined:"",autofocus:"","auto-select-first":""},on:{change:e.onChange},model:{value:e.selectedFile,callback:function(t){e.selectedFile=t},expression:"selectedFile"}})]},proxy:!0}])})}),[],!1,(function(e){for(let t in ji)this[t]=ji[t]}),null,null,null).exports;class Fi extends kt{constructor(){super(Ti,!1,!0),this.packFiles=[],this.selectedFile="",this.isCurrentlyOpening=!1,this.defineWindow()}async open(){if(this.isCurrentlyOpening)return;this.isCurrentlyOpening=!0,this.selectedFile="";const e=await fs.getApp();e.windows.loadingWindow.open();const t=e.project?.packIndexer;t&&(this.packFiles=await(t.service?.getAllFiles(!0))??[]),e.windows.loadingWindow.close(),super.open(),this.isCurrentlyOpening=!1}openFile(e){fs.ready.once((t=>t.project?.openFile(`projects/${t.selectedProject}/${e}`))),this.close()}}class Ei{constructor(e,i,n,s=!1){this.fileSystem=e,this.parent=i,this.path=n,this._isFile=s,this.children=[],this.uuid=t(),this.isFolderOpen=!1,this.hasLoadedChildren=this._isFile,this.isLoading=!1,s||this.isFolderOpen&&this.loadChildren(n)}static async create(t=[],i=!1){const n=new Ei(fs.instance.fileSystem,null,t,i);return n.open(),e.observable(n)}async loadChildren(e){this.isLoading=!0;const t=await fs.getApp(),i=await(t.project?.packIndexer.readdir(e,{withFileTypes:!0}))??[];for(const n of i){if("darwin"===te()&&".DS_Store"===n.name&&"file"===n.kind)return;const t=new Ei(this.fileSystem,this,n.path??e.concat([n.name]),"file"===n.kind);t.setDisplayName(n.displayName),n.filePath&&t.setPath(n.filePath),this.children.push(t)}this.sortChildren(),this.isLoading=!1,this.hasLoadedChildren=!0}get name(){return this.displayName??this.path[this.path.length-1]}get isFile(){return this._isFile}get color(){return yt.get(this.getFullPath())?.color}get icon(){return z.get(this.getPath())?.icon}getFullPath(){return["projects",fs.instance.selectedProject].concat(this.path).join("/")}getPath(){return this.path.join("/")}getPathWithoutPack(){const e=[...this.path];return e.shift(),e.join("/")}setPath(e){return this.path=e.split("/")}open(){return this.isFile?(fs.ready.once((e=>e.project?.openFile(this.getFullPath()))),!0):(this.isFolderOpen=!this.isFolderOpen,this.hasLoadedChildren||this.loadChildren(this.path),!1)}setDisplayName(e){this.displayName=e}sortChildren(){this.children=this.children.sort(((e,t)=>{if(e.isFile&&!t.isFile)return 1;if(!e.isFile&&t.isFile)return-1;if(e.isFile){if(e.getPathWithoutPack()>t.getPathWithoutPack())return 1;if(e.getPathWithoutPack()<t.getPathWithoutPack())return-1}else{if(e.name>t.name)return 1;if(e.name<t.name)return-1}return 0}))}updateUUID(){this.uuid=t()}}const Wi={};var Mi=q({name:"FileDisplayer",mixins:[ii],props:{entry:Object,startPath:Array},mounted(){this.loadDirectory()},data:()=>({directoryEntry:null,tree:[]}),methods:{async loadDirectory(){if(this.entry)this.directoryEntry=this.entry;else{(await fs.getApp()).project.packIndexer.once((async()=>{this.directoryEntry=await Ei.create(this.startPath)}))}},onClick(e){e.open()&&this.$emit("closeWindow")}},watch:{startPath(){this.loadDirectory()}}},(function(){var e=this,t=e.$createElement,i=e._self._c||t;return e.directoryEntry&&!e.directoryEntry.isLoading&&e.isPackIndexerReady?i("div",{staticClass:"body-1"},[e._l(e.directoryEntry.children,(function(t){return[t.isFile?i("div",{directives:[{name:"ripple",rawName:"v-ripple"}],key:t.uuid,staticClass:"file rounded-lg",on:{click:function(i){return i.stopPropagation(),e.onClick(t)}}},[i("v-icon",{attrs:{color:t.color,small:""}},[e._v("\n\t\t\t\t"+e._s(t.icon||"mdi-file-outline")+"\n\t\t\t")]),e._v("\n\t\t\t"+e._s(t.name)+"\n\t\t")],1):i("details",{key:t.uuid,staticClass:"folder",attrs:{open:t.isFolderOpen}},[i("summary",{directives:[{name:"ripple",rawName:"v-ripple"}],staticClass:"d-flex rounded-lg",on:{click:function(i){return i.preventDefault(),e.onClick(t)}}},[i("v-icon",{staticClass:"pr-1",attrs:{color:t.color,small:""}},[e._v("\n\t\t\t\t\t"+e._s(t.isFolderOpen?"mdi-folder-open":"mdi-folder")+"\n\t\t\t\t")]),e._v(" "),i("span",{staticClass:"folder"},[e._v(e._s(t.name))])],1),e._v(" "),i("FileDisplayer",{attrs:{entry:t},on:{closeWindow:function(t){return e.$emit("closeWindow")}}})],1)]}))],2):i("v-progress-linear",{attrs:{indeterminate:""}})}),[],!1,(function(e){for(let t in Wi)this[t]=Wi[t]}),"46e59eeb",null,null).exports;const Ai={};var Di=q({name:"PackExplorerWindow",mixins:[K],components:{SidebarWindow:Bt,FileDisplayer:Mi},props:["currentWindow"],data(){return this.currentWindow},methods:{onClose(){this.currentWindow.close()},async refreshPackExplorer(){this.currentWindow.close();const e=await fs.getApp();await e.project.refresh()},openFile(e){this.currentWindow.close(),fs.ready.once((t=>{t.project.openFile(`projects/${t.selectedProject}/${e}`)}))},createPreset(){this.currentWindow.close(),fs.ready.once((e=>e.windows.createPreset.open()))}},computed:{isDarkMode(){return this.$vuetify.theme.dark}}},(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("SidebarWindow",{attrs:{windowTitle:"windows.packExplorer.title",isVisible:e.isVisible,hasMaximizeButton:!1,isFullscreen:!1,percentageWidth:80,percentageHeight:80,sidebarItems:e.sidebar.elements},on:{closeWindow:e.onClose},scopedSlots:e._u([{key:"toolbar",fn:function(){return[i("v-btn",{attrs:{icon:"",small:""},on:{click:e.createPreset}},[i("v-icon",{attrs:{color:e.isDarkMode?"white":"grey darken-1",small:""}},[e._v("\n\t\t\t\tmdi-plus\n\t\t\t")])],1),e._v(" "),i("v-btn",{attrs:{icon:"",small:""},on:{click:e.refreshPackExplorer}},[i("v-icon",{attrs:{color:e.isDarkMode?"white":"grey darken-1",small:""}},[e._v("\n\t\t\t\tmdi-refresh\n\t\t\t")])],1)]},proxy:!0},{key:"sidebar",fn:function(){return[i("v-text-field",{staticClass:"pt-2",attrs:{"prepend-inner-icon":"mdi-magnify",label:e.t("windows.packExplorer.searchFiles"),outlined:"",dense:""},model:{value:e.sidebar._filter,callback:function(t){e.$set(e.sidebar,"_filter",t)},expression:"sidebar._filter"}})]},proxy:!0},{key:"default",fn:function(t){var n=t.selectedSidebar;return["directory"===e.sidebar.currentElement.kind?i("div",[i("h1",{staticClass:"mt-2 mb-6 d-flex align-center"},[i("v-icon",{staticClass:"mr-1",attrs:{large:"",color:e.sidebar.currentState.color}},[e._v("\n\t\t\t\t\t"+e._s(e.sidebar.currentState.icon)+"\n\t\t\t\t")]),e._v("\n\t\t\t\t"+e._s(e.sidebar.currentState.text)+"\n\t\t\t")],1),e._v(" "),i("FileDisplayer",{key:n,attrs:{startPath:n?n.split("/"):void 0},on:{closeWindow:e.onClose}})],1):"file"===e.sidebar.currentElement.kind?i("div",{staticClass:"body-1"},[i("h1",{staticClass:"mt-2 mb-6 d-flex align-center"},[i("v-icon",{staticClass:"mr-1",attrs:{large:"",color:e.sidebar.currentState.color}},[e._v("\n\t\t\t\t\t"+e._s(e.sidebar.currentState.icon)+"\n\t\t\t\t")]),e._v("\n\t\t\t\t"+e._s(e.sidebar.currentState.text)+"\n\t\t\t")],1),e._v(" "),i("p",[i("strong",[e._v("Path:")]),e._v(" "+e._s(n))]),e._v(" "),i("div",{staticClass:"mt-8 d-flex"},[i("v-spacer"),e._v(" "),i("v-btn",{attrs:{color:"primary"},on:{click:function(t){return e.openFile(n)}}},[e._v("\n\t\t\t\t\tOpen\n\t\t\t\t")])],1)]):e._e()]}}]),model:{value:e.sidebar.selected,callback:function(t){e.$set(e.sidebar,"selected",t)},expression:"sidebar.selected"}})}),[],!1,(function(e){for(let t in Ai)this[t]=Ai[t]}),null,null,null).exports;class Bi extends Pt{constructor(e){super(e),this.packType=e.packType,this.kind=e.kind}}class $i extends kt{constructor(){super(Di,!1,!0),this.loadedPack=!1,this.sidebarCategory=new Ct({text:"windows.packExplorer.categories",items:[]}),this.sidebar=new jt([this.sidebarCategory]),fs.eventSystem.on("projectChanged",(()=>{this.sidebar.resetSelected(),this.loadedPack=!1})),this.defineWindow()}async loadPack(){this.sidebarCategory.removeItems();let e=[];const t=await fs.getApp();(await(t.project?.packIndexer.readdir([]))??[]).forEach((({kind:i,displayName:n,name:s,path:a})=>{const o=z.get(void 0,s),r=o?yt.get(`projects/test/${"string"==typeof o.matcher?o.matcher:o.matcher[0]}`):void 0,c=o&&o.icon?o.icon:`mdi-${"directory"===i?"folder":"file"}-outline`,l=n??t.locales.translate(`fileType.${s}`),d=r?r.color:void 0;e.push(new Bi({kind:i,packType:r?r.id:"unknown",id:a??s,text:l,icon:c,color:d})),this.sidebar.setState(a??s,{text:l,icon:c,color:d})})),e=e.sort(((e,t)=>e.packType!==t.packType?e.packType.localeCompare(t.packType):e.text.localeCompare(t.text))),e.forEach((e=>this.sidebarCategory.addItem(e))),this.sidebar.setDefaultSelected(),super.open()}async open(){if(this.loadedPack)super.open();else{const e=await fs.getApp();e.project?.packIndexer.once((async()=>{e.windows.loadingWindow.open(),await this.loadPack(),e.windows.loadingWindow.close()}))}}}const Ii={};var Oi=q({name:"ToolbarButton",props:{icon:{type:String}},computed:{isDarkMode(){return this.$vuetify.theme.dark}}},(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("v-btn",{attrs:{icon:"",small:""},on:{click:function(t){return e.$emit("click")}}},[i("v-icon",{attrs:{color:e.isDarkMode?"white":"grey darken-1",small:""}},[e._v("\n\t\t"+e._s(e.icon)+"\n\t")])],1)}),[],!1,(function(e){for(let t in Ii)this[t]=Ii[t]}),null,null,null).exports;const Li={};var Vi=q({name:"ProjectChooserWindow",mixins:[K,ii,hi],components:{SidebarWindow:Bt,ToolbarButton:Oi,PackTypeViewer:di},props:["currentWindow"],data(){return this.currentWindow},methods:{onClose(){this.currentWindow.close()},async onSelectProject(){(await fs.getApp()).projectManager.selectProject(this.sidebar.selected),this.currentWindow.close()},async createProject(){const e=await fs.getApp();this.currentWindow.close(),e.windows.createProject.open()},onDeleteProject(e){_e("windows.deleteProject.description","windows.deleteProject.confirm","windows.deleteProject.cancel",(async()=>{const t=await fs.getApp();await t.projectManager.removeProject(e),await this.currentWindow.loadProjects()}))}}},(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("SidebarWindow",{attrs:{windowTitle:"windows.projectChooser.title",isVisible:e.isVisible,hasMaximizeButton:!1,isFullscreen:!1,percentageWidth:80,percentageHeight:80,sidebarItems:e.sidebar.elements},on:{closeWindow:e.onClose},scopedSlots:e._u([{key:"toolbar",fn:function(){return[i("ToolbarButton",{attrs:{icon:"mdi-plus"},on:{click:e.createProject}})]},proxy:!0},{key:"sidebar",fn:function(){return[i("v-text-field",{staticClass:"pt-2",attrs:{"prepend-inner-icon":"mdi-magnify",label:e.t("windows.projectChooser.searchProjects"),outlined:"",dense:""},model:{value:e.sidebar._filter,callback:function(t){e.$set(e.sidebar,"_filter",t)},expression:"sidebar._filter"}})]},proxy:!0},{key:"default",fn:function(){return[i("div",{staticClass:"d-flex align-center mb-4 rounded-lg content-area pa-4"},[i("img",{staticClass:"mr-2 project-logo rounded-lg",attrs:{height:"64",src:e.sidebar.currentState.imgSrc}}),e._v(" "),i("div",[i("h1",{staticClass:"text-h4"},[e._v(e._s(e.sidebar.currentState.name))]),e._v(" "),i("h2",{staticClass:"text-h6"},[e._v("\n\t\t\t\t\tby "+e._s(e.sidebar.currentState.author||"Unknown")+"\n\t\t\t\t")])])]),e._v(" "),i("div",{staticClass:"d-flex"},e._l(e.sidebar.currentState.contains,(function(t,n){return i("PackTypeViewer",{key:t.id,class:{"mr-1":0===n,"ml-1":n+1===e.sidebar.currentState.contains.length,"mx-1":n>0&&n+1<e.sidebar.currentState.contains.length},attrs:{packType:t}})})),1)]},proxy:!0},{key:"actions",fn:function(t){var n=t.selectedSidebar;return[i("v-spacer"),e._v(" "),i("v-btn",{attrs:{color:"error",disabled:e.currentProject===n},on:{click:function(t){return e.onDeleteProject(n)}}},[i("v-icon",[e._v("mdi-delete")]),e._v("\n\t\t\tDelete\n\t\t")],1),e._v(" "),i("v-btn",{attrs:{color:"primary",disabled:e.currentProject===n,loading:!(e.currentProject===n||e.isPackIndexerReady&&e.isCompilerReady)},on:{click:e.onSelectProject}},[i("v-icon",[e._v("mdi-check")]),e._v("\n\t\t\tSelect\n\t\t")],1)]}}]),model:{value:e.sidebar.selected,callback:function(t){e.$set(e.sidebar,"selected",t)},expression:"sidebar.selected"}})}),[],!1,(function(e){for(let t in Li)this[t]=Li[t]}),"17725b71",null,null).exports;class Ni extends kt{constructor(){super(Vi,!1,!0),this.sidebar=new jt([]),this.currentProject=void 0,this.defineWindow()}addProject(e,t,i){this.sidebar.addElement(new Pt({color:"primary",text:t,icon:`mdi-alpha-${t[0].toLowerCase()}-box-outline`,id:e}),i),this.sidebar.setDefaultSelected()}async loadProjects(){this.sidebar.removeElements();const e=await fs.getApp();return(await e.projectManager.getProjects()).forEach((e=>this.addProject(e.path,e.name,e))),this.sidebar.setDefaultSelected(e.projectManager.selectedProject),e.projectManager.selectedProject}async open(){this.currentProject=await this.loadProjects(),super.open()}}const Ri={};var zi=q({name:"PackExplorerWindow",mixins:[K],components:{SidebarWindow:Bt},props:["currentWindow"],data(){return this.currentWindow},methods:{onClose(){this.currentWindow.close()}}},(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("SidebarWindow",{attrs:{windowTitle:"windows.settings.title",isVisible:e.isVisible,hasMaximizeButton:!1,isFullscreen:!1,percentageWidth:80,percentageHeight:80,sidebarItems:e.sidebar.elements},on:{closeWindow:e.onClose},scopedSlots:e._u([{key:"sidebar",fn:function(){return[i("v-text-field",{staticClass:"pt-2",attrs:{"prepend-inner-icon":"mdi-magnify",label:e.t("windows.settings.searchSettings"),autocomplete:"off",autofocus:"",outlined:"",dense:""},model:{value:e.sidebar._filter,callback:function(t){e.$set(e.sidebar,"_filter","string"==typeof t?t.trim():t)},expression:"sidebar._filter"}})]},proxy:!0},{key:"default",fn:function(t){var n=t.selectedSidebar;return[0===e.sidebar.currentState.length&&""!==e.sidebar.filter?i("span",[e._v('\n\t\t\tNo setting matches your search for "'+e._s(e.sidebar.filter)+'".\n\t\t')]):e._e(),e._v(" "),e._l(e.sidebar.currentState,(function(t,s){return i(t.component,{key:n+"."+s+"."+t.value,tag:"component",staticClass:"mb-6",attrs:{config:t.config,value:t.value},on:{change:t.onChange,closeWindow:e.onClose}})}))]}}]),model:{value:e.sidebar.selected,callback:function(t){e.$set(e.sidebar,"selected",t)},expression:"sidebar.selected"}})}),[],!1,(function(e){for(let t in Ri)this[t]=Ri[t]}),null,null,null).exports;class Ui{constructor(t,i,n=H){this.state=n,this.onChange=async e=>{await(this.value=e),"function"==typeof this.config.onChange&&await this.config.onChange(e)},e.set(this,"config",i),e.set(this,"component",t),void 0===this.value&&void 0!==i.default&&(this.value=i.default)}set value(t){void 0===this.state[this.config.category]&&e.set(this.state,this.config.category,{}),e.set(this.state[this.config.category],this.config.key,t)}get value(){return this.state[this.config.category]?.[this.config.key]}}const Hi={};var Ki=q({props:{config:Object,value:String},mixins:[K],data:()=>({value_:void 0}),created(){this.value_=this.config.options.findIndex((e=>e===this.value))||0},methods:{onChange(e){this.$nextTick((()=>this.$emit("change",this.config.options[e])))}}},(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("h3",[e._v(e._s(e.t(e.config.name)))]),e._v(" "),i("div",{staticClass:"d-flex"},[i("div",[i("v-btn-toggle",{attrs:{inset:"",dense:"",mandatory:"",label:e.config.description,value:e.value_},on:{change:e.onChange}},e._l(e.config.options,(function(t){return i("v-btn",{key:t,attrs:{color:"sidebarSelection"}},[e._v("\n\t\t\t\t\t"+e._s(t)+"\n\t\t\t\t")])})),1)],1),e._v(" "),i("span",{staticClass:"ml-4 body-1"},[e._v(e._s(e.t(e.config.description)))])])])}),[],!1,(function(e){for(let t in Hi)this[t]=Hi[t]}),null,null,null).exports;class qi extends Ui{constructor(e){super(Ki,e)}matches(e){return this.config.name.toLowerCase().includes(e)||this.config.description.toLowerCase().includes(e)||this.config.options.some((t=>t.toLowerCase().includes(e)))}}const Ji={props:{value:[Boolean,Promise],config:Object},mixins:[K],data:()=>({value_:void 0}),async mounted(){this.value_=await this.value},methods:{onChange(e){this.$nextTick((()=>this.$emit("change",e)))}}},Gi={};var Zi=q(Ji,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("h3",[e._v(e._s(e.t(e.config.name)))]),e._v(" "),i("v-switch",{staticStyle:{"margin-top":"0"},attrs:{inset:"",dense:"",label:e.t(e.config.description),value:e.value_},on:{change:e.onChange}})],1)}),[],!1,(function(e){for(let t in Gi)this[t]=Gi[t]}),null,null,null).exports;class Qi extends Ui{constructor(e){super(Zi,e)}matches(e){return this.config.name.toLowerCase().includes(e)||this.config.description.toLowerCase().includes(e)}}const Xi={};var Yi=q({props:{config:Object},components:{ActionViewer:Rt},mixins:[K]},(function(){var e=this,t=e.$createElement;return(e._self._c||t)("ActionViewer",{attrs:{action:e.config.action}})}),[],!1,(function(e){for(let t in Xi)this[t]=Xi[t]}),null,null,null).exports;class en extends Ui{constructor(t){super(Yi,{category:"actions",action:{},description:t.description,key:t.id,name:t.name},void 0),this.config=e.observable({category:"actions",action:{}}),this.onChange=async()=>{},this.config.action=t}matches(e){return this.config.action.name.includes(e)||this.config.action.description.includes(e)}}const tn={};var nn=q({props:{config:Object,value:[String,Promise]},mixins:[K],data:()=>({value_:void 0}),async created(){this.value_=await this.value||this.config.default},methods:{onChange(e){this.$nextTick((()=>this.$emit("change",e)))}}},(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("h3",[e._v(e._s(e.t(e.config.name)))]),e._v(" "),i("div",{staticClass:"d-flex align-center"},[i("div",[i("v-autocomplete",{attrs:{inset:"",dense:"",mandatory:"",outlined:"",value:e.value_,items:e.config.options,"hide-details":"","menu-props":{maxHeight:220}},on:{change:e.onChange}})],1),e._v(" "),i("span",{staticClass:"ml-4 body-1"},[e._v(e._s(e.t(e.config.description)))])])])}),[],!1,(function(e){for(let t in tn)this[t]=tn[t]}),null,null,null).exports;class sn extends Ui{constructor(e){super(nn,e)}matches(e){return this.config.name.toLowerCase().includes(e)||this.config.description.toLowerCase().includes(e)||this.config.options.some((t=>"string"==typeof t?t.toLowerCase().includes(e):t.text.toLowerCase().includes(e)))}}class an extends sn{get value(){return fs.getApp().then((e=>e.projectConfig.get(this.config.key)))}set value(e){fs.getApp().then((t=>t.projectConfig.set(this.config.key,e)))}}const on={};var rn=q({props:{config:Object},mixins:[K]},(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"d-flex align-center"},[i("v-btn",{attrs:{color:"primary"},on:{click:e.config.onClick}},[e._v("\n\t\t"+e._s(e.t(e.config.name))+"\n\t")]),e._v(" "),i("span",{staticClass:"ml-4 body-1"},[e._v(e._s(e.t(e.config.description)))])],1)}),[],!1,(function(e){for(let t in on)this[t]=on[t]}),null,null,null).exports;class cn extends Ui{constructor(e){super(rn,{...e,key:"N/A"}),this.onChange=async()=>{}}matches(e){return this.config.name.includes(e)||this.config.description.includes(e)}}class ln extends jt{get elements(){let e;const t=this._elements.filter((t=>{if("category"===t.type)return!0;const i=this.getState(t.id).some((e=>e.matches(this.filter)));return!e&&i&&(e=t.id),i}));return e&&this.lastFilter!==this.filter&&0===this.currentState.length&&this.setDefaultSelected(e),this.lastFilter=this.filter,this.sortSidebar(t)}get currentState(){return this.selected?(this.state[this.selected]??[]).filter((e=>e.matches(this.filter))):[]}}class dn extends kt{constructor(e){super(zi,!1,!0),this.parent=e,this.sidebar=new ln([]),this.defineWindow()}async setup(){const e=await fs.getApp().then((e=>e.locales));this.addCategory("general",e.translate("windows.settings.general.name"),"mdi-circle-outline"),this.addCategory("appearance",e.translate("windows.settings.appearance.name"),"mdi-palette-outline"),this.addCategory("actions",e.translate("windows.settings.actions.name"),"mdi-keyboard-outline"),this.addCategory("developers",e.translate("windows.settings.developer.name"),"mdi-wrench-outline"),await async function(e){e.addControl(new qi({category:"appearance",name:"windows.settings.appearance.colorScheme.name",description:"windows.settings.appearance.colorScheme.description",key:"colorScheme",options:["auto","dark","light"],default:"auto",onChange:()=>{fs.getApp().then((e=>e.themeManager.updateTheme()))}})),e.addControl(new sn({category:"appearance",name:"windows.settings.appearance.darkTheme.name",description:"windows.settings.appearance.darkTheme.description",key:"darkTheme",get options(){return e.parent.themeManager.getThemes("dark").map((e=>({text:e.name,value:e.id})))},default:"bridge.default.dark",onChange:()=>{fs.getApp().then((e=>e.themeManager.updateTheme()))}})),e.addControl(new sn({category:"appearance",name:"windows.settings.appearance.lightTheme.name",description:"windows.settings.appearance.lightTheme.description",key:"lightTheme",get options(){return e.parent.themeManager.getThemes("light").map((e=>({text:e.name,value:e.id})))},default:"bridge.default.light",onChange:()=>{fs.getApp().then((e=>e.themeManager.updateTheme()))}})),e.addControl(new an({category:"appearance",name:"windows.settings.appearance.localDarkTheme.name",description:"windows.settings.appearance.localDarkTheme.description",key:"darkTheme",get options(){return e.parent.themeManager.getThemes("dark",!1).map((e=>({text:e.name,value:e.id}))).concat([{text:"None",value:"bridge.noSelection"}])},default:"bridge.noSelection",onChange:()=>{fs.getApp().then((e=>e.themeManager.updateTheme()))}})),e.addControl(new an({category:"appearance",name:"windows.settings.appearance.localLightTheme.name",description:"windows.settings.appearance.localLightTheme.description",key:"lightTheme",get options(){return e.parent.themeManager.getThemes("light",!1).map((e=>({text:e.name,value:e.id}))).concat([{text:"None",value:"bridge.noSelection"}])},default:"bridge.noSelection",onChange:()=>{fs.getApp().then((e=>e.themeManager.updateTheme()))}})),e.addControl(new Qi({category:"appearance",name:"windows.settings.appearance.sidebarRight.name",description:"windows.settings.appearance.sidebarRight.description",key:"isSidebarRight",default:!1})),e.addControl(new Qi({category:"appearance",name:"windows.settings.appearance.shrinkSidebarElements.name",description:"windows.settings.appearance.shrinkSidebarElements.description",key:"smallerSidebarElements",default:!1})),e.addControl(new qi({category:"developers",name:"windows.settings.developer.simulateOS.name",description:"windows.settings.developer.simulateOS.description",key:"simulateOS",options:["auto","win32","darwin","linux"],default:"auto"})),e.addControl(new Qi({category:"developers",name:"windows.settings.developer.devMode.name",description:"windows.settings.developer.devMode.description",key:"isDevMode"}));const t=await fs.getApp().then((e=>e.locales));e.addControl(new sn({category:"general",name:"windows.settings.general.language.name",description:"windows.settings.general.language.description",key:"locale",get options(){return t.getLanguages().map((e=>({text:e[1],value:e[0]})))},default:t.getCurrentLanguage(),onChange:e=>{t.selectLanguage(e)}})),e.addControl(new Qi({category:"general",name:"windows.settings.general.collaborativeMode.name",description:"windows.settings.general.collaborativeMode.description",key:"fullLightningCacheRefresh",default:!0})),e.addControl(new Qi({category:"general",name:"windows.settings.general.packSpider.name",description:"windows.settings.general.packSpider.description",key:"enablePackSpider",default:!0})),e.addControl(new Qi({category:"general",name:"windows.settings.general.openLinksInBrowser.name",description:"windows.settings.general.openLinksInBrowser.description",key:"openLinksInBrowser",default:!1})),e.addControl(new cn({category:"general",name:"windows.settings.general.resetBridgeFolder.name",description:"windows.settings.general.resetBridgeFolder.description",onClick:async()=>{await g("bridgeBaseDir"),location.reload()}}));const i=await fs.getApp();Object.values(i.actionManager.state).forEach((t=>{e.addControl(new en(t))}))}(this),this.sidebar.setDefaultSelected()}addCategory(e,t,i){void 0===H[e]&&(H[e]={}),this.sidebar.addElement(new Pt({color:"primary",text:t,icon:i,id:e}),[])}addControl(e){const t=this.sidebar.state[e.config.category];if(!t)throw new Error(`Undefined settings category: ${e.config.category}`);t.push(e)}static saveSettings(){return new Promise((e=>{fs.ready.once((async t=>{await t.fileSystem.writeJSON("data/settings.json",H),e()}))}))}static async loadSettings(t){try{!function(t){for(const i in t)e.set(H,i,t[i])}(await t.fileSystem.readJSON("data/settings.json"))}catch{}}async open(){this.isVisible||(this.sidebar.removeElements(),await this.setup(),super.open())}async close(){super.close();const e=await fs.getApp();e.windows.loadingWindow.open(),await dn.saveSettings(),e.windows.loadingWindow.close()}}const hn={};var pn=q({name:"ChangelogComponent",components:{BaseWindow:me},props:["currentWindow"],data(){return this.currentWindow},methods:{onClose(){this.currentWindow.close()}}},(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("BaseWindow",{attrs:{windowTitle:"windows.changelogWindow.title",isVisible:e.isVisible,hasMaximizeButton:!1,isFullscreen:!1,width:600,height:600},on:{closeWindow:e.onClose},scopedSlots:e._u([{key:"default",fn:function(){return[i("div",{staticClass:"mt-4 mb-2 d-flex align-center"},[i("v-icon",{staticClass:"mr-2",attrs:{color:"primary",large:""}},[e._v("mdi-update")]),e._v(" "),i("h1",[e._v("v"+e._s(e.$data.version))])],1),e._v(" "),i("v-divider",{staticClass:"mb-4"}),e._v(" "),i("div",{staticClass:"changelog",domProps:{innerHTML:e._s(e.$data.changelog)}})]},proxy:!0}])})}),[],!1,(function(e){for(let t in hn)this[t]=hn[t]}),null,null,null).exports;class un extends kt{constructor(){super(pn),this.defineWindow()}async open(){const e=await fs.getApp();e.windows.loadingWindow.open(),await fetch("/editor//changelog.html").then((e=>e.text())).then((e=>{this.changelog=e,this.version="2.0.0-alpha.5"})),e.windows.loadingWindow.close(),super.open()}}class mn{constructor(e){this.app=e,this.projectChooser=new Ni,this.packExplorer=new $i,this.createProject=new Pi,this.loadingWindow=new ti,this.filePicker=new Fi,this.createPreset=new ri,this.extensionStore=new Xt,this.browserUnsupported=new _t,this.changelogWindow=new un,this.settings=new dn(e)}}class gn extends V{async setup(e){e.windows.loadingWindow.open("windows.loadingWindow.titles.downloadingData"),await e.fileSystem.fired,await this.isUpdateAvailable(e.fileSystem)&&(console.log("Downloading new data..."),await this.load(e.fileSystem),console.log("Data updated!")),this.dispatch(),e.windows.loadingWindow.close()}async isUpdateAvailable(e){let t,i;try{t=await fetch("/editor/data/version.txt").then((e=>e.text()))}catch(n){return!1}try{i=await e.readFile("data/packages/version.txt").then((e=>e.text()))}catch{return!0}return"'"===t[0]&&"'"===t[t.length-1]&&(t=t.slice(1,-1)),"'"===i[0]&&"'"===i[i.length-1]&&(i=i.slice(1,-1)),u.compare(t,i,">")}async load(e){try{await e.unlink("data/packages")}catch{}const t=await fetch("/editor/data/package.zip").then((e=>e.arrayBuffer())).then((e=>f.loadAsync(e))),i=[];t.forEach(((t,n)=>{i.push(new Promise((async i=>{if(n.dir)return i();await e.mkdir(D(`data/packages/${t}`),{recursive:!0}),await e.writeFile(`data/packages/${t}`,await n.async("blob")),i()})))})),await Promise.all(i)}}class fn{constructor(){fs.ready.once((e=>this.fileSystem=e.fileSystem)),fs.eventSystem.on("projectChanged",(()=>{this.data=void 0}))}async loadData(){const e=await fs.getApp();try{this.data=await this.fileSystem.readJSON(`projects/${e.selectedProject}/bridge/config.json`)}catch{this.data={}}}async getConfig(){return this.data||await this.loadData(),this.data}async get(e){return this.data||await this.loadData(),this.data[e]}async set(e,t){const i=await fs.getApp();this.data||await this.loadData(),this.data[e]=t,await this.fileSystem.writeJSON(`projects/${i.selectedProject}/bridge/config.json`,this.data,!0)}}const wn=["Control","Alt","Meta"];class vn{constructor(){this.state=e.observable({}),this.lastTimeStamp=0,document.addEventListener("keydown",(e=>{const{key:t,ctrlKey:i,altKey:n,metaKey:s,shiftKey:a}=e;if(wn.includes(t))return;const o=Ht({key:t,ctrlKey:"darwin"===te()?s:i,altKey:n,metaKey:"darwin"===te()?i:s,shiftKey:a}),r=this.state[o];if(r&&this.lastTimeStamp+100<Date.now()){if(r.prevent(e.target))return;this.lastTimeStamp=Date.now(),e.preventDefault(),e.stopImmediatePropagation(),r.trigger()}}))}create(t){const i=new Kt(this,t),n=i.toStrKeyCode();if(this.state[n])throw new Error(`KeyBinding with keyCode "${n}" already exists!`);return e.set(this.state,n,i),i}disposeKeyBinding(t){e.delete(this.state,t)}}let bn;const yn=new Map([["@bridge/ui",({uiStore:e})=>({...e?.UI,BuiltIn:{BaseWindow:me,SidebarWindow:Bt}})],["@bridge/sidebar",({disposables:e})=>({create(t){const i=ut(t);return e.push(i),i},getSelected(){throw new Error("This function no longer works with bridge. v2")},onChange(){throw new Error("This function no longer works with bridge. v2")},select:X})],["@bridge/notification",({disposables:e})=>({create(t){const i=Ne(t);return e.push(i),i},createError(t){const i=Re(t);return e.push(i),i}})],["@bridge/fs",({})=>new Promise((e=>{fs.ready.once((t=>{const i={};for(const e of Object.getOwnPropertyNames(Object.getPrototypeOf(t.fileSystem)))"constructor"!==e&&"function"==typeof t.fileSystem[e]&&(i[e]=t.fileSystem[e].bind(t.fileSystem));e(i)}))}))],["@bridge/path",()=>B],["@bridge/env",({})=>({APP_VERSION:"2.0.0-alpha.5",getCurrentBP:()=>`projects/${fs.instance.selectedProject}/BP`,getCurrentRP:()=>`projects/${fs.instance.selectedProject}/RP`,getCurrentProject:()=>`projects/${fs.instance.selectedProject}`,getProjectPrefix:()=>fs.getApp().then((e=>e.projectConfig.get("prefix"))),getProjectTargetVersion:()=>fs.getApp().then((e=>e.projectConfig.get("targetVersion"))),getProjectAuthor:()=>fs.getApp().then((e=>e.projectConfig.get("author"))),getContext(){}})],["@bridge/globals",async({})=>{try{if(void 0===bn)return new Promise((e=>{fs.ready.once((async t=>{bn=await t.fileSystem.readJSON(`projects/${t.selectedProject}/globals.json`),e(bn)}))}))}catch{return{}}return{...bn}}],["@bridge/utils",({})=>({openExternal:e=>window.open(e,"_blank")})],["@bridge/file-importer",({disposables:e})=>{throw new Error("Module not yet supported on bridge. v2")}],["@bridge/fetch-definition",({})=>({fetchDefinition:async(e,t,i,n=!1)=>{const s=(await fs.getApp()).project?.packIndexer;if(!s)return[];return(await Promise.all(t.map((t=>s.service?.find(e,t,[i],n)??[])))).flat()}})],["@bridge/windows",({})=>({BaseWindow:kt,createWindow:(e,t)=>ee(e,t),createInformationWindow:(e,t)=>xe(e,t),createInputWindow:(e,t,i,n,s)=>function(e,t,i,n,s){const a=ee(ve,{windowTitle:e,label:t,inputValue:i,expandText:n??"",onConfirmCb:s});return a.open(),a}(e,t,i,n,s),createDropdownWindow:(e,t,i,n,s)=>function(e,t,i,n,s){const a=ee(ye,{windowTitle:e,placeholder:t,selectedValue:n,items:i,onConfirmCb:s});return a.open(),a}(e,t,i,n,s),createConfirmWindow:(e,t,i,n,s)=>_e(e,t,i,n,s)})],["@bridge/toolbar",async({disposables:e})=>({ToolbarCategory:gt,actionManager:(await fs.getApp()).actionManager,addCategory(t){fs.toolbar.addCategory(t),e.push(t)}})],["@bridge/compare-versions",()=>({compare:u.compare})]]);function kn(e=[],t){return function(e=[],t,i=yn){return async n=>{const s=i.get(n);if(s)return await s({uiStore:t,disposables:e})}}(e,t)}async function Sn(e,t,i){for await(const n of e.values())if("directory"===n.kind)await Sn(n,t,i);else if("file"===n.kind){const e=await n.getFile();await xn(await e.text(),t,i)}}function xn(e,t,i){return U(e,kn(i,t),["require"])}async function _n(t,i,n,s="ui"){let a=[];try{a=await t.readdir(s,{withFileTypes:!0})}catch{}await Promise.all(a.map((a=>"file"===a.kind?async function(t,i,n,s){if(".vue"!==A(i))return void Re(new Error(`NOT A VUE FILE: Provided UI file "${$(i)}" is not a vue file!`));const a=new Promise((async(a,o)=>{const{template:r,script:c,styles:l,errors:d}=w.parseComponent(await(await t.readFile(i)).text());if(d.length>0)return d.forEach((e=>Re(e))),o(d[0]);const h={name:$(i),...await xn(c?.content?.replace("export default","return")??"",n,s),...e.compile(r?.content??'<p color="red">NO TEMPLATE DEFINED</p>')};h.components=Object.assign(h.components??{},v),l.forEach((e=>s.push(function(e){const t=document.createElement("style");return t.innerHTML=e,document.head.appendChild(t),{dispose:()=>{document.head.contains(t)&&document.head.removeChild(t)}}}(e.content)))),a(h)}));n.set(I("ui",i).split(/\\|\//g),(()=>a))}(t,`${s}/${a.name}`,i,n):_n(t,i,n,`${s}/${a.name}`))))}class Cn{constructor(e,i,n,s=!1){this.parent=e,this.manifest=i,this.baseDirectory=n,this._isGlobal=s,this._isActive=!1,this.disposables=[],this.uiStore=function(){let e={};return t(),{get UI(){return e},set(t,i){let n=e;for(;t.length>1;){const e=t.shift();void 0===n[e]&&(n[e]={}),n=n[e]}const s=t.shift();n[$(s,A(s))]=i},dispose(){e=null}}}(),this.fileSystem=new R(this.baseDirectory)}get isActive(){return this._isActive}async activate(){this._isActive=!0;const e=await fs.getApp(),t=(await e.fileSystem.baseDirectory.resolve(this.baseDirectory)??[]).join("/");for(const n of this.manifest.dependencies??[])if(!(await this.parent.activate(n)))return void Re(new Error(`Failed to activate extension "${this.manifest.name}": Failed to load one of its dependencies`));Object.entries(this.manifest.compiler?.plugins??{})?.forEach((([i,n])=>{const s=e.project?.compilerManager?.addCompilerPlugin(i,`${t}/${n}`);s&&this.disposables.push(s)})),this.disposables.push(e.windows.createPreset.addPresets(`${t}/presets`));try{await tt(await this.baseDirectory.getDirectoryHandle("themes"),(t=>e.themeManager.loadTheme(t,this.isGlobal,this.disposables)))}catch{}let i;try{i=await this.baseDirectory.getDirectoryHandle("scripts")}catch{}await Promise.all([_n(this.fileSystem,this.uiStore,this.disposables).then((async()=>i?await Sn(i,this.uiStore,this.disposables):void 0))])}deactivate(){this.disposables.forEach((e=>e.dispose())),this._isActive=!1}get version(){return this.manifest.version}get isGlobal(){return this._isGlobal}forStore(e){const t=new Qt(e,this.manifest);return t.setInstalled(),t}}class Pn extends V{constructor(){super(2),this.globalExtensions=new Map,this.localExtensions=new Map,this._loadedInstalledExtensions=new V(2)}get extensions(){return new Map([...this.globalExtensions.entries(),...this.localExtensions.entries()])}get loadedInstalledExtensions(){return new Promise((e=>this._loadedInstalledExtensions.once(e)))}async getInstalledExtensions(){return await this.loadedInstalledExtensions,new Map(this.extensions.entries())}async loadExtensions(e,t=!1){const i=[];for await(const n of e.values())".DS_Store"!==n.name&&i.push(this.loadExtension(e,n,!1,t));await Promise.all(i),this._loadedInstalledExtensions.dispatch();for(const[n,s]of t?this.globalExtensions:this.localExtensions)s.isActive||await s.activate();this.dispatch()}async loadExtension(e,t,i=!1,n=!1){let s;return"file"===t.kind&&t.name.endsWith(".zip")?(s=await this.unzipExtension(t,await e.getDirectoryHandle(t.name.replace(".zip",""),{create:!0}),n),await e.removeEntry(t.name)):"directory"===t.kind&&(s=await this.loadManifest(t,n)),i&&s&&await s.activate(),s}async unzipExtension(e,t,i){const n=new R(t),s=await e.getFile(),a=await f.loadAsync(await s.arrayBuffer()),o=[];return a.forEach(((e,t)=>{o.push(new Promise((async i=>{if(t.dir)return i();"."!==D(e)&&await n.mkdir(D(e),{recursive:!0}),await n.writeFile(e,await t.async("blob")).catch((()=>console.log(e))),i()})))})),await Promise.all(o),await this.loadManifest(t,i)}async loadManifest(e,t){let i;try{i=await e.getFileHandle("manifest.json")}catch{return}const n=await i.getFile(),s=await n.text().then((e=>JSON.parse(e)));if(s.id){const i=new Cn(this,s,e,t);return(t?this.globalExtensions:this.localExtensions).set(s.id,i),i}Re(new Error(`Failed to load extension "${s.name??e.name}": Invalid extension ID`))}async activate(e){const t=await this.extensions.get(e);return t?(t.isActive||await t.activate(),!0):(Re(new Error(`Failed to activate extension with ID "${e}": Extension not found`)),!1)}deactivateAllLocal(){for(const[e,t]of this.localExtensions)t.deactivate(),this.localExtensions.delete(e)}}class jn extends L{constructor(){super(),window.addEventListener("resize",i((()=>this.dispatch()),100))}dispatch(){super.dispatch([window.innerWidth,window.innerHeight])}}class Tn extends Ve{constructor(){super({message:"sidebar.notifications.installApp.message",color:"primary",icon:"mdi-download",textColor:"white",isVisible:!1}),window.addEventListener("beforeinstallprompt",(e=>this.onInstallPrompt(e))),this.addClickHandler((()=>this.prompt()))}onInstallPrompt(e){e.preventDefault(),this.installEvent=e,this.show()}prompt(){this.installEvent?(this.installEvent.prompt(),this.installEvent.userChoice.then((e=>{"accepted"===e.outcome&&this.dispose()}))):this.dispose()}}const Fn={data:()=>({isProjectMixinReady:!1}),async mounted(){const e=await fs.getApp();await e.projectManager.fired,this.isProjectMixinReady=!0},computed:{project(){if(!this.isProjectMixinReady)return;const e=fs.instance.projectManager;return e.state[e._selectedProject]}}};const En={};var Wn=q({name:"welcome-screen",mixins:[K,Fn,hi,ii],components:{ActionViewer:Rt},async mounted(){const e=await fs.getApp();this.actions=["bridge.action.newProject","bridge.action.newFile","bridge.action.openFile","bridge.action.openSettings"].map((t=>e.actionManager.state[t])),await e.projectManager.fired,this.projectManager=e.projectManager},data:()=>({actions:[],projectManager:null}),computed:{files(){return this.project?this.project.recentFiles.elements:[]},projects(){return this.projectManager?this.projectManager.recentProjects.elements.filter((({path:e})=>e!==this.projectManager.selectedProject)):[]},maySwitchProjects(){return this.isPackIndexerReady&&this.isCompilerReady}},methods:{openFile(e){fs.getApp().then((t=>t.project.openFile(e)))},selectProject(e){fs.getApp().then((t=>t.projectManager.selectProject(e)))}}},(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"d-flex flex-column justify-center align-center px-4",style:"padding-top: 14vh;"},[i("img",{staticClass:"mb-4",staticStyle:{height:"128px",width:"128px"},attrs:{alt:"bridge. Logo",src:"/editor/assets/logo_high_res.e67cdc02.png"}}),e._v(" "),i("h1",{staticClass:"text-h3 text-center"},[e._v(e._s(e.t("welcome.title")))]),e._v(" "),i("h2",{staticClass:"text-h6 mb-12 text-center"},[e._v(e._s(e.t("welcome.subtitle")))]),e._v(" "),i("v-row",{staticStyle:{"flex-wrap":"nowrap",width:"60vw"}},[e.actions.length>0?i("v-col",{attrs:{tag:"ul"}},[i("p",[e._v(e._s(e.t("welcome.quickActions")))]),e._v(" "),i("v-divider",{staticClass:"mb-2"}),e._v(" "),e._l(e.actions,(function(t){return i("li",{directives:[{name:"ripple",rawName:"v-ripple"}],key:t.id,staticClass:"d-flex rounded-lg pa-1 clickable",on:{click:function(){return t.trigger()}}},[i("v-icon",{attrs:{color:"accent",medium:""}},[e._v(e._s(t.icon))]),e._v(" "),i("span",{attrs:{color:"text--primary"}},[e._v(e._s(e.t(t.name)))]),e._v(" "),i("v-spacer"),e._v(" "),t.keyBinding?i("span",{staticClass:"text--secondary"},[e._v("\n\t\t\t\t\t"+e._s(t.keyBinding.toStrKeyCode())+"\n\t\t\t\t")]):e._e()],1)}))],2):e._e(),e._v(" "),e.$vuetify.breakpoint.smAndUp&&e.files.length>0?i("v-col",{attrs:{tag:"ul"}},[i("p",[e._v(e._s(e.t("welcome.recentFiles")))]),e._v(" "),i("v-divider",{staticClass:"mb-2"}),e._v(" "),e._l(e.files,(function(t){return i("li",{directives:[{name:"ripple",rawName:"v-ripple"}],key:t.path,staticClass:"d-flex rounded-lg pa-1 clickable",on:{click:function(i){return e.openFile(t.path)}}},[i("v-icon",{attrs:{color:t.color||"error",medium:""}},[e._v("\n\t\t\t\t\t"+e._s(t.icon)+"\n\t\t\t\t")]),e._v(" "),i("span",{staticClass:"primary-text"},[e._v(e._s(t.name))])],1)}))],2):e._e(),e._v(" "),e.$vuetify.breakpoint.mdAndUp&&e.projects.length>0?i("v-col",{class:{disabled:!e.maySwitchProjects},attrs:{tag:"ul"}},[i("p",[e._v(e._s(e.t("welcome.recentProjects")))]),e._v(" "),e.maySwitchProjects?i("v-divider",{staticClass:"mb-2"}):i("v-progress-linear",{staticClass:"mb-1",attrs:{rounded:"",indeterminate:""}}),e._v(" "),e._l(e.projects,(function(t){return i("li",{directives:[{name:"ripple",rawName:"v-ripple",value:e.maySwitchProjects,expression:"maySwitchProjects"}],key:t.name,class:{"d-flex rounded-lg pa-1":!0,clickable:e.maySwitchProjects},on:{click:function(i){e.maySwitchProjects&&e.selectProject(t.path)}}},[i("div",{staticClass:"d-flex align-center"},[t.imgSrc?i("img",{staticClass:"mr-1 pack-icon",attrs:{src:t.imgSrc,alt:t.name+" Logo"}}):e._e(),e._v(" "),i("span",{staticClass:"primary-text"},[e._v(e._s(t.path))])])])}))],2):e._e()],1)],1)}),[],!1,(function(e){for(let t in En)this[t]=En[t]}),"86382e9a",null,null).exports;class Mn{constructor(e,i){this.parent=e,this.path=i,this.uuid=t(),this.hasRemoteChange=!1,this.isUnsaved=!1}setIsUnsaved(e){this.isUnsaved=e}static is(e){return!1}updateParent(e){this.parent=e}get name(){return this.path.split(/\\|\//g).pop()}getPath(){return this.path}getPackPath(){return this.path.replace(`projects/${fs.instance.selectedProject}/`,"")}get icon(){return z.get(this.getPackPath())?.icon??"mdi-file-outline"}get iconColor(){return yt.get(this.getPath())?.color}get isSelected(){return this.parent.selectedTab===this}select(){return this.parent.select(this),this}close(){this.parent.close(this)}isFor(e){return e===this.path}onActivate(){}onDeactivate(){}onDestroy(){}async toOtherTabSystem(e=!0){const t=(await fs.getApp()).projectManager.currentProject?.tabSystems,i=t[0]===this.parent?t[0]:t[1],n=t[0]===this.parent?t[1]:t[0];this.updateParent(n),e?(n.add(this,!0),i.remove(this,!1)):(await n.openedFiles.add(this.getPath()),await i.openedFiles.remove(this.getPath()),n.select(this),this.isSelected&&i.select(i.tabs[0]))}onContextMenu(e){let t=[];this.parent.tabs.length>1&&t.push({name:"actions.moveToSplitScreen.name",description:"actions.moveToSplitScreen.description",icon:"mdi-arrow-split-vertical",onTrigger:async()=>{this.toOtherTabSystem()}}),async function(e,t){e.preventDefault(),e.stopImmediatePropagation();const i=await fs.getApp(),n=new Jt(i);t.forEach((e=>n.create(e))),i.contextMenu.show(e,n)}(e,[...t,{name:"actions.closeTab.name",description:"actions.closeTab.description",icon:"mdi-close",onTrigger:()=>{this.close()}},{name:"actions.closeAll.name",description:"actions.closeAll.description",icon:"mdi-table-row",onTrigger:()=>{this.parent.closeTabs((()=>!0))}},{name:"actions.closeTabsToRight.name",description:"actions.closeTabsToRight.description",icon:"mdi-chevron-right",onTrigger:()=>{let e=!0;this.parent.closeTabs((t=>(t===this&&(e=!1),e)))}},{name:"actions.closeAllSaved.name",description:"actions.closeAllSaved.description",icon:"mdi-content-save-outline",onTrigger:()=>{this.parent.closeTabs((e=>!e.isUnsaved))}},{name:"actions.closeOtherTabs.name",description:"actions.closeOtherTabs.description",icon:"mdi-unfold-more-vertical",onTrigger:()=>{this.parent.closeTabs((e=>e!==this))}}])}copy(){document.execCommand("copy")}cut(){document.execCommand("cut")}paste(){}}const An=[],Dn={};var Bn=q({name:"TextTab",props:{tab:Object,id:{type:Number,default:0}},computed:{isDarkMode(){return this.$vuetify.theme.dark},fontSize:()=>"14px",fontFamily:()=>"14px"},activated(){this.updateEditor()},deactivated(){this.tab.editorInstance?.dispose(),this.tab.editorInstance=void 0},mounted(){this.updateEditor()},methods:{updateEditor(){n.typescript.javascriptDefaults.setCompilerOptions({target:n.typescript.ScriptTarget.ESNext,allowNonTsExtensions:!0,noLib:!0,alwaysStrict:!0}),this.tab.editorInstance||(An[this.id]?.dispose(),An[this.id]=s.create(this.$refs.monacoContainer,{theme:"bridgeMonacoDefault",roundedSelection:!1,autoIndent:"full",fontSize:this.fontSize,tabSize:4}),this.tab.receiveEditorInstance(An[this.id])),An[this.id]?.layout()}},watch:{tab(){this.tab.receiveEditorInstance(An[this.id])},fontSize(e){this.monacoEditor.updateOptions({fontSize:this.fontSize})},fontFamily(e){this.monacoEditor.updateOptions({fontFamily:this.fontFamily})}}},(function(){var e=this.$createElement;return(this._self._c||e)("div",{ref:"monacoContainer",staticStyle:{height:"calc(100% - 48px)",width:"100%"}})}),[],!1,(function(e){for(let t in Dn)this[t]=Dn[t]}),null,null,null).exports;class $n extends Mn{constructor(){super(...arguments),this.component=Bn,this.disposables=[]}setIsUnsaved(e){super.setIsUnsaved(e)}receiveEditorInstance(e){this.editorInstance=e,this.editorInstance.layout()}async onActivate(){const e=await fs.getApp();if(this.editorInstance?.focus(),this.editorInstance?.layout(),void 0===this.editorModel){const t=await e.fileSystem.readFile(this.path),i=await t.text();this.editorModel=s.createModel(i,void 0,b.file(this.path)),this.loadEditor()}else this.loadEditor();this.disposables.push(e.windowResize.on((()=>this.editorInstance?.layout()))),this.disposables.push(this.editorModel?.onDidChangeContent((e=>{this.isUnsaved=!0}))),this.disposables.push(this.editorInstance?.onDidFocusEditorText((()=>{this.parent.setActive(!0)})))}onDeactivate(){this.editorViewState=this.editorInstance?.saveViewState()??void 0,this.disposables.forEach((e=>e?.dispose()))}onDestroy(){this.disposables.forEach((e=>e?.dispose())),this.editorModel?.dispose(),this.editorViewState=void 0}updateParent(e){super.updateParent(e),this.editorInstance=void 0}loadEditor(){this.editorModel&&this.editorInstance?.setModel(this.editorModel),this.editorViewState&&this.editorInstance?.restoreViewState(this.editorViewState)}async save(){const e=await fs.getApp();this.isUnsaved=!1,this.editorModel&&await e.fileSystem.writeFile(this.path,this.editorModel.getValue())}async paste(){this.editorInstance?.trigger("keyboard","paste",{text:await navigator.clipboard.readText()})}}function In(e){return new Promise(((t,i)=>{const n=new FileReader;fs.ready.once((async s=>{try{const a=await s.fileSystem.getFileHandle(e),o=await a.getFile();n.addEventListener("load",(()=>{t(n.result)})),n.addEventListener("error",i),n.readAsDataURL(o)}catch{i(`File does not exist: "${e}"`)}}))}))}const On={};var Ln=q({name:"ImageTab",props:{tab:Object}},(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"d-flex align-center justify-center",staticStyle:{height:"calc(100% - 48px)"},on:{click:function(t){return e.tab.parent.setActive(!0)}}},[i("img",{staticClass:"img-preview",attrs:{src:e.tab.dataUrl,alt:e.tab.path}})])}),[],!1,(function(e){for(let t in On)this[t]=On[t]}),"6e831254",null,null).exports;class Vn extends Mn{constructor(){super(...arguments),this.component=Ln,this.dataUrl=void 0}static is(e){return e.endsWith(".png")||e.endsWith(".jpg")||e.endsWith(".jpeg")}async onActivate(){this.dataUrl=await In(this.path)}get icon(){return"mdi-file-image-outline"}get iconColor(){return"primary"}save(){}}const Nn={};var Rn=q({name:"Confirm",mixins:[K],components:{BaseWindow:me},props:["currentWindow"],data(){return this.currentWindow},methods:{onCancel(){this.currentWindow.cancel()},onNoSave(){this.currentWindow.noSave()},onSave(){this.currentWindow.save()}}},(function(){var e=this,t=e.$createElement,i=e._self._c||t;return e.shouldRender?i("BaseWindow",{attrs:{windowTitle:"windows.unsavedFile.title",isVisible:e.isVisible,isPersistent:!1,hasMaximizeButton:!1,isFullscreen:!1,width:440,height:130,hasCloseButton:!1},scopedSlots:e._u([{key:"default",fn:function(){return[i("p",{staticClass:"mt-2"},[e._v(e._s(e.t("windows.unsavedFile.description")))])]},proxy:!0},{key:"actions",fn:function(){return[i("v-spacer"),e._v(" "),i("v-btn",{on:{click:e.onCancel}},[i("span",[e._v(e._s(e.t("windows.unsavedFile.cancel")))])]),e._v(" "),i("v-btn",{attrs:{color:"error"},on:{click:e.onNoSave}},[i("span",[e._v(e._s(e.t("windows.unsavedFile.noSave")))])]),e._v(" "),i("v-btn",{attrs:{color:"primary"},on:{click:e.onSave}},[i("span",[e._v(e._s(e.t("windows.unsavedFile.save")))])])]},proxy:!0}],null,!1,3257870159)}):e._e()}),[],!1,(function(e){for(let t in Nn)this[t]=Nn[t]}),null,null,null).exports;class zn extends kt{constructor(e){super(Rn,!0,!1),this.tab=e,this.defineWindow(),this.open()}async noSave(){this.close();const e=await fs.getApp();await(e.tabSystem?.close(this.tab,!1))}async save(){this.close();const e=await fs.getApp();await(e.tabSystem?.save(this.tab)),await(e.tabSystem?.close(this.tab,!1))}async cancel(){this.close()}}class Un{constructor(e=1/0,t){this.maxSize=e,this.array=[];for(const i of t??[])this.add(i)}add(e,t=this.isEquals.bind(this)){const i=this.array.findIndex((i=>t(i,e)));return i>-1?(this.array.splice(i,1),this.array.unshift(e),this):(this.array.length>=this.maxSize&&this.array.pop(),this.array.unshift(e),this)}remove(e,t=this.isEquals.bind(this)){const i=this.array.findIndex((i=>t(i,e)));return i>-1&&this.array.splice(i,1),this}isEquals(e,t){return e===t}toJSON(){return JSON.stringify(this.array)}[Symbol.iterator](){return this.array.values()}get size(){return this.maxSize}get elementCount(){return this.array.length}get elements(){return[...this.array]}}class Hn extends V{constructor(t,i,n){super(),this.app=t,this.savePath=n,e.set(this,"queue",new Un(i)),this.setup()}async setup(){await this.app.fileSystem.fired;let e=[];try{e=await this.app.fileSystem.readJSON(this.savePath)}catch{}e.forEach((e=>this.queue.add(e))),this.dispatch(this.queue)}isEquals(e,t){return e===t}async add(e){await this.fired,this.queue.add(e,this.isEquals.bind(this)),await this.saveQueue()}async remove(e){await this.fired,this.queue.remove(e,this.isEquals.bind(this)),await this.saveQueue()}async saveQueue(){await this.app.fileSystem.mkdir(D(this.savePath),{recursive:!0}),await this.app.fileSystem.writeFile(this.savePath,this.queue.toJSON())}get elements(){return this.queue.elements}}class Kn extends Hn{constructor(e,t,i){super(t,1/0,i),this.on((t=>t.elements.forEach(((i,n)=>e.open(i,n+1===t.elementCount)))))}}class qn{constructor(e,i=0){this.project=e,this.uuid=t(),this.tabs=[],this._selectedTab=void 0,this.tabTypes=[Vn,$n],this._isActive=!0,this.openedFiles=new Kn(this,e.app,`projects/${e.name}/bridge/openedFiles_${i}.json`)}get isActive(){return this._isActive}get shouldRender(){return this.tabs.length>0}get selectedTab(){return this._selectedTab}open(e,t=!0){for(const n of this.tabs)if(n.isFor(e))return t?n.select():n;const i=this.getTabFor(e);return this.add(i,t),i}getTabFor(e){for(const t of this.tabTypes)if(t.is(e))return new t(this,e);return new $n(this,e)}add(e,t=!0){return this.tabs=[...this.tabs,e],this.openedFiles.add(e.getPath()),t&&e.select(),e}remove(e,t=!0){return e.onDeactivate(),this.tabs=this.tabs.filter((t=>t!==e)),t&&e.onDestroy(),e===this._selectedTab&&this.select(this.tabs[0]),this.openedFiles.remove(e.getPath()),e}close(e=this.selectedTab,t=!0){e&&(t&&e.isUnsaved?new zn(e):this.remove(e))}closeByPath(e){const t=this.tabs.find((t=>t.isFor(e)));t&&this.close(t)}select(t){this._selectedTab?.onDeactivate(),this._selectedTab=t,this.setActive(!!t),t&&e.nextTick((()=>this._selectedTab?.onActivate()))}async save(e=this.selectedTab){if(!e)return;const t=await fs.getApp();t.windows.loadingWindow.open(),await e.save(),await this.project.updateFile(e.getPath().replace(`projects/${this.project.name}/`,"")),await this.project.recentFiles.add({path:e.getPath(),name:e.name,color:e.iconColor,icon:e.icon}),e===this.selectedTab&&fs.eventSystem.dispatch("refreshCurrentContext",e.getPath().replace(`projects/${this.project.name}/`,"")),t.windows.loadingWindow.close()}activate(){this.selectedTab?.onActivate()}deactivate(){this.selectedTab?.onDeactivate()}setActive(e,t=!0){t&&this.project.setActiveTabSystem(this,!e),this._isActive=e,e&&fs.eventSystem.dispatch("currentTabSwitched",this._selectedTab?.getPackPath())}getTab(e){return this.tabs.find((t=>t.isFor(e)))}closeTabs(e){const t=[...this.tabs].reverse();for(const i of t)e(i)&&i.close()}has(e){for(const t of this.tabs)if(e(t))return!0;return!0}get currentComponent(){return this._selectedTab?.component??Wn}get hasUnsavedTabs(){return this.tabs.some((e=>e.isUnsaved))}}class Jn extends Hn{constructor(e,t){super(e,5,t)}isEquals(e,t){return e.path===t.path}}async function Gn(e){try{return await In(`${e}/BP/pack_icon.png`)}catch{}try{return await In(`${e}/RP/pack_icon.png`)}catch{}try{return await In(`${e}/SP/pack_icon.png`)}catch{}}function Zn(e,t,i){return e.fileSystem.readJSON(`projects/${t}/${i}/manifest.json`)}async function Qn(e,t){const i=await e.fileSystem.readdir(`projects/${t}`,{withFileTypes:!0}),n=[];for(const s of i){if("directory"!==s.kind)continue;const i=yt.get(`projects/${t}/${s.name}`);if(!i)continue;let a={};try{a=await Zn(e,t,s.name)}catch{}n.push({...i,version:a?.header?.version??[1,0,0]})}return n}class Xn extends V{constructor(e){super(),this.taskOptions=e,this.worker=null,this.workerClass=null,this._service=null,this.task=null}async activate(e){if(!this.worker){if(this.createWorker(),!this.worker)throw new Error("Method WorkerManager.createWorker() doesn't create worker");this.workerClass=y(this.worker)}const t=await fs.getApp();this.task=t.taskManager.create(this.taskOptions),this.resetSignal(),await this.start(e).then((e=>this.dispatch(e)))}deactivate(){this.worker?.terminate(),this.task?.dispose(),this.worker=null,this.workerClass=null}}function Yn(){return new Worker("/editor/assets/Main.c50b1bcc.js",{type:"module"})}class es extends Xn{constructor(e,t){super({icon:"mdi-flash-outline",name:"taskManager.tasks.packIndexing.title",description:"taskManager.tasks.packIndexing.description"}),this.app=e,this.baseDirectory=t}createWorker(){this.worker=new Yn}deactivate(){super.deactivate()}async start(e){console.time("[TASK] Indexing Packs (Total)"),this._service=await new this.workerClass({projectDirectory:this.baseDirectory,baseDirectory:this.app.fileSystem.baseDirectory,disablePackSpider:!H?.general?.enablePackSpider,noFullLightningCacheRefresh:!e&&!H?.general?.fullLightningCacheRefresh}),this._service.on(k((([e,t])=>{e===t&&this.task?.complete(),this.task?.update(e,t)})),!1);const t=await this._service.start();return console.timeEnd("[TASK] Indexing Packs (Total)"),t}async updateFile(e){await this.service.updateFile(e)}readdir(e,...t){return this.service.readdir(e)}get service(){return this._service}}function ts(){return new Worker("/editor/assets/Main.636c20a1.js",{type:"module"})}class is extends Xn{constructor(e,t,i){super({icon:"mdi-cogs",name:"taskManager.tasks.compiler.title",description:"taskManager.tasks.compiler.description"}),this.parent=e,this.project=t,this.config=i,this.ready=new V}createWorker(){this.worker=new ts}async deactivate(){await super.deactivate(),this.parent.remove(this.config)}async start(e){this.ready.dispatch(!1);const t=await fs.getApp();console.time("[TASK] Compiling project (total)"),this._service?(await this._service.updateMode(e),await this._service.updatePlugins(this.parent.getCompilerPlugins())):this._service=await new this.workerClass({projectDirectory:this.project.baseDirectory,baseDirectory:t.fileSystem.baseDirectory,config:this.config,mode:e,plugins:this.parent.getCompilerPlugins()}),this._service.on(k((([e,t])=>{e===t&&this.task?.complete(),this.task?.update(e,t)})),!1);let i=await(t.project?.packIndexer.fired)??[];"build"===e&&(i=await(t.project?.packIndexer.service.getAllFiles())??[]),await this._service.start(i),this.ready.dispatch(!0),console.timeEnd("[TASK] Compiling project (total)")}async updateFile(e){if(!this._service)throw new Error("Trying to update file without service being defined");await this._service.updateMode("dev"),await this._service.updatePlugins(this.parent.getCompilerPlugins()),await this._service.updateFile(e)}}class ns{constructor(e){this.project=e,this.compilers=new Map,this.compilerPlugins=new Map}async start(e,t){let i=this.compilers.get(e);if(i)return i.activate(t);i=new is(this,this.project,e),this.compilers.set(e,i),await i.activate(t)}updateFile(e,t){let i=this.compilers.get(e);if(!i)throw new Error(`Cannot update file because compiler for config "${e}" doesn't exist`);return i.updateFile(t)}remove(e){this.compilers.delete(e)}addCompilerPlugin(e,t){if(this.compilerPlugins.has(e))throw new Error(`Compiler plugin with id "${e}" is already registered`);return this.compilerPlugins.set(e,t),{dispose:()=>this.compilerPlugins.delete(e)}}getCompilerPlugins(){return Object.fromEntries(this.compilerPlugins.entries())}async openWindow(){const e=await this.project.fileSystem.getDirectoryHandle("bridge/compiler",{create:!0}),t=new Gt("sidebar.compiler.name"),i=await t.actionManager;for await(const n of e.values()){if("file"!==n.kind||".DS_Store"===n.name)continue;const e=await n.getFile();let t;try{t=l.parse(await e.text())}catch{continue}i.create({icon:t.icon,name:t.name,description:t.description,onTrigger:()=>this.start(n.name,"build")})}}}async function ss(e){const t=await fs.getApp();await t.dataLoader.fired;const i=e??await t.projectConfig.get("targetVersion");return(await t.fileSystem.readJSON("data/packages/formatVersions.json")).filter((e=>!i||u.compare(e,i,"<=")))}const as={};let os=!1;class rs{constructor(e){this.project=e,this.loadedSchemas=!1,this.localSchemas={},this.disposables=[]}async activate(){console.time("[SETUP] JSONDefaults");const e=await fs.getApp();this.disposables=[fs.eventSystem.on("fileUpdated",(e=>this.updateDynamicSchemas(e))),fs.eventSystem.on("currentTabSwitched",(e=>this.updateDynamicSchemas(e))),fs.eventSystem.on("refreshCurrentContext",(e=>this.updateDynamicSchemas(e))),fs.eventSystem.on("disableValidation",(()=>{this.setJSONDefaults(!1)})),e.actionManager.create({icon:"mdi-reload",name:"actions.reloadAutoCompletions.name",description:"actions.reloadAutoCompletions.description",keyBinding:"Ctrl + Shift + R",onTrigger:()=>this.reload()})].filter((e=>void 0!==e)),this.loadedSchemas||await this.loadAllSchemas(),this.setJSONDefaults(),console.timeEnd("[SETUP] JSONDefaults")}deactivate(){this.disposables.forEach((e=>e.dispose())),this.disposables=[]}async loadAllSchemas(){this.localSchemas={};const e=await fs.getApp();try{await this.loadStaticSchemas(await e.fileSystem.getDirectoryHandle("data/packages/schema"))}catch{return}this.addSchemas(await this.getDynamicSchemas(),!1),await this.runSchemaScripts(e);const t=this.project.tabSystem?.selectedTab;if(t){const i=z.getId(t.getPackPath());this.addSchemas(await this.requestSchemaFor(i,t.getPackPath()),!1),await this.runSchemaScripts(e,t.getPackPath())}this.loadedSchemas=!0}setJSONDefaults(e=!0){n.json.jsonDefaults.setDiagnosticsOptions({enableSchemaRequest:!1,allowComments:!0,validate:e,schemas:Object.values(Object.assign({},as,this.localSchemas))})}async reload(){const e=await fs.getApp();e.windows.loadingWindow.open(),await this.loadAllSchemas(),e.windows.loadingWindow.close()}async updateDynamicSchemas(e){const t=await fs.getApp(),i=z.getId(e);this.addSchemas(await this.requestSchemaFor(i,e),!1),await this.runSchemaScripts(t,e),this.setJSONDefaults()}addSchemas(e,t=!0){e.forEach((e=>{this.localSchemas[e.uri]?(e.schema&&(this.localSchemas[e.uri].schema=e.schema),e.fileMatch&&(this.localSchemas[e.uri].fileMatch=e.fileMatch)):this.localSchemas[e.uri]=e})),t&&this.setJSONDefaults()}async requestSchemaFor(e,t){const i=this.project.packIndexer;return await i.service.getSchemasFor(e,t)}async getDynamicSchemas(){return(await Promise.all(z.getIds().map((e=>this.requestSchemaFor(e))))).flat()}async loadStaticSchemas(e,t="data/packages/schema"){if(os)return;const i=[];for await(const[n,s]of e.entries()){const e=`${t}/${n}`;".DS_Store"!==s.name&&("file"===s.kind?as[`file:///${e}`]={uri:`file:///${e}`,schema:await s.getFile().then((e=>e.text())).then(l.parse).catch((()=>{throw new Error(`Failed to load schema "${e}"`)}))}:i.push(this.loadStaticSchemas(s,e)))}await Promise.all(i),"data/packages/schema"===t&&(z.getMonacoSchemaArray().forEach((e=>{e.uri&&(as[e.uri]?(e.schema&&(as[e.uri].schema=e.schema),e.fileMatch&&(as[e.uri].fileMatch=e.fileMatch)):as[e.uri]=e)})),os=!0)}async runSchemaScripts(e,i){const n=await e.fileSystem.getDirectoryHandle("data/packages/schemaScript"),s=this.project.fileSystem;for await(const o of n.values()){if("file"!==o.kind||".DS_Store"===o.name)continue;const n=await o.getFile(),r=l.parse(await n.text());let c=[];try{c=await U(r.script,[s.readFilesFromDir.bind(s),t,ss,async(e,t,i)=>this.project.packIndexer.service.getCacheDataFor(e,t,i),()=>e.projectConfig.get("prefix"),()=>i?i.split(/\/|\\/g).pop():void 0],["readdir","uuid","getFormatVersions","getCacheDataFor","getProjectPrefix","getFileName"])}catch(a){}this.localSchemas[`file:///data/packages/schema/${r.generateFile}`]={uri:`file:///data/packages/schema/${r.generateFile}`,schema:{type:"enum"===r.type?"string":"object",enum:"enum"===r.type?c:void 0,object:"properties"===r.type?Object.fromEntries(c.map((e=>[e,{}]))):void 0}}}}}const cs=new Map;class ls{constructor(e){this.fileSystem=e,this.disposables=[],this.typeDisposables=[],this.currentTypeEnv=null}activate(){this.disposables=[fs.eventSystem.on("currentTabSwitched",(e=>this.setTypeEnv(e)))]}deactivate(){this.typeDisposables.forEach((e=>e.dispose())),this.disposables.forEach((e=>e.dispose())),this.typeDisposables=[],this.disposables=[]}async load(e){let t=cs.get(e);if(t)return t;const i=await this.fileSystem.readFile(`data/packages/${e}`);return t=await i.text(),cs.set(e,t),t}async setTypeEnv(e){if(e===this.currentTypeEnv)return;this.currentTypeEnv=e,this.typeDisposables.forEach((e=>e.dispose())),this.typeDisposables=[];const{types:t=[]}=z.get(e)??{},i=await Promise.all(t.map((async e=>[e,await this.load(e)])));for(const[s,a]of i){const e=b.file(s);this.typeDisposables.push(n.typescript.javascriptDefaults.addExtraLib(a,e.toString()))}}}class ds{constructor(t,i,n){this.parent=t,this.app=i,this._baseDirectory=n,this.tabSystems=[new qn(this),new qn(this,1)],this.compilerManager=new ns(this),this.jsonDefaults=new rs(this),this.typeLoader=new ls(this.app.fileSystem),this._fileSystem=new R(n),this.packIndexer=new es(i,n),e.set(this,"recentFiles",new Jn(i,`projects/${this.name}/bridge/recentFiles.json`))}get projectData(){return this._projectData}get name(){return this.baseDirectory.name}get tabSystem(){return this.tabSystems[0].isActive?this.tabSystems[0]:this.tabSystems[1].isActive?this.tabSystems[1]:void 0}get baseDirectory(){return this._baseDirectory}get fileSystem(){return this._fileSystem}async activate(e=!1){this.parent.title.setProject(this.name),this.tabSystems.forEach((e=>e.activate())),this.typeLoader.activate(),await this.packIndexer.activate(e).then((()=>{this.jsonDefaults.activate(),this.compilerManager.start("default.json","dev")}))}deactivate(){this.tabSystems.forEach((e=>e.deactivate())),this.typeLoader.deactivate(),this.packIndexer.deactivate(),this.jsonDefaults.deactivate()}async refresh(){await this.deactivate(),await this.activate(!0)}openFile(e){for(const t of this.tabSystems){const i=t.getTab(e);if(i)return t.select(i)}this.tabSystem?.open(e)}async updateFile(e){await this.packIndexer.updateFile(e),await this.compilerManager.updateFile("default.json",e),fs.eventSystem.dispatch("fileUpdated",e)}setActiveTabSystem(e,t){this.tabSystems.forEach((i=>e!==i?i.setActive(t,!1):void 0))}async loadProject(){let t;try{t=await this.app.fileSystem.readJSON(`projects/${this.name}/bridge/config.json`)}catch{t={}}e.set(this,"_projectData",{...t,path:this.name,name:this.name,imgSrc:await Gn(`projects/${this.name}`),contains:await Qn(this.app,this.name)})}}class hs extends Hn{constructor(e,t){super(e,5,t)}isEquals(e,t){return e.path===t.path}}class ps{constructor(){this.titleTag=document.head.getElementsByTagName("title")[0]}setProject(e){this.titleTag.innerText=`${e} - bridge.`}}class us extends V{constructor(t){super(),this.app=t,this.state={},this.title=new ps,this._selectedProject=void 0,this.loadProjects(),e.set(this,"recentProjects",new hs(this.app,"data/recentProjects.json"))}get currentProject(){if(this.selectedProject)return this.state[this.selectedProject]}get selectedProject(){return this._selectedProject}async getProjects(){return await this.fired,Object.values(this.state).map((e=>e.projectData))}async addProject(t,i=!0){const n=new ds(this,this.app,t);await n.loadProject(),e.set(this.state,n.name,n),i&&await this.selectProject(n.name)}async removeProject(t){const i=this.state[t];i&&(await i.deactivate(),e.delete(this.state,t),await this.app.fileSystem.unlink(`projects/${t}`),this.recentProjects.remove(i.projectData))}async loadProjects(){await this.app.fileSystem.fired,await this.app.dataLoader.fired;let e=[];try{e=await this.app.fileSystem.readdir("projects",{withFileTypes:!0})}catch{}const t=e.filter((({kind:e})=>"directory"===e));if(0===t.length){const e=this.app.windows.createProject;e.open(!0),await e.fired}else for(const i of t)await this.addProject(i,!1);this.dispatch()}async selectProject(e){if(void 0===this.state[e])throw new Error(`Cannot select project "${e}" because it no longer exists`);this.currentProject?.deactivate(),this._selectedProject=e,fs.eventSystem.dispatch("disableValidation",null),this.currentProject?.activate(),this.currentProject&&await this.recentProjects.add(this.currentProject.projectData),await h("selectedProject",e),await this.app.switchProject(e)}async selectLastProject(e){await this.fired;let t=await d("selectedProject");if("string"==typeof t)try{await e.fileSystem.getDirectoryHandle(`projects/${t}`)}catch{t=await this.loadFallback()}else t=await this.loadFallback();if("string"!=typeof t)throw new Error("Expected string, found "+typeof t);await this.selectProject(t)}async loadFallback(){await this.fired;const e=Object.keys(this.state)[0];return await h("selectedProject",e),e}}class ms{constructor(){this.isVisible=!1,this.actionManager=void 0,this.position={x:0,y:0}}show(e,t){this.position.x=e.clientX,this.position.y=e.clientY,this.actionManager=t,this.isVisible=!0}}const gs=class{constructor(t){this.projectConfig=new fn,this.keyBindingManager=new vn,this.actionManager=new Jt(this),this.taskManager=new je,this.dataLoader=new gn,this.fileSystem=new R,this.projectManager=e.observable(new us(this)),this.extensionLoader=new Pn,this.windowResize=new jn,this.contextMenu=new ms,this.languageManager=new Ye,this.installApp=new Tn,this.themeManager=new rt(t.$vuetify),this.locales=new wt(t.$vuetify),this._windows=new mn(this);const i="Are you sure that you want to close bridge.? Unsaved progress will be lost.";window.addEventListener("beforeunload",(e=>{if(this.tabSystem?.hasUnsavedTabs||this.taskManager.hasRunningTasks)return e.preventDefault(),e.returnValue=i,i}))}get windows(){return this._windows}get tabSystem(){return this.projectManager.currentProject?.tabSystem}get selectedProject(){return this.projectManager.selectedProject}get project(){return this.projectManager.currentProject}static get instance(){return this._instance}static getApp(){return new Promise((e=>gs.ready.once((t=>e(t)))))}static createNativeWindow(e,t){return H?.general?.openLinksInBrowser?window.open(e,"_blank"):window.open(e,t,"toolbar=no,menubar=no,status=no")}async switchProject(e){this.extensionLoader.deactivateAllLocal(),this.extensionLoader.loadExtensions(await this.fileSystem.getDirectoryHandle(`projects/${e}/bridge/plugins`,{create:!0})).then((()=>{if(this.themeManager.updateTheme(),"string"==typeof H?.general?.locale)this.locales.selectLanguage(H?.general?.locale);else for(const[e]of this.locales.getLanguages())navigator.language.includes(e)&&this.locales.selectLanguage(e)})),gs.eventSystem.dispatch("projectChanged",void 0)}static async main(e){this._instance=new gs(e),this.instance.windows.loadingWindow.open(),await this.instance.beforeStartUp();const t=await this.fileSystemSetup.setupFileSystem(this.instance);if(!t)return this.instance.windows.loadingWindow.close();this.instance.fileSystem.setup(t),dn.loadSettings(this.instance).then((async()=>{await this.instance.dataLoader.fired,this.instance.themeManager.loadDefaultThemes(this.instance)})),await this.instance.startUp(),this.ready.dispatch(this._instance),this.instance.windows.loadingWindow.close(),await this.instance.projectManager.selectLastProject(this._instance)}async beforeStartUp(){console.time("[APP] beforeStartUp()"),navigator.clearAppBadge&&navigator.clearAppBadge(),ut({id:"projects",displayName:"windows.projectChooser.title",icon:"mdi-view-dashboard-outline",onClick:()=>fs.instance.windows.projectChooser.open()}),ut({id:"bpExplorer",displayName:"windows.packExplorer.title",icon:"mdi-folder-outline",onClick:async()=>{const e=await fs.getApp();await(e.project?.packIndexer.fired),e.windows.packExplorer.open()}}),ut({id:"compiler",displayName:"sidebar.compiler.name",icon:"mdi-cogs",onClick:async()=>{const e=await fs.getApp();await(e.project?.compilerManager.openWindow())}}),ut({id:"extensions",displayName:"sidebar.extensions.name",icon:"mdi-puzzle-outline",onClick:async()=>{const e=await fs.getApp();await e.windows.extensionStore.open()}}),ft(this),this.dataLoader.setup(this);{const e=Ne({icon:"mdi-discord",message:"sidebar.notifications.discord.message",color:"#7289DA",textColor:"white",onClick:()=>{bt.open(),e.dispose()}})}console.timeEnd("[APP] beforeStartUp()")}async startUp(){console.time("[APP] startUp()"),await Promise.all([this.fileSystem.mkdir("projects"),this.fileSystem.mkdir("plugins"),this.fileSystem.mkdir("data/packages"),this.dataLoader.fired.then((()=>z.setup(this.fileSystem))),this.dataLoader.fired.then((()=>yt.setup(this.fileSystem)))]),this.extensionLoader.loadExtensions(await this.fileSystem.getDirectoryHandle("plugins"),!0),console.timeEnd("[APP] startUp()")}};let fs=gs;fs.fileSystemSetup=new class{constructor(){this.confirmPermissionWindow=null,this._status="waiting"}get status(){return this._status}setStatus(e){this._status=e}async setupFileSystem(e){if("function"!=typeof window.showDirectoryPicker)return e.windows.browserUnsupported.open(),!1;let t=await d("bridgeBaseDir");var i;return t&&(t=await this.verifyPermissions(t)),t||await(i=async e=>{e&&(await h("bridgeBaseDir",e),t=e),await this.verifyPermissions(e)},dt||(dt=ee(lt,{callback:async e=>{await i(e),dt.status.setDone?.()}}),dt.open(),dt)).status.done,this._status="done",t}async verifyPermissions(e){const t={writable:!0,mode:"readwrite"};"granted"!==await e.queryPermission(t)&&null===this.confirmPermissionWindow&&(this.confirmPermissionWindow=xe("windows.projectFolder.title","windows.projectFolder.content",(async()=>{this._status="userInteracted",this.confirmPermissionWindow=null,"granted"!==await e.requestPermission(t)&&await this.verifyPermissions(e)})),await this.confirmPermissionWindow.status.done);try{await e.getDirectoryHandle("data",{create:!0})}catch{return}return e}},fs.toolbar=new class{constructor(){this.state=e.observable({})}addCategory(t){e.set(this.state,t.id,t)}disposeCategory(t){e.delete(this.state,t.id)}},fs.eventSystem=new O(["projectChanged","fileUpdated","currentTabSwitched","refreshCurrentContext","disableValidation"]),fs.ready=new V;const ws={};var vs=q({name:"Toolbar",components:{WindowAction:Ae,MenuActivator:Le,MenuButton:Ie},data:()=>({toolbar:fs.toolbar.state,appVersion:"2.0.0-alpha.5"}),methods:{async openChangelogWindow(){const e=await fs.getApp();await e.windows.changelogWindow.open()}}},(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("v-system-bar",{attrs:{color:"toolbar",fixed:"",app:"",clipped:"",padless:"",height:"24px"}},[i("img",{staticStyle:{height:"16px","padding-right":"8px"},attrs:{alt:"bridge. Logo",src:"/editor/assets/logo.851fb0b1.png"}}),e._v(" "),i("v-divider",{attrs:{vertical:""}}),e._v(" "),i("v-toolbar-items",{staticClass:"px14-font"},[e._l(e.toolbar,(function(t,n,s){return["category"!==t.type?i("MenuButton",{key:"button."+n,attrs:{displayName:t.name,displayIcon:t.icon},on:{click:function(){return t.trigger()}}}):i("MenuActivator",{key:"activator."+n,attrs:{item:t}}),e._v(" "),s+1<Object.keys(e.toolbar).length?i("v-divider",{key:"divider."+n,attrs:{vertical:""}}):e._e()]}))],2),e._v(" "),i("v-spacer"),e._v(" "),i("div",{directives:[{name:"ripple",rawName:"v-ripple"}],staticClass:"px-1 mx-1 rounded-lg app-version-display",on:{click:e.openChangelogWindow}},[e._v("\n\t\tv"+e._s(e.appVersion)+"\n\t")])],1)}),[],!1,(function(e){for(let t in ws)this[t]=ws[t]}),"ddfd594a",null,null).exports;const bs={};var ys=q({name:"CollectedWindows",data:()=>({WINDOWS:Y})},(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",e._l(e.WINDOWS,(function(e,t){return i(e.component,{key:t,tag:"component",attrs:{currentWindow:e}})})),1)}),[],!1,(function(e){for(let t in bs)this[t]=bs[t]}),null,null,null).exports;const ks={mixins:[Fn],computed:{tabSystem(){if(this.project)return this.project.tabSystem},tabSystems(){if(this.project)return this.project.tabSystems},shouldRenderWelcomeScreen(){return this.tabSystems&&(this.tabSystems[0].shouldRender||this.tabSystems[1].shouldRender)}}};const Ss={};var xs=q({name:"ContextMenu",mixins:[K],props:{contextMenu:Object},data:()=>({shouldRender:!1,timeoutId:0}),computed:{isVisible:{set(e){this.contextMenu.isVisible=e},get(){return this.contextMenu.isVisible}}},watch:{isVisible(){this.isVisible?(this.shouldRender=!0,clearTimeout(this.timeoutId)):this.timeoutId=setTimeout((()=>this.shouldRender=!1),500)}}},(function(){var e=this,t=e.$createElement,i=e._self._c||t;return e.isVisible?i("v-menu",{attrs:{"position-x":e.contextMenu.position.x,"position-y":e.contextMenu.position.y,rounded:"lg",absolute:"","offset-y":""},model:{value:e.isVisible,callback:function(t){e.isVisible=t},expression:"isVisible"}},[i("v-list",{attrs:{dense:""}},e._l(e.contextMenu.actionManager.state,(function(t){return i("v-list-item",{key:t.id,attrs:{origin:"center center",transition:"scale-transition"},on:{click:function(e){return t.trigger()}}},[i("v-list-item-icon",{staticClass:"mr-2"},[i("v-icon",{attrs:{color:"primary"}},[e._v(e._s(t.icon))])],1),e._v(" "),i("v-list-item-action",{staticClass:"ma-0"},[e._v(e._s(e.t(t.name)))])],1)})),1)],1):e._e()}),[],!1,(function(e){for(let t in Ss)this[t]=Ss[t]}),null,null,null).exports;const _s={name:"TabSystemTab",props:{tab:Mn,isActive:Boolean},data:()=>({hoverClose:!1}),mounted(){this.isSelected&&this.$refs.tabElement.scrollIntoView({behavior:"smooth",block:"center",inline:"nearest"})},computed:{isSelected(){return this.tab.isSelected}},watch:{isSelected(){this.isSelected&&this.$refs.tabElement.scrollIntoView({behavior:"smooth",block:"center",inline:"nearest"})}}},Cs={};var Ps=q(_s,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{ref:"tabElement",staticClass:"px-3 py-2",class:{selected:e.tab.isSelected,"default-tab-style":!0,"d-flex":!0,"align-center":!0,inactive:!e.isActive},on:{mousedown:function(t){!e.hoverClose&&e.tab.select()},mouseup:function(t){return"button"in t&&1!==t.button?null:e.tab.close()},contextmenu:function(t){return e.tab.onContextMenu(t)}}},[i("v-icon",{staticClass:"mr-1",attrs:{color:e.tab.iconColor,small:""}},[e._v("\n\t\t"+e._s(e.tab.icon)+"\n\t")]),e._v(" "),i("span",{style:{"font-style":e.tab.isUnsaved?"italic":null}},[e._v("\n\t\t"+e._s(e.tab.name)+"\n\t")]),e._v(" "),i("v-btn",{attrs:{text:"",icon:"",small:""},on:{click:function(t){return t.stopPropagation(),e.tab.close()},mouseenter:function(t){e.hoverClose=!0},mouseleave:function(t){e.hoverClose=!1}}},[i("v-icon",{attrs:{small:""}},[e._v("mdi-close")])],1)],1)}),[],!1,(function(e){for(let t in Cs)this[t]=Cs[t]}),"7f72793b",null,null).exports;const js={};var Ts=q({components:{TabSystemTab:Ps,Draggable:S},props:{tabSystem:Object},methods:{updateTab({added:e}){e&&e.element.toOtherTabSystem(!1)}}},(function(){var e=this,t=e.$createElement,i=e._self._c||t;return e.tabSystem.shouldRender?i("Draggable",{style:"display: flex; overflow-x: scroll; white-space: nowrap; width: 100%; height: 48px;",attrs:{group:{name:"tabSystemTabRow"}},on:{change:e.updateTab},nativeOn:{mousedown:function(t){return t.target!==t.currentTarget?null:e.tabSystem.setActive(!0)}},model:{value:e.tabSystem.tabs,callback:function(t){e.$set(e.tabSystem,"tabs",t)},expression:"tabSystem.tabs"}},e._l(e.tabSystem.tabs,(function(t){return i("TabSystemTab",{key:t.uuid,attrs:{tab:t,isActive:e.tabSystem.isActive}})})),1):e._e()}),[],!1,(function(e){for(let t in js)this[t]=js[t]}),"4a74a7fb",null,null).exports;const Fs={};var Es=q({name:"TabSystem",props:{tabSystem:Object,id:{type:Number,default:0}},components:{TabBar:Ts,WelcomeScreen:Wn},watch:{"tabSystem.shouldRender"(){fs.getApp().then((e=>e.windowResize.dispatch()))}}},(function(){var e=this,t=e.$createElement,i=e._self._c||t;return e.tabSystem.shouldRender?i("div",{staticClass:"tab-system"},[i("TabBar",{attrs:{tabSystem:e.tabSystem}}),e._v(" "),i("keep-alive",[i(e.tabSystem.currentComponent,{key:e.tabSystem.uuid,tag:"component",attrs:{tab:e.tabSystem.selectedTab,id:e.id}})],1)],1):e._e()}),[],!1,(function(e){for(let t in Fs)this[t]=Fs[t]}),"738ee2fe",null,null).exports;const Ws=e.extend({name:"App",mixins:[ks],mounted(){fs.getApp().then((e=>{this.contextMenu=e.contextMenu}))},components:{Sidebar:We,Toolbar:vs,WindowRenderer:ys,ContextMenu:xs,TabSystem:Es,WelcomeScreen:Wn},data:()=>({isMacOs:"darwin"===te(),contextMenu:null})}),Ms={};var As=q(Ws,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("v-app",[i("Toolbar"),e._v(" "),i("Sidebar",{attrs:{app:""}}),e._v(" "),i("v-main",[i("WindowRenderer"),e._v(" "),e.shouldRenderWelcomeScreen?i("div",{staticClass:"fill-area d-flex"},[i("TabSystem",{staticClass:"flex-grow-1",attrs:{tabSystem:e.tabSystems[0],showWelcomeScreen:""}}),e._v(" "),e.tabSystems[0].shouldRender&&e.tabSystems[1].shouldRender?i("v-divider",{attrs:{vertical:""}}):e._e(),e._v(" "),i("TabSystem",{staticClass:"flex-grow-1",attrs:{tabSystem:e.tabSystems[1],id:1}})],1):i("WelcomeScreen")],1),e._v(" "),e.contextMenu?i("ContextMenu",{attrs:{contextMenu:e.contextMenu}}):e._e()],1)}),[],!1,(function(e){for(let t in Ms)this[t]=Ms[t]}),null,null,null).exports,Ds={...x,languageName:"English",packType:{behaviorPack:{name:"Behavior Pack",description:"Create new game mechanics and change how Minecraft behaves"},resourcePack:{name:"Resource Pack",description:"Used for changing Minecraft's look and sound"},skinPack:{name:"Skin Pack",description:"Provide new appearances a player can select for their character"},worldTemplate:{name:"World Template",description:"Give players a world to explore"}},fileType:{manifest:"Manifest",animation:"Animation",animationController:"Animation Controller",biome:"Biome",block:"Block",entity:"Entity",feature:"Feature",featureRule:"Feature Rule",functionTick:"Function Tick",function:"Function",item:"Item",lootTable:"Loot Table",recipe:"Recipe",script:"Script",spawnRule:"Spawn Rule",mcstructure:"Structure",tradeTable:"Trade Table",clientManifest:"Client Manifest",skinManifest:"Skin Manifest",geometry:"Geometry",clientAnimation:"Client Animation",clientAnimationController:"Client Animation Controller",attachable:"Attachable",clientEntity:"Client Entity",clientItem:"Client Item",fog:"Fog",particle:"Particle",renderController:"Render Controller",textureSet:"Texture Set",itemTexture:"Item Texture",clientBlock:"Client Block",terrainTexture:"Terrain Texture",flipbookTexture:"Flipbook Texture",clientBiome:"Client Biome",soundDefinition:"Sound Definition",musicDefinition:"Music Definition",clientSound:"Client Sound",skins:"Skins",langDef:"Language Definitions",lang:"Language",molang:"Molang",gameTest:"Game Test",unknown:"Other",simpleFile:"Simple Files"},actions:{newProject:{name:"New Project",description:"Create a new bridge. project"},newFile:{name:"New File",description:"Create a new Add-On feature"},openFile:{name:"Open File",description:"Search and open a file from the current project"},saveFile:{name:"Save File",description:"Save the currently opened file"},closeFile:{name:"Close File",description:"Close the currently opened file"},settings:{name:"Settings",description:"Open bridge.'s app settings"},extensions:{name:"Extensions",description:"Install and manage your installed extensions"},copy:{name:"Copy",description:"Copy selected text to the clipboard"},cut:{name:"Cut",description:"Copy selected text to the clipboard and remove it from the original context"},paste:{name:"Paste",description:"Paste clipboard content"},docs:{name:"Documentation",description:"Opens the Minecraft Add-On documentation"},releases:{name:"Releases",description:"View the latest bridge. releases"},bugReports:{name:"Bug Reports",description:"Report an issue with bridge."},pluginAPI:{name:"Plugin API",description:"Read more about bridge.'s plugin API"},gettingStarted:{name:"Getting Started",description:"Read our guide on how to get started with bridge."},faq:{name:"FAQ",description:"Read through frequently asked questions about developing Add-Ons with bridge."},reloadAutoCompletions:{name:"Reload Auto-Completions",description:"Reloads all auto-completion data"},moveToSplitScreen:{name:"Move to Split Screen",description:"Opens a split screen view and moves this tab to it"},closeTab:{name:"Close Tab",description:"Close this tab"},closeAll:{name:"Close All",description:"Close all tabs"},closeTabsToRight:{name:"Close Tabs to the Right",description:"Close all tabs to the right-hand side of this tab"},closeAllSaved:{name:"Close All Saved",description:"Close all saved tabs"},closeOtherTabs:{name:"Close other Tabs",description:"Close all tabs except this tab"},pluginInstallLocation:{global:{name:"Install Globally",description:"Global extensions are accessible in all of your projects"},local:{name:"Install Locally",description:"Local extensions are only accessible inside of the projects you add them to"}}},toolbar:{file:{name:"File",preferences:{name:"Preferences"}},edit:{name:"Edit"},tools:{name:"Tools"},help:{name:"Help"}},sidebar:{compiler:{name:"Compiler"},extensions:{name:"Extensions"},notifications:{discord:{message:"Discord Server"},gettingStarted:{message:"Getting Started"},installApp:{message:"Install App"},updateAvailable:{message:"Update Available"}}},welcome:{title:"Welcome to bridge.",subtitle:"Creating Minecraft addons has never been more convenient!",quickActions:"Quick Actions",recentFiles:"Recent Files",recentProjects:"Recent Projects"},windows:{common:{confirm:{title:"Confirm"},dropdown:{confirm:"Confirm"},information:{confirm:"Okay"},input:{confirm:"Confirm"}},loadingWindow:{titles:{loading:"Loading...",downloadingData:"Downloading new data..."}},changelogWindow:{title:"What's new?"},openFile:{title:"Open",search:"Search file...",noData:"No results..."},createProject:{welcome:"Welcome to bridge.!",welcomeDescription:"Please create your first project in order to get started.",omitPack:"Omit",selectedPack:"Selected",title:"Create Project",packIcon:"Project Icon (optional)",projectName:"Project Name",projectDescription:"Project Description (optional)",projectPrefix:"Project Prefix",projectAuthor:"Project Author",projectTargetVersion:"Project Target Version",create:"Create!"},createPreset:{title:"Create Preset",searchPresets:"Search presets..."},deleteProject:{confirm:"Delete",cancel:"Cancel",description:"Are you sure you want to delete this project?"},discord:{title:"Discord",content:"Join the official bridge. Discord server!",join:"Join",later:"Later"},projectChooser:{title:"Projects",searchProjects:"Search projects..."},selectFolder:{title:"Select Folder",content:"Select where to save projects or choose an existing projects directory.",select:"Select!"},packExplorer:{title:"Pack Explorer",searchFiles:"Search files...",categories:"Categories"},settings:{title:"Settings",searchSettings:"Search settings...",appearance:{name:"Appearance",colorScheme:{name:"Color Scheme",description:"Choose the color scheme of bridge.'s UI"},darkTheme:{name:"Dark Theme",description:"Select the default dark theme bridge. uses"},lightTheme:{name:"Light Theme",description:"Select the default light theme bridge. uses"},localDarkTheme:{name:"Local Dark Theme",description:"Choose a dark theme for the currently active project"},localLightTheme:{name:"Local Light Theme",description:"Choose a light theme for the currently active project"},sidebarRight:{name:"Sidebar Right",description:"Moves the sidebar to the right side of the screen"},shrinkSidebarElements:{name:"Shrink Sidebar Elements",description:"Shrink the size of bridge.'s sidebar elements"}},general:{name:"General",language:{name:"Language",description:"Choose a language for bridge. to use"},collaborativeMode:{name:"Collaborative Mode",description:"Forces full refresh of the cache upon switching projects. Disable when you work alone and you only use bridge. to edit your project"},packSpider:{name:"Pack Spider",description:"Pack Spider connects files inside of your projects and presents the connections to you in a virtual file system"},openLinksInBrowser:{name:"Open Links in Default Browser",description:"Open links inside of your default browser instead of a native app window"},resetBridgeFolder:{name:"Select Root Folder",description:"Choose the main folder bridge. operates on"}},developer:{name:"Developer",simulateOS:{name:"Simulate OS",description:"Simulate a different OS for testing platform specific behavior"},devMode:{name:"Developer Mode",description:"Enable the developer mode for this app"}},actions:{name:"Actions"}},projectFolder:{title:"Project Folder",content:"bridge. needs access to its project folder in order to work correctly."},extensionStore:{title:"Extension Store",searchExtensions:"Search extension..."},pluginInstallLocation:{title:"Choose Install Location"},unsavedFile:{title:"Confirm",description:"Do you want to save your changes to this file before closing it?",cancel:"Cancel",noSave:"Close",save:"Save & Close"},browserUnsupported:{title:"Unsupported Browser",description:"Your browser is currently not supported. Please use Chrome (Desktop) or Edge (Chromium) in order to get started with bridge.!"}},taskManager:{tasks:{packIndexing:{title:"Indexing Packs",description:"bridge. is collecting data about your pack that is needed for its intelligent features"},compiler:{title:"Compiling Project",description:"bridge. is compiling your project to make it ready for import into Minecraft"}}}},Bs={..._,languageName:"Deutsch",packType:{behaviorPack:{name:"Verhaltenspaket",description:"Erstelle neue Spielmechaniken und ndere, wie sich Minecraft verhlt"},resourcePack:{name:"Ressourcenpaket",description:"Verndere Minecraft's Aussehen und Sound"},skinPack:{name:"Charakterpaket",description:"Erstelle verschieden Charakter, die ein Spieler auswhlen kann"},worldTemplate:{name:"Weltvorlage",description:"Gebe Spielern eine Welt zum Erkunden"}},fileType:{manifest:"Manifest",animation:"Animation",animationController:"Animation Controller",biome:"Biome",block:"Block",entity:"Entity",feature:"Feature",featureRule:"Feature Rule",functionTick:"Function Tick",function:"Function",item:"Item",lootTable:"Loot Table",recipe:"Recipe",script:"Script",spawnRule:"Spawn Rule",mcstructure:"Structure",tradeTable:"Trade Table",clientManifest:"Client Manifest",geometry:"Geometry",clientAnimation:"Client Animation",clientAnimationController:"Client Animation Controller",attachable:"Attachable",clientEntity:"Client Entity",clientItem:"Client Item",fog:"Fog",particle:"Particle",renderController:"Render Controller",textureSet:"Texture Set",itemTexture:"Item Texture",clientBlock:"Client Block",terrainTexture:"Terrain Texture",flipbookTexture:"Flipbook Texture",clientBiome:"Client Biome",soundDefinition:"Sound Definition",musicDefinition:"Music Definition",clientSound:"Client Sound",skins:"Skins",langDef:"Language Definitions",lang:"Language",molang:"Molang",unknown:"Other",simpleFile:"Simple Files"},actions:{newProject:{name:"Neues Projekt",description:"Erstelle ein neues Projekt"},newFile:{name:"Neue Datei",description:"Erstelle ein neues Add-On Feature"},openFile:{name:"ffne Datei",description:"Suche und ffne eine Datei deines momentanen Projektes"},saveFile:{name:"Speichere Datei",description:"Speichere die aktuelle Datei"},closeFile:{name:"Schliee Datei",description:"Schliee die aktuelle Datei"},settings:{name:"Einstellungen",description:"ffne bridge.'s Appeinstellungen"},extensions:{name:"Erweiterungen",description:"Installiere und verwalte Erweiterungen"},copy:{name:"Kopieren",description:"Kopiere ausgewhlten Text"},cut:{name:"Schneiden",description:"Kopiere ausgewhlten Text und entferne ihn aus dem ursprnglichen Kontext"},paste:{name:"Einfgen",description:"Fge kopierten Text ein"},docs:{name:"Dokumentation",description:"ffne die Minecraft Add-On Dokumentation"},releases:{name:"Updates",description:"Sehe die neusten Updates"},bugReports:{name:"Fehler Melden",description:"Melde einen Fehler der App"},pluginAPI:{name:"Erweiterungs API",description:"Lese mehr ber bridge.'s Erweiterungs API"},gettingStarted:{name:"So Geht's Los!",description:"Lies unser Tutorial, wie du mit bridge. loslegst."},faq:{name:"FAQ",description:"Informiere dich ber hufig gestellte Fragen"},reloadAutoCompletions:{name:"Autovervollstndigung Neuladen",description:"Lade alle Autovervollstndigungen neu"},pluginInstallLocation:{global:{name:"Global Installieren",description:"Globale Erweiterungen sind in allen Projekten aktiv"},local:{name:"Lokal Installieren",description:"Lokale Erweiterungen sind in deinem aktuellen Projekt aktiv"}}},toolbar:{file:{name:"Datei",preferences:{name:"Prferenzen"}},edit:{name:"Editieren"},tools:{name:"Werkzeuge"},help:{name:"Hilfe"}},sidebar:{compiler:{name:"Compiler"},extensions:{name:"Erweiterungen"},notifications:{discord:{message:"Discord Server"},gettingStarted:{message:"So Geht's los!"},installApp:{message:"App Installieren"},updateAvailable:{message:"Update Verfgbar"}}},welcome:{title:"Willkommen zu bridge.",subtitle:"Add-On Entwicklung einfach gemacht!",quickActions:"Aktionen",recentFiles:"Zuletzt Verwendet",recentProjects:"Letzte Projekte"},windows:{common:{confirm:{title:"Besttigung"},dropdown:{confirm:"Besttigung"},information:{confirm:"Okay"},input:{confirm:"Besttigung"}},loadingWindow:{title:"Laden..."},openFile:{title:"ffnen",search:"Datei suchen...",noData:"Keine Ergebnisse..."},createProject:{welcome:"Willkommen to bridge.!",welcomeDescription:"Erstelle dein erstes Projekt, um loszulegen.",omitPack:"Nicht Ausgewhlt",selectedPack:"Ausgewhlt",title:"Projekt Erstellen",packIcon:"Projekt Logo (optional)",projectName:"Projekt Name",projectDescription:"Projekt Beschreibung (optional)",projectPrefix:"Project Prfix",projectAuthor:"Project Author",projectTargetVersion:"Projekt Zielversion",create:"Erstellen!"},createPreset:{title:"Erstelle Preset",searchPresets:"Suche Presets..."},deleteProject:{confirm:"Lschen",cancel:"Abbrechen",description:"Bist du sicher, dass du das Projekt entfernen willst?"},discord:{title:"Discord",content:"Trete dem offizielen bridge. Discord Server bei!",join:"Beitreten",later:"Spter"},projectChooser:{title:"Projekte",searchProjects:"Suche Projekte..."},selectFolder:{title:"Ordner Aussuchen",content:"Whle einen Ordner, indem bridge. deinen Projekte speichern soll.",select:"Auswhlen!"},packExplorer:{title:"Paket Explorer",searchFiles:"Suche Dateien...",categories:"Kategorien"},settings:{title:"Einstellungen",searchSettings:"Suche Einstellungen...",appearance:{name:"Aussehen",colorScheme:{name:"Farbschema",description:"Whle ein Farbschema fr bridge.'s Benutzeroberflche"},darkTheme:{name:"Dunkles Theme",description:"Select the default dark theme bridge. uses"},lightTheme:{name:"Helles Theme",description:"Select the default light theme bridge. uses"},localDarkTheme:{name:"Lokales Dunkles Theme",description:"Choose a dark theme for the currently active project"},localLightTheme:{name:"Lokales Helles Theme",description:"Choose a light theme for the currently active project"},sidebarRight:{name:"Rechte Seitenleiste",description:"Bewege die Seitenleiste auf die rechte Seite des Screens"},shrinkSidebarElements:{name:"Kleine Seitenleistenelemente",description:"Schrumpfe die Seitenleistenelemente, sodass sie weniger Platz bentigen"}},general:{name:"Allgemein",language:{name:"Sprache",description:"Whle eine Sprache fr bridge. aus"},collaborativeMode:{name:"Kollaborativer Modus",description:"Ldt den Cache komplett neu, wenn du die Projekte wechselst. Kann deaktiviert werden, wenn du alleine arbeitest und du nur bridge. fr dein Projekt nutzt"},packSpider:{name:"Pack Spider",description:"Pack Spider erkennt Verbindungen zwischen Dateien deines Projektes und bildet diese in einem Virtuellen Dateiensystem ab"},openLinksInBrowser:{name:"ffne Links im Browser",description:"ffne Links in deinem Browser anstelle von Applikationsfenstern"},resetBridgeFolder:{name:"Whle bridge. Ordner",description:"Whle dein Hautpordner, auf dem bridge. arbeitet"}},developer:{name:"Entwickler",simulateOS:{name:"OS Simulieren",description:"Simuliere ein anderes OS, um platformspezifische Features zu testen"},devMode:{name:"Developermodus",description:"Aktiviere den Developermodus fr diese App"}},actions:{name:"Aktionen"}},projectFolder:{title:"Projekte Ordner",content:"bridge. bentigt Zugriff auf deinen Projekteordner."},extensionStore:{title:"Erweiterungen",searchExtensions:"Suche Erweiterungen..."},pluginInstallLocation:{title:"Whle Installationsart"},unsavedFile:{title:"Besttigen",description:"Mchtest du die nderungen an dieser Datei speichern?",cancel:"Abbrechen",noSave:"Schlieen",save:"Spichern & Schlieen"},browserUnsupported:{title:"Keine Browseruntersttzung!",description:"bridge. untersttzt deinen Browser momentan nicht. Bitte nutze Chrome (Desktop) or Edge (Chromium), um bridge. zu nutzen!"}},taskManager:{tasks:{packIndexing:{title:"Paketindizierung",description:"bridge. sammelt Daten aus deinem Paket, die es fr seine intelligenten Features bentigt"},compiler:{title:"Projektkompilierung",description:"bridge. kompiliert dein Projekt, um es fr die Nutzung in Minecraft vorzubereiten"}}}},$s={...C,languageName:"Nederlands",packType:{behaviorPack:{name:"Gedragspakket",description:"Creer nieuwe spelmechanismen en verander hoe Minecraft zich gedraagt"},resourcePack:{name:"Resourcepakket",description:"Wordt gebruikt voor het veranderen van Minecraft's uiterlijk en geluid"},skinPack:{name:"Skin Pakket",description:"Voorziet nieuwe uiterlijken die de speler kan selecteren voor hun karakter"},worldTemplate:{name:"Wereldsjabloon",description:"Geef spelers een wereld om te verkennen"}},fileType:{manifest:"Manifest",animation:"Animation",animationController:"Animation Controller",biome:"Biome",block:"Block",entity:"Entity",feature:"Feature",featureRule:"Feature Rule",functionTick:"Function Tick",function:"Function",item:"Item",lootTable:"Loot Table",recipe:"Recipe",script:"Script",spawnRule:"Spawn Rule",mcstructure:"Structure",tradeTable:"Trade Table",clientManifest:"Client Manifest",geometry:"Geometry",clientAnimation:"Client Animation",clientAnimationController:"Client Animation Controller",attachable:"Attachable",clientEntity:"Client Entity",clientItem:"Client Item",fog:"Fog",particle:"Particle",renderController:"Render Controller",textureSet:"Texture Set",itemTexture:"Item Texture",clientBlock:"Client Block",terrainTexture:"Terrain Texture",flipbookTexture:"Flipbook Texture",clientBiome:"Client Biome",soundDefinition:"Sound Definition",musicDefinition:"Music Definition",clientSound:"Client Sound",skins:"Skins",langDef:"Language Definitions",lang:"Language",molang:"Molang",unknown:"Other",simpleFile:"Simple Files"},actions:{newProject:{name:"Nieuw Project",description:"Maak een nieuw bridge. project"},newFile:{name:"Nieuw Bestand",description:"Maak een nieuwe Add-On functie"},openFile:{name:"Open Bestand",description:"Zoek en open een bestand in het huidige project"},saveFile:{name:"Bestand Opslaan",description:"Sla het momenteel geopende bestand op"},closeFile:{name:"Bestand Sluiten",description:"Sluit het momenteel geopende bestand"},settings:{name:"Instellingen",description:"Open de app instellingen van bridge."},extensions:{name:"Extensies",description:"Beheer uw genstalleerde extensies"},copy:{name:"Kopiren",description:"Kopieer geselecteerde tekst naar het klembord"},cut:{name:"Knippen",description:"Kopieer geselecteerde tekst naar het klembord en verwijder deze uit de oorspronkelijke context"},paste:{name:"Plakken",description:"Plak de inhoud van het klembord"},docs:{name:"Documentatie",description:"Opent de Minecraft Add-On documentatie"},releases:{name:"Releases",description:"Bekijk de nieuwste bridge. releases"},bugReports:{name:"Foutmeldingen",description:"Meld een probleem met bridge."},pluginAPI:{name:"Plugin API",description:"Lees meer over de plugin API van bridge"},gettingStarted:{name:"Beginnen",description:"Lees onze gids om aan de slag te gaan met bridge."},faq:{name:"FAQ",description:"Lees veelgestelde vragen over het ontwikkelen van Add-Ons met bridge."},reloadAutoCompletions:{name:"Herlaad automatische aanvullingen",description:"Herlaadt alle gegevens voor automatisch aanvullen opnieuw"},closeTab:{name:"Sluit Tab",description:"Sluit dit tabblad"},closeAll:{name:"Sluit Alles",description:"Sluit alle tabbladen"},closeTabsToRight:{name:"Sluit tabbladen aan de rechterkant",description:"Sluit alle tabbladen aan de rechterkant van dit tabblad"},closeAllSaved:{name:"Sluit alle opgeslagen",description:"Sluit alle opgeslagen tabbladen"},closeOtherTabs:{name:"Sluit andere tabbladen",description:"Sluit alle tabbladen behalve dit tabblad"},pluginInstallLocation:{global:{name:"Globaal Installeren",description:"Globale extensies zijn toegankelijk in al uw projecten"},local:{name:"Locaal Installeren",description:"Lokale extensies zijn alleen toegankelijk binnen de projecten waaraan u ze toevoegt"}}},toolbar:{file:{name:"Bestand",preferences:{name:"Voorkeuren"}},edit:{name:"Bewerk"},tools:{name:"Hulpmiddelen"},help:{name:"Help"}},sidebar:{compiler:{name:"Compiler"},extensions:{name:"Extensies"},notifications:{discord:{message:"Discord Server"},gettingStarted:{message:"Beginnen"},installApp:{message:"Installeer App"},updateAvailable:{message:"Update Beschikbaar"}}},welcome:{title:"Welkom bij bridge.",subtitle:"Het maken van Minecraft addons is nog nooit zo gemakkelijk geweest!",quickActions:"Snelle Acties",recentFiles:"Recente Bestanden",recentProjects:"Recente Projecten"},windows:{common:{confirm:{title:"Bevestigen"},dropdown:{confirm:"Bevestigen"},information:{confirm:"Oke"},input:{confirm:"Bevestigen"}},loadingWindow:{title:"Laden..."},changelogWindow:{title:"Wat is er nieuw?"},openFile:{title:"Openen",search:"Zoek bestand...",noData:"Geen resultaten..."},createProject:{welcome:"Welkom bij bridge.!",welcomeDescription:"Maak alstublieft uw eerste project aan om aan de slag te gaan.",omitPack:"Weglaten",selectedPack:"Geselecteerd",title:"Project Maken",packIcon:"Projectpictogram (optioneel)",projectName:"Projectnaam",projectDescription:"Projectbeschrijving (optioneel)",projectPrefix:"Projectvoorvoegsel",projectAuthor:"Project Auteur",projectTargetVersion:"Doelversie van het project",create:"Creer!"},createPreset:{title:"Voorinstelling maken",searchPresets:"Voorinstellingen zoeken..."},deleteProject:{confirm:"Verwijderen",cancel:"Annuleren",description:"Weet u zeker dat u dit project wilt verwijderen?"},discord:{title:"Discord",content:"Sluit je aan bij de officile bridge. Discord server!",join:"Aansluiten",later:"Later"},projectChooser:{title:"Projecten",searchProjects:"Zoek Projecten..."},selectFolder:{title:"Selecteer Map",content:"Selecteer waar u projecten wilt opslaan of kies een bestaande projectenmap.",select:"Selecteer!"},packExplorer:{title:"Pack Explorer",searchFiles:"Zoek bestanden...",categories:"Categorien"},settings:{title:"Instellingen",searchSettings:"Zoek instellingen...",appearance:{name:"Uiterlijk",colorScheme:{name:"Kleurenschema",description:"Kies het kleurenschema voor de gebruikersinterface van bridge."},darkTheme:{name:"Donker Thema",description:"Selecteer het standaard donkere thema dat door bridge. wordt gebruikt"},lightTheme:{name:"Licht Thema",description:"Selecteer het standaard lichte thema dat door bridge. wordt gebruikt"},localDarkTheme:{name:"Lokaal Donker Thema",description:"Kies een donker thema voor het momenteel actieve project"},localLightTheme:{name:"Lokaal Licht Thema",description:"Kies een licht thema voor het momenteel actieve project"},sidebarRight:{name:"Zijbalk rechts",description:"Verplaatst de zijbalk naar de rechterkant van het scherm"},shrinkSidebarElements:{name:"Zijbalkelementen verkleinen",description:"Verklein de grootte van de zijbalkelementen van bridge."}},general:{name:"Algemeen",language:{name:"Taal",description:"Kies een taal die bridge. moet gebruiken"},collaborativeMode:{name:"Samenwerkingsmodus",description:"Forceert een volledige verversing van de cache bij het wisselen van project. Schakel uit als u alleen werkt en alleen bridge. gebruikt om uw project te bewerken"},packSpider:{name:"Pack Spider",description:"Pack Spider verbindt bestanden binnen uw projecten en presenteert de verbindingen aan u in een virtueel bestandssysteem"},openLinksInBrowser:{name:"Open koppelingen in de standaardbrowser",description:"Open links in uw standaardbrowser in plaats van een native app-venster"},resetBridgeFolder:{name:"Selecteer Werkmap",description:"Kies de hoofdmap waarop bridge. werkt"}},developer:{name:"Ontwikkelaar",simulateOS:{name:"Simuleer OS",description:"Simuleer een ander besturingssysteem om platformspecifiek gedrag te testen"},devMode:{name:"Ontwikkelaarsmodus",description:"Schakel de ontwikkelaarsmodus in voor deze app"}},actions:{name:"Acties"}},projectFolder:{title:"Project Map",content:"bridge. heeft toegang tot zijn projectmap nodig om correct te werken."},extensionStore:{title:"Uitbreiding Winkel",searchExtensions:"Extensie zoeken..."},pluginInstallLocation:{title:"Kies Installatielocatie"},unsavedFile:{title:"Bevestig",description:"Wilt u uw wijzigingen in dit bestand opslaan voordat u het sluit?",cancel:"Annuleren",noSave:"Afsluiten",save:"Opslaan & Afsluiten"},browserUnsupported:{title:"Niet-ondersteunde browser",description:"Uw browser wordt momenteel niet ondersteund. Gebruik Chrome (Desktop) of Edge (Chromium) om aan de slag te gaan met bridge.!"}},taskManager:{tasks:{packIndexing:{title:"Pakketten Indexeren",description:"bridge. verzamelt gegevens over uw pakket die nodig zijn voor zijn intelligente functies."},compiler:{title:"Project Compileren",description:"bridge. compileert uw project om het klaar te maken om in Minecraft te importeren."}}}},Is={...P,languageName:"",toolbar:{installApp:"Install app",file:{name:"",newFile:" ",import:{name:" ",openFile:" ",importOBJ:"OBJ  "},saveFile:" ",saveAs:"  ",saveAll:" ",closeEditor:"  ",clearAllNotifications:"  ",preferences:{name:" ",settings:"",extensions:""}},edit:{name:"",selection:{name:"",unselect:" ",selectParent:" ",selectNext:" ",selectPrevious:" "},jsonNodes:{name:"JSON ",toggleOpen:" ",toggleOpenChildren:"  ",moveDown:" ",moveUp:" ",commentUncomment:"/"},delete:"",undo:" ",redo:"",copy:"",cut:"",paste:"",alternativePaste:" "},tools:{name:"",docs:" ",presets:"",snippets:" ",goToFile:" "},help:{name:"",about:"",releases:" ",bugReports:" ",pluginAPI:" API",gettingStarted:"bridge.  ",faq:"FAQ"},dev:{name:" ",reloadBrowserWindow:"  ",reloadEditorData:"  ",developerTools:" "}},sidebar:{explorer:{name:""},vanillaPacks:{name:" "},debugLog:{name:" "},extensions:{name:" ",intro:{description:"bridge.    !!",themes:"",snippets:" ",presets:"",uiElements:"UI ",andMore:"  !!",viewExtensions:"  "}}},welcome:{title:"bridge.",subtitle:"    !!",syntaxHighlighting:"Syntax  ",richAutoCompletions:"  ",projectManagement:"  ",customSyntax:"  syntax",customComponents:" ",customCommands:" ",plugins:"    "},windows:{common:{confirm:{title:""},dropdown:{confirm:""},information:{confirm:""},input:{confirm:""}},discord:{content:"bridge.    !!",join:"",later:""},selectFolder:{title:" ",content:"       .",select:"!!"},projectFolder:{title:" ",content:"bridge.         ."},managePlugin:{name:" ",done:""}}};e.config.productionTip=!1,e.use(j);const Os=new j({lang:{locales:{nl:$s,de:Bs,en:Ds,ko:Is}},theme:{dark:!0,options:{customProperties:!0},themes:{dark:{primary:"#1778D2",secondary:"#1778D2",accent:"#1778D2",background:"#121212",sidebarNavigation:"#1F1F1F",expandedSidebar:"#1F1F1F",menu:"#424242",footer:"#111111",tooltip:"#1F1F1F"},light:{primary:"#1778D2",secondary:"#1778D2",accent:"#1778D2",background:"#fafafa",sidebarNavigation:"#FFFFFF",expandedSidebar:"#FFFFFF",tooltip:"#424242",toolbar:"#e0e0e0",footer:"#f5f5f5"}}}}),Ls=new e({vuetify:Os,render:e=>e(As)});Ls.$mount("#app"),self.MonacoEnvironment={getWorker:(e,t)=>"json"===t?new T:"css"===t||"scss"===t||"less"===t?new F:"html"===t||"handlebars"===t||"razor"===t?new E:"typescript"===t||"javascript"===t?new W:new M},fs.main(Ls);
