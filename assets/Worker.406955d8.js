var __defProp=Object.defineProperty,__defNormalProp=(u,e,t)=>e in u?__defProp(u,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):u[e]=t,__publicField=(u,e,t)=>(__defNormalProp(u,"symbol"!=typeof e?e+"":e,t),t);!function(u){"use strict";const e=Symbol("Comlink.proxy"),t=Symbol("Comlink.endpoint"),r=Symbol("Comlink.releaseProxy"),n=Symbol("Comlink.thrown"),i=u=>"object"==typeof u&&null!==u||"function"==typeof u,D=new Map([["proxy",{canHandle:u=>i(u)&&u[e],serialize(u){const{port1:e,port2:t}=new MessageChannel;return a(u,e),[t,[t]]},deserialize(u){return u.start(),c(u,[],e);var e}}],["throw",{canHandle:u=>i(u)&&n in u,serialize({value:u}){let e;return e=u instanceof Error?{isError:!0,value:{message:u.message,name:u.name,stack:u.stack}}:{isError:!1,value:u},[e,[]]},deserialize(u){if(u.isError)throw Object.assign(new Error(u.value.message),u.value);throw u.value}}]]);function a(u,t=self){t.addEventListener("message",(function r(i){if(!i||!i.data)return;const{id:D,type:o,path:c}=Object.assign({path:[]},i.data),l=(i.data.argumentList||[]).map(f);let A;try{const t=c.slice(0,-1).reduce(((u,e)=>u[e]),u),r=c.reduce(((u,e)=>u[e]),u);switch(o){case 0:A=r;break;case 1:t[c.slice(-1)[0]]=f(i.data.value),A=!0;break;case 2:A=r.apply(t,l);break;case 3:A=function(u){return Object.assign(u,{[e]:!0})}(new r(...l));break;case 4:{const{port1:e,port2:t}=new MessageChannel;a(u,t),A=function(u,e){return F.set(u,e),u}(e,[e])}break;case 5:A=void 0}}catch(h){A={value:h,[n]:0}}Promise.resolve(A).catch((u=>({value:u,[n]:0}))).then((u=>{const[e,n]=C(u);t.postMessage(Object.assign(Object.assign({},e),{id:D}),n),5===o&&(t.removeEventListener("message",r),s(t))}))})),t.start&&t.start()}function s(u){(function(u){return"MessagePort"===u.constructor.name})(u)&&u.close()}function o(u){if(u)throw new Error("Proxy has been released and is not useable")}function c(u,e=[],n=function(){}){let i=!1;const D=new Proxy(n,{get(t,n){if(o(i),n===r)return()=>A(u,{type:5,path:e.map((u=>u.toString()))}).then((()=>{s(u),i=!0}));if("then"===n){if(0===e.length)return{then:()=>D};const t=A(u,{type:0,path:e.map((u=>u.toString()))}).then(f);return t.then.bind(t)}return c(u,[...e,n])},set(t,r,n){o(i);const[D,a]=C(n);return A(u,{type:1,path:[...e,r].map((u=>u.toString())),value:D},a).then(f)},apply(r,n,D){o(i);const a=e[e.length-1];if(a===t)return A(u,{type:4}).then(f);if("bind"===a)return c(u,e.slice(0,-1));const[s,F]=l(D);return A(u,{type:2,path:e.map((u=>u.toString())),argumentList:s},F).then(f)},construct(t,r){o(i);const[n,D]=l(r);return A(u,{type:3,path:e.map((u=>u.toString())),argumentList:n},D).then(f)}});return D}function l(u){const e=u.map(C);return[e.map((u=>u[0])),(t=e.map((u=>u[1])),Array.prototype.concat.apply([],t))];var t}const F=new WeakMap;function C(u){for(const[e,t]of D)if(t.canHandle(u)){const[r,n]=t.serialize(u);return[{type:3,name:e,value:r},n]}return[{type:0,value:u},F.get(u)||[]]}function f(u){switch(u.type){case 3:return D.get(u.name).deserialize(u.value);case 0:return u.value}}function A(u,e,t){return new Promise((r=>{const n=new Array(4).fill(0).map((()=>Math.floor(Math.random()*Number.MAX_SAFE_INTEGER).toString(16))).join("-");u.addEventListener("message",(function e(t){t.data&&t.data.id&&t.data.id===n&&(u.removeEventListener("message",e),r(t.data))})),u.start&&u.start(),u.postMessage(Object.assign({id:n},e),t)}))}var h="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto),d=new Uint8Array(16);function E(){if(!h)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return h(d)}var p=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function B(u){return"string"==typeof u&&p.test(u)}for(var y=[],g=0;g<256;++g)y.push((g+256).toString(16).substr(1));function v(u,e,t){var r=(u=u||{}).random||(u.rng||E)();if(r[6]=15&r[6]|64,r[8]=63&r[8]|128,e){t=t||0;for(var n=0;n<16;++n)e[t+n]=r[n];return e}return function(u){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,t=(y[u[e+0]]+y[u[e+1]]+y[u[e+2]]+y[u[e+3]]+"-"+y[u[e+4]]+y[u[e+5]]+"-"+y[u[e+6]]+y[u[e+7]]+"-"+y[u[e+8]]+y[u[e+9]]+"-"+y[u[e+10]]+y[u[e+11]]+y[u[e+12]]+y[u[e+13]]+y[u[e+14]]+y[u[e+15]]).toLowerCase();if(!B(t))throw TypeError("Stringified UUID is invalid");return t}(r)}class m extends class{constructor(){__publicField(this,"listeners",new Set)}get hasListeners(){return this.listeners.size>0}dispatch(u){this.listeners.forEach((e=>e(u)))}on(u,e=!0){if(this.listeners.add(u),e)return{dispose:()=>{this.off(u)}}}off(u){this.listeners.delete(u)}once(u){const e=t=>{u(t),this.off(e)};this.on(e)}disposeListeners(){this.listeners=new Set}}{constructor(u=1){super(),__publicField(this,"firedTimes",0),__publicField(this,"data"),this.needsToFireAmount=u}get fired(){return new Promise((u=>this.once(u)))}get hasFired(){return this.firedTimes>=this.needsToFireAmount}setFiredTimes(u){this.firedTimes=u}resetSignal(){this.data=void 0,this.firedTimes=0}dispatch(u){if(this.firedTimes<this.needsToFireAmount&&this.firedTimes++,this.data=u,this.hasFired)return super.dispatch(u)}on(u,e=!0){return this.hasFired&&u(this.data),super.on(u,e)}}class w{constructor(u,e,t=[],r=v()){__publicField(this,"isVirtual",!0),__publicField(this,"setupDone",new m),this.parent=u,this._name=e,this.basePath=t,this.uuid=r}get path(){return this.parent?this.parent.path.concat(this.name):this.basePath}get idbKey(){return 0===this.path.length?this._name:this.path.join("/")}get name(){return this._name}getParent(){return this.parent}async isSameEntry(u){return u.idbKey===this.idbKey}async queryPermission(u){return"granted"}async requestPermission(u){return"granted"}}const b=new TextEncoder,_=Symbol("writeMethod");class x{constructor(u){__publicField(this,"tmpData",new Uint8Array),__publicField(this,"cursorOffset",0),__publicField(this,"locked",!1),this.fileHandle=u}async write(u){let e;if("string"==typeof u)e=b.encode(u);else if(u instanceof Blob)e=await u.arrayBuffer().then((u=>new Uint8Array(u)));else{if("type"in u){if("seek"===u.type)return await this.seek(u.position);if("truncate"===u.type)return await this.truncate(u.size);if("write"===u.type)return u.position&&await this.seek(u.position),await this.write(u.data);throw new Error(`Unknown data type: ${u.type}`)}e=ArrayBuffer.isView(u)?new Uint8Array(u.buffer):new Uint8Array(u)}this.tmpData=new Uint8Array([...this.tmpData.slice(0,this.cursorOffset),...e]),this.cursorOffset=this.tmpData.length}async seek(u){this.cursorOffset=Math.floor(u)}async truncate(u){this.tmpData=this.tmpData.slice(0,u),this.cursorOffset>u&&(this.cursorOffset=u)}async close(){await this.fileHandle[_](this.tmpData)}async abort(){throw new Error("WriteStream was aborted")}getWriter(){}}function S(u){return new Promise(((e,t)=>{u.oncomplete=u.onsuccess=()=>e(u.result),u.onabort=u.onerror=()=>t(u.error)}))}function P(u,e){const t=function(){if(navigator.userAgentData||!/Safari\//.test(navigator.userAgent)||/Chrom(e|ium)\//.test(navigator.userAgent)||!indexedDB.databases)return Promise.resolve();let u;return new Promise((e=>{const t=()=>indexedDB.databases().finally(e);u=setInterval(t,100),t()})).finally((()=>clearInterval(u)))}().then((()=>{const t=indexedDB.open(u);return t.onupgradeneeded=()=>t.result.createObjectStore(e),S(t)}));return(u,r)=>t.then((t=>r(t.transaction(e,u).objectStore(e))))}let k;function O(){return k||(k=P("keyval-store","keyval")),k}function j(u=O()){const e=[];return function(u,e){return u("readonly",(u=>(u.openCursor().onsuccess=function(){this.result&&(e(this.result),this.result.continue())},S(u.transaction))))}(u,(u=>e.push(u.key))).then((()=>e))}const $=P("virtual-fs","virtual-fs-store"),N=(u,e)=>function(u,e,t=O()){return t("readwrite",(t=>(t.put(e,u),S(t.transaction))))}(u,e,$),I=u=>function(u,e=O()){return e("readonly",(e=>S(e.get(u))))}(u,$),H=u=>function(u,e=O()){return e("readwrite",(e=>(e.delete(u),S(e.transaction))))}(u,$);function M(u){return"function"==typeof u&&/native code/.test(u.toString())}var z="undefined"!=typeof Symbol&&M(Symbol)&&"undefined"!=typeof Reflect&&M(Reflect.ownKeys),T=function(u){return u};function V(u,e,t){var r=t.get,n=t.set;Object.defineProperty(u,e,{enumerable:!0,configurable:!0,get:r||T,set:n||T})}function L(u,e,t,r){Object.defineProperty(u,e,{value:t,enumerable:!!r,writable:!0,configurable:!0})}function R(u,e){return Object.hasOwnProperty.call(u,e)}function J(u){return Array.isArray(u)}function U(u){return null!==u&&"object"==typeof u}function K(u){return"[object Object]"===function(u){return Object.prototype.toString.call(u)}(u)}function W(u){return"function"==typeof u}
/*! *****************************************************************************
      Copyright (c) Microsoft Corporation.
  
      Permission to use, copy, modify, and/or distribute this software for any
      purpose with or without fee is hereby granted.
  
      THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
      REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
      AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
      INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
      LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
      OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
      PERFORMANCE OF THIS SOFTWARE.
      ***************************************************************************** */var q,Q=function(u,e){return(Q=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(u,e){u.__proto__=e}||function(u,e){for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&(u[t]=e[t])})(u,e)};function X(u){var e="function"==typeof Symbol&&Symbol.iterator,t=e&&u[e],r=0;if(t)return t.call(u);if(u&&"number"==typeof u.length)return{next:function(){return u&&r>=u.length&&(u=void 0),{value:u&&u[r++],done:!u}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}var Z=[],G=function(){function u(u){this.active=!0,this.effects=[],this.cleanups=[],this.vm=u}return u.prototype.run=function(u){if(this.active)try{return this.on(),u()}finally{this.off()}},u.prototype.on=function(){this.active&&(Z.push(this),q=this)},u.prototype.off=function(){this.active&&(Z.pop(),q=Z[Z.length-1])},u.prototype.stop=function(){this.active&&(this.vm.$destroy(),this.effects.forEach((function(u){return u.stop()})),this.cleanups.forEach((function(u){return u()})),this.active=!1)},u}();!function(u){function e(e){void 0===e&&(e=!1);var t,r=void 0;return function(u){var e=ru;ru=!1;try{u()}finally{ru=e}}((function(){r=Fu(Du())})),t=u.call(this,r)||this,e||function(u,e){var t;if((e=e||q)&&e.active)return void e.effects.push(u);var r=null===(t=ou())||void 0===t?void 0:t.proxy;r&&r.$on("hook:destroyed",(function(){return u.stop()}))}(t),t}(function(u,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function t(){this.constructor=u}Q(u,e),u.prototype=null===e?Object.create(e):(t.prototype=e.prototype,new t)})(e,u)}(G);var Y=void 0;try{var uu=require("vue");uu&&iu(uu)?Y=uu:uu&&"default"in uu&&iu(uu.default)&&(Y=uu.default)}catch($e){}var eu=null,tu=null,ru=!0,nu="__composition_api_installed__";function iu(u){return u&&W(u)&&"Vue"===u.name}function Du(){return eu}function au(u){ru&&su(u?lu(u):u)}function su(u){if(ru){var e=tu;null==e||e.scope.off(),null==(tu=u)||tu.scope.on()}}function ou(){return tu}var cu=new WeakMap;function lu(u){if(cu.has(u))return cu.get(u);var e={proxy:u,update:u.$forceUpdate,uid:u._uid,emit:u.$emit.bind(u),parent:null,root:null};!function(u){if(!u.scope){var e=new G(u.proxy);u.scope=e,u.proxy.$on("hook:destroyed",(function(){return e.stop()}))}u.scope}(e);return["data","props","attrs","refs","vnode","slots"].forEach((function(t){V(e,t,{get:function(){return u["$"+t]}})})),V(e,"isMounted",{get:function(){return u._isMounted}}),V(e,"isUnmounted",{get:function(){return u._isDestroyed}}),V(e,"isDeactivated",{get:function(){return u._inactive}}),V(e,"emitted",{get:function(){return u._events}}),cu.set(u,e),u.$parent&&(e.parent=lu(u.$parent)),u.$root&&(e.root=lu(u.$root)),e}function Fu(u,e){void 0===e&&(e={});var t=u.config.silent;u.config.silent=!0;var r=new u(e);return u.config.silent=t,r}function Cu(u,e){return function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];if(u.$scopedSlots[e])return u.$scopedSlots[e].apply(u,t)}}var fu="composition-api.refKey",Au=new WeakMap,hu=new WeakMap,du=new WeakMap,Eu=function(u){V(this,"value",{get:u.get,set:u.set})};function pu(u,e){var t=new Eu(u),r=Object.seal(t);return du.set(r,!0),r}function Bu(u){var e;if(yu(u))return u;var t=Pu(((e={})[fu]=u,e));return pu({get:function(){return t[fu]},set:function(u){return t[fu]=u}})}function yu(u){return u instanceof Eu}function gu(u,e){var t=u[e];return yu(t)?t:pu({get:function(){return u[e]},set:function(t){return u[e]=t}})}function vu(u){var e;return Boolean(u&&R(u,"__ob__")&&"object"==typeof u.__ob__&&(null===(e=u.__ob__)||void 0===e?void 0:e.__raw__))}function mu(u){var e;return Boolean(u&&R(u,"__ob__")&&"object"==typeof u.__ob__&&!(null===(e=u.__ob__)||void 0===e?void 0:e.__raw__))}function wu(u){if(!(!K(u)||vu(u)||J(u)||yu(u)||(e=u,t=Du(),t&&e instanceof t)||Au.has(u))){var e,t;Au.set(u,!0);for(var r=Object.keys(u),n=0;n<r.length;n++)bu(u,r[n])}}function bu(u,e,t){if("__ob__"!==e&&!vu(u[e])){var r,n,i=Object.getOwnPropertyDescriptor(u,e);if(i){if(!1===i.configurable)return;r=i.get,n=i.set,r&&!n||2!==arguments.length||(t=u[e])}wu(t),V(u,e,{get:function(){var n=r?r.call(u):t;return e!==fu&&yu(n)?n.value:n},set:function(i){if(!r||n){var D=r?r.call(u):t;e!==fu&&yu(D)&&!yu(i)?D.value=i:n?n.call(u,i):t=i,wu(i)}}})}}function _u(u){var e,t=eu||Y;t.observable?e=t.observable(u):e=Fu(t,{data:{$$state:u}})._data.$$state;return R(e,"__ob__")||xu(e),e}function xu(u,e){var t,r;if(void 0===e&&(e=new Set),!e.has(u)){L(u,"__ob__",function(u){void 0===u&&(u={});return{value:u,dep:{notify:T,depend:T,addSub:T,removeSub:T}}}(u)),e.add(u);try{for(var n=X(Object.keys(u)),i=n.next();!i.done;i=n.next()){var D=u[i.value];(K(D)||J(D))&&!vu(D)&&Object.isExtensible(D)&&xu(D,e)}}catch(a){t={error:a}}finally{try{i&&!i.done&&(r=n.return)&&r.call(n)}finally{if(t)throw t.error}}}}function Su(){return _u({}).__ob__}function Pu(u){if(!U(u))return u;if(!K(u)&&!J(u)||vu(u)||!Object.isExtensible(u))return u;var e=_u(u);return wu(e),e}var ku={set:function(u,e,t){(u.__composition_api_state__=u.__composition_api_state__||{})[e]=t},get:function(u,e){return(u.__composition_api_state__||{})[e]}};function Ou(u){var e=ku.get(u,"rawBindings")||{};if(e&&Object.keys(e).length){for(var t=u.$refs,r=ku.get(u,"refs")||[],n=0;n<r.length;n++){var i=e[s=r[n]];!t[s]&&i&&yu(i)&&(i.value=null)}var D=Object.keys(t),a=[];for(n=0;n<D.length;n++){var s;i=e[s=D[n]];t[s]&&i&&yu(i)&&(i.value=t[s],a.push(s))}ku.set(u,"refs",a)}}function ju(u,e){var t=u.$options._parentVnode;if(t){for(var r=ku.get(u,"slots")||[],n=function(u,e){var t;if(u){if(u._normalized)return u._normalized;for(var r in t={},u)u[r]&&"$"!==r[0]&&(t[r]=!0)}else t={};for(var r in e)r in t||(t[r]=!0);return t}(t.data.scopedSlots,u.$slots),i=0;i<r.length;i++){n[a=r[i]]||delete e[a]}var D=Object.keys(n);for(i=0;i<D.length;i++){var a;e[a=D[i]]||(e[a]=Cu(u,a))}ku.set(u,"slots",D)}}function $u(u,e,t){var r=ou();au(u);try{return e(u)}catch(n){if(!t)throw n;t(n)}finally{su(r)}}function Nu(u){function e(u,t){if(void 0===t&&(t=new Set),!t.has(u)&&K(u)&&!yu(u)&&!mu(u)&&!vu(u)){var r=Du().util.defineReactive;Object.keys(u).forEach((function(n){var i=u[n];r(u,n,i),i&&(t.add(i),e(i,t))}))}}function t(u,e){return void 0===e&&(e=new Map),e.has(u)?e.get(u):(e.set(u,!1),J(u)&&mu(u)?(e.set(u,!0),!0):!(!K(u)||vu(u))&&Object.keys(u).some((function(r){return t(u[r],e)})))}u.mixin({beforeCreate:function(){var u=this,r=u.$options,n=r.setup,i=r.render;i&&(r.render=function(){for(var e=this,t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];return $u(u,(function(){return i.apply(e,t)}))});if(!n)return;if(!W(n))return;var D=r.data;r.data=function(){return function(u,r){void 0===r&&(r={});var n,i=u.$options.setup,D=function(u){var e={slots:{}},t=["attrs"],r=["emit"];return["root","parent","refs","listeners","isServer","ssrContext"].forEach((function(t){var r="$"+t;V(e,t,{get:function(){return u[r]},set:function(){}})})),t.forEach((function(t){var r="$"+t;V(e,t,{get:function(){var e,t,n=Pu({}),i=u[r],D=function(e){V(n,e,{get:function(){return u[r][e]}})};try{for(var a=X(Object.keys(i)),s=a.next();!s.done;s=a.next()){D(s.value)}}catch(o){e={error:o}}finally{try{s&&!s.done&&(t=a.return)&&t.call(a)}finally{if(e)throw e.error}}return n},set:function(){}})})),r.forEach((function(t){var r="$"+t;V(e,t,{get:function(){return function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];u[r].apply(u,e)}}})})),e}(u);if(L(r,"__ob__",Su()),ju(u,D.slots),$u(u,(function(){n=i(r,D)})),!n)return;if(W(n)){var a=n;return void(u.$options.render=function(){return ju(u,D.slots),$u(u,(function(){return a()}))})}if(K(n)){mu(n)&&(n=function(u){if(!K(u))return u;var e={};for(var t in u)e[t]=gu(u,t);return e}(n)),ku.set(u,"rawBindings",n);var s=n;Object.keys(s).forEach((function(r){var n=s[r];if(!yu(n))if(mu(n))J(n)&&(n=Bu(n));else if(W(n)){var i=n;n=n.bind(u),Object.keys(i).forEach((function(u){n[u]=i[u]}))}else U(n)?t(n)&&e(n):n=Bu(n);!function(u,e,t){var r=u.$options.props;e in u||r&&R(r,e)||(yu(t)?V(u,e,{get:function(){return t.value},set:function(u){t.value=u}}):V(u,e,{get:function(){return mu(t)&&t.__ob__.dep.depend(),t},set:function(u){t=u}}))}(u,r,n)}))}}(u,u.$props),W(D)?D.call(u,u):D||{}}},mounted:function(){Ou(this)},updated:function(){var u;Ou(this),(null===(u=this.$vnode)||void 0===u?void 0:u.context)&&Ou(this.$vnode.context)}})}function Iu(u,e){if(!u)return e;if(!e)return u;for(var t,r,n,i=z?Reflect.ownKeys(u):Object.keys(u),D=0;D<i.length;D++)"__ob__"!==(t=i[D])&&(r=e[t],n=u[t],R(e,t)?r!==n&&K(r)&&!yu(r)&&K(n)&&!yu(n)&&Iu(n,r):e[t]=n);return e}function Hu(u){(function(u){return R(u,nu)})(u)||(u.config.optionMergeStrategies.setup=function(u,e){return function(t,r){return Iu(W(u)?u(t,r)||{}:void 0,W(e)?e(t,r)||{}:void 0)}},function(u){eu=u,Object.defineProperty(u,nu,{configurable:!0,writable:!0,value:!0})}(u),Nu(u))}var Mu={install:function(u){return Hu(u)}};"undefined"!=typeof window&&window.Vue&&window.Vue.use(Mu);class zu extends w{constructor(u,e,t,r=!1){super(u,e),__publicField(this,"kind","file"),__publicField(this,"isFile",!0),__publicField(this,"isDirectory",!1),__publicField(this,"fileData"),this.inMemory=r,t?this.setup(t):this.setupDone.dispatch()}async setup(u){if(this.fileData=globalThis.document?function(u){if(!K(u)&&!J(u)||!Object.isExtensible(u))return u;var e=Su();return e.__raw__=!0,L(u,"__ob__",e),hu.set(u,!0),u}(u):u,this.inMemory||this.path.join("/").startsWith("data/packages")&&u.length<1e4)return this.setupDone.dispatch();await this.updateIdb(u),this.setupDone.dispatch()}async updateIdb(u){await N(this.idbKey,u),this.fileData=void 0}async loadFromIdb(){if(this.fileData)return this.fileData;let u=await I(this.idbKey);if(!u)throw console.log(this.parent),new Error(`File not found: "${this.path.join("/")}"`);return u}serialize(){return{kind:"file",name:this.name,fileData:this.fileData}}async removeSelf(){await H(this.idbKey)}async getFile(){const u=await this.loadFromIdb();return new File([u],this.name)}async createWritable(){return new x(this)}async[_](u){this.inMemory?this.fileData=u:await this.updateIdb(u)}}class Tu extends w{constructor(u,e,t,r=!1,n=[]){super(u,e,n),__publicField(this,"kind","directory"),__publicField(this,"isDirectory",!0),__publicField(this,"isFile",!1),this.children=t,this.updateIdb(r)}async updateIdb(u=!1){if(u){const u=await j($);for(const e of u)"string"==typeof e&&e.startsWith("data/packages/")&&await H(e)}this.children||await this.hasChildren()||await N(this.idbKey,[]),this.setupDone.dispatch()}async addChild(u){await this.has(u.name)||(this.children?this.children.set(u.name,u):await N(this.idbKey,[...await this.fromIdb(),u.name]))}async fromIdb(){var u;return null!=(u=await I(this.idbKey))?u:[]}async getChildren(){return this.children?[...this.children.values()]:await Promise.all((await this.fromIdb()).map((u=>this.getChild(u))).filter((u=>void 0!==u)))}getChildPath(u){return this.path.concat(u).join("/")}async getChild(u){if(this.children)return this.children.get(u);if(await this.has(u)){const e=await I(this.getChildPath(u));if(e instanceof Uint8Array)return new zu(this,u);if(Array.isArray(e))return new Tu(this,u)}}async deleteChild(u){this.children?this.children.delete(u):await N(this.idbKey,(await this.fromIdb()).filter((e=>e!==u)))}async hasChildren(){return this.children?this.children.size>0:(await this.fromIdb()).length>0}async has(u){return this.children?this.children.has(u):(await this.fromIdb()).includes(u)}serialize(){return{kind:"directory",name:this.name,path:this.path,children:this.children?[...this.children.values()].map((u=>u.serialize())):void 0}}static deserialize(u,e=null){var t;const r=new Tu(e,u.name,void 0,!1,u.path);for(const n of null!=(t=u.children)?t:[])"directory"===n.kind?r.addChild(Tu.deserialize(n,r)):r.addChild(new zu(r,n.name,n.fileData));return r}async getDirectoryHandle(u,{create:e}={}){let t=await this.getChild(u);if(t&&"file"===t.kind)throw new Error(`TypeMismatch: Expected directory with name "${u}", found file`);if(!t){if(!e)throw new Error(`No file with the name ${u} exists in this folder`);t=new Tu(this,u,this.children?new Map:void 0),await t.setupDone.fired,await this.addChild(t)}return t}async getFileHandle(u,{create:e,initialData:t}={}){let r=await this.getChild(u);if(r&&"directory"===r.kind)throw new Error(`TypeMismatch: Expected file with name "${u}", found directory`);if(!r){if(!e)throw new Error(`No file with the name ${u} exists in this folder`);r=new zu(this,u,null!=t?t:new Uint8Array),await r.setupDone.fired,await this.addChild(r)}return r}async removeEntry(u,{recursive:e}={}){const t=await this.getChild(u);if(!t)throw new Error(`No entry with the name ${u} exists in this folder`);if("directory"===t.kind&&!e&&await t.hasChildren())throw new Error('Cannot remove directory with children without "recursive" option being set to true');await t.removeSelf(),await this.deleteChild(u)}async resolve(u){const e=[u.name];let t=u.getParent();for(;null!==t&&!(await t.isSameEntry(this));)e.unshift(t.name),t=t.getParent();return null===t?null:e}async removeSelf(){const u=await this.getChildren();for(const e of u)await e.removeSelf();this.children||await H(this.idbKey)}[Symbol.asyncIterator](){return this.entries()}keys(){return this.children?this.children.keys():{childNamesPromise:this.fromIdb(),[Symbol.asyncIterator](){return{i:0,childNamesPromise:this.childNamesPromise,async next(){const u=await this.childNamesPromise;return this.i<u.length?{done:!1,value:u[this.i++]}:{done:!0}}}}}}entries(){return this.children?this.children.entries():{childrenPromise:this.getChildren(),[Symbol.asyncIterator](){return{i:0,childrenPromise:this.childrenPromise,async next(){const u=await this.childrenPromise;return this.i<u.length?{done:!1,value:[u[this.i].name,u[this.i++]]}:{done:!0}}}}}}values(){return this.children?this.children.values():{childrenPromise:this.getChildren(),[Symbol.asyncIterator](){return{i:0,childrenPromise:this.childrenPromise,async next(){const u=await this.childrenPromise;return this.i<u.length?{done:!1,value:u[this.i++]}:{done:!0}}}}}}getEntries(){return this.values()}getDirectory(u,e={}){return this.getDirectoryHandle(u,e)}getFile(u,e={}){return this.getFileHandle(u,e)}}D.set("VirtualFileHandle",{canHandle:u=>u instanceof zu,serialize:u=>[u.serialize(),[]],deserialize:u=>new zu(null,u.name,u.fileData)}),D.set("VirtualDirectoryHandle",{canHandle:u=>u instanceof Tu,serialize:u=>[u.serialize(),[]],deserialize:u=>Tu.deserialize(u)});var Vu={Space_Separator:/[\u1680\u2000-\u200A\u202F\u205F\u3000]/,ID_Start:/[\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0561-\u0587\u05D0-\u05EA\u05F0-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u08A0-\u08B4\u08B6-\u08BD\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u170C\u170E-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1877\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4B\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C88\u1CE9-\u1CEC\u1CEE-\u1CF1\u1CF5\u1CF6\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312E\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FEA\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6EF\uA717-\uA71F\uA722-\uA788\uA78B-\uA7AE\uA7B0-\uA7B7\uA7F7-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB65\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDD40-\uDD74\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF2D-\uDF4A\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF\uDFD1-\uDFD5]|\uD801[\uDC00-\uDC9D\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE33\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2]|\uD804[\uDC03-\uDC37\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDF00-\uDF19]|\uD806[\uDCA0-\uDCDF\uDCFF\uDE00\uDE0B-\uDE32\uDE3A\uDE50\uDE5C-\uDE83\uDE86-\uDE89\uDEC0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC72-\uDC8F\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD30\uDD46]|\uD808[\uDC00-\uDF99]|\uD809[\uDC00-\uDC6E\uDC80-\uDD43]|[\uD80C\uD81C-\uD820\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDF00-\uDF44\uDF50\uDF93-\uDF9F\uDFE0\uDFE1]|\uD821[\uDC00-\uDFEC]|\uD822[\uDC00-\uDEF2]|\uD82C[\uDC00-\uDD1E\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD83A[\uDC00-\uDCC4\uDD00-\uDD43]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDED6\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF34\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D]/,ID_Continue:/[\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0300-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u0483-\u0487\u048A-\u052F\u0531-\u0556\u0559\u0561-\u0587\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u05D0-\u05EA\u05F0-\u05F2\u0610-\u061A\u0620-\u0669\u066E-\u06D3\u06D5-\u06DC\u06DF-\u06E8\u06EA-\u06FC\u06FF\u0710-\u074A\u074D-\u07B1\u07C0-\u07F5\u07FA\u0800-\u082D\u0840-\u085B\u0860-\u086A\u08A0-\u08B4\u08B6-\u08BD\u08D4-\u08E1\u08E3-\u0963\u0966-\u096F\u0971-\u0983\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BC-\u09C4\u09C7\u09C8\u09CB-\u09CE\u09D7\u09DC\u09DD\u09DF-\u09E3\u09E6-\u09F1\u09FC\u0A01-\u0A03\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A3C\u0A3E-\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A59-\u0A5C\u0A5E\u0A66-\u0A75\u0A81-\u0A83\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABC-\u0AC5\u0AC7-\u0AC9\u0ACB-\u0ACD\u0AD0\u0AE0-\u0AE3\u0AE6-\u0AEF\u0AF9-\u0AFF\u0B01-\u0B03\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3C-\u0B44\u0B47\u0B48\u0B4B-\u0B4D\u0B56\u0B57\u0B5C\u0B5D\u0B5F-\u0B63\u0B66-\u0B6F\u0B71\u0B82\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCD\u0BD0\u0BD7\u0BE6-\u0BEF\u0C00-\u0C03\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D-\u0C44\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C58-\u0C5A\u0C60-\u0C63\u0C66-\u0C6F\u0C80-\u0C83\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBC-\u0CC4\u0CC6-\u0CC8\u0CCA-\u0CCD\u0CD5\u0CD6\u0CDE\u0CE0-\u0CE3\u0CE6-\u0CEF\u0CF1\u0CF2\u0D00-\u0D03\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D44\u0D46-\u0D48\u0D4A-\u0D4E\u0D54-\u0D57\u0D5F-\u0D63\u0D66-\u0D6F\u0D7A-\u0D7F\u0D82\u0D83\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0DCA\u0DCF-\u0DD4\u0DD6\u0DD8-\u0DDF\u0DE6-\u0DEF\u0DF2\u0DF3\u0E01-\u0E3A\u0E40-\u0E4E\u0E50-\u0E59\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB9\u0EBB-\u0EBD\u0EC0-\u0EC4\u0EC6\u0EC8-\u0ECD\u0ED0-\u0ED9\u0EDC-\u0EDF\u0F00\u0F18\u0F19\u0F20-\u0F29\u0F35\u0F37\u0F39\u0F3E-\u0F47\u0F49-\u0F6C\u0F71-\u0F84\u0F86-\u0F97\u0F99-\u0FBC\u0FC6\u1000-\u1049\u1050-\u109D\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u135D-\u135F\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u170C\u170E-\u1714\u1720-\u1734\u1740-\u1753\u1760-\u176C\u176E-\u1770\u1772\u1773\u1780-\u17D3\u17D7\u17DC\u17DD\u17E0-\u17E9\u180B-\u180D\u1810-\u1819\u1820-\u1877\u1880-\u18AA\u18B0-\u18F5\u1900-\u191E\u1920-\u192B\u1930-\u193B\u1946-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u19D0-\u19D9\u1A00-\u1A1B\u1A20-\u1A5E\u1A60-\u1A7C\u1A7F-\u1A89\u1A90-\u1A99\u1AA7\u1AB0-\u1ABD\u1B00-\u1B4B\u1B50-\u1B59\u1B6B-\u1B73\u1B80-\u1BF3\u1C00-\u1C37\u1C40-\u1C49\u1C4D-\u1C7D\u1C80-\u1C88\u1CD0-\u1CD2\u1CD4-\u1CF9\u1D00-\u1DF9\u1DFB-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u203F\u2040\u2054\u2071\u207F\u2090-\u209C\u20D0-\u20DC\u20E1\u20E5-\u20F0\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D7F-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2DE0-\u2DFF\u2E2F\u3005-\u3007\u3021-\u302F\u3031-\u3035\u3038-\u303C\u3041-\u3096\u3099\u309A\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312E\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FEA\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA62B\uA640-\uA66F\uA674-\uA67D\uA67F-\uA6F1\uA717-\uA71F\uA722-\uA788\uA78B-\uA7AE\uA7B0-\uA7B7\uA7F7-\uA827\uA840-\uA873\uA880-\uA8C5\uA8D0-\uA8D9\uA8E0-\uA8F7\uA8FB\uA8FD\uA900-\uA92D\uA930-\uA953\uA960-\uA97C\uA980-\uA9C0\uA9CF-\uA9D9\uA9E0-\uA9FE\uAA00-\uAA36\uAA40-\uAA4D\uAA50-\uAA59\uAA60-\uAA76\uAA7A-\uAAC2\uAADB-\uAADD\uAAE0-\uAAEF\uAAF2-\uAAF6\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB65\uAB70-\uABEA\uABEC\uABED\uABF0-\uABF9\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE00-\uFE0F\uFE20-\uFE2F\uFE33\uFE34\uFE4D-\uFE4F\uFE70-\uFE74\uFE76-\uFEFC\uFF10-\uFF19\uFF21-\uFF3A\uFF3F\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDD40-\uDD74\uDDFD\uDE80-\uDE9C\uDEA0-\uDED0\uDEE0\uDF00-\uDF1F\uDF2D-\uDF4A\uDF50-\uDF7A\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF\uDFD1-\uDFD5]|\uD801[\uDC00-\uDC9D\uDCA0-\uDCA9\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00-\uDE03\uDE05\uDE06\uDE0C-\uDE13\uDE15-\uDE17\uDE19-\uDE33\uDE38-\uDE3A\uDE3F\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE6\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2]|\uD804[\uDC00-\uDC46\uDC66-\uDC6F\uDC7F-\uDCBA\uDCD0-\uDCE8\uDCF0-\uDCF9\uDD00-\uDD34\uDD36-\uDD3F\uDD50-\uDD73\uDD76\uDD80-\uDDC4\uDDCA-\uDDCC\uDDD0-\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE37\uDE3E\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEEA\uDEF0-\uDEF9\uDF00-\uDF03\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3C-\uDF44\uDF47\uDF48\uDF4B-\uDF4D\uDF50\uDF57\uDF5D-\uDF63\uDF66-\uDF6C\uDF70-\uDF74]|\uD805[\uDC00-\uDC4A\uDC50-\uDC59\uDC80-\uDCC5\uDCC7\uDCD0-\uDCD9\uDD80-\uDDB5\uDDB8-\uDDC0\uDDD8-\uDDDD\uDE00-\uDE40\uDE44\uDE50-\uDE59\uDE80-\uDEB7\uDEC0-\uDEC9\uDF00-\uDF19\uDF1D-\uDF2B\uDF30-\uDF39]|\uD806[\uDCA0-\uDCE9\uDCFF\uDE00-\uDE3E\uDE47\uDE50-\uDE83\uDE86-\uDE99\uDEC0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC36\uDC38-\uDC40\uDC50-\uDC59\uDC72-\uDC8F\uDC92-\uDCA7\uDCA9-\uDCB6\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD36\uDD3A\uDD3C\uDD3D\uDD3F-\uDD47\uDD50-\uDD59]|\uD808[\uDC00-\uDF99]|\uD809[\uDC00-\uDC6E\uDC80-\uDD43]|[\uD80C\uD81C-\uD820\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE60-\uDE69\uDED0-\uDEED\uDEF0-\uDEF4\uDF00-\uDF36\uDF40-\uDF43\uDF50-\uDF59\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDF00-\uDF44\uDF50-\uDF7E\uDF8F-\uDF9F\uDFE0\uDFE1]|\uD821[\uDC00-\uDFEC]|\uD822[\uDC00-\uDEF2]|\uD82C[\uDC00-\uDD1E\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99\uDC9D\uDC9E]|\uD834[\uDD65-\uDD69\uDD6D-\uDD72\uDD7B-\uDD82\uDD85-\uDD8B\uDDAA-\uDDAD\uDE42-\uDE44]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB\uDFCE-\uDFFF]|\uD836[\uDE00-\uDE36\uDE3B-\uDE6C\uDE75\uDE84\uDE9B-\uDE9F\uDEA1-\uDEAF]|\uD838[\uDC00-\uDC06\uDC08-\uDC18\uDC1B-\uDC21\uDC23\uDC24\uDC26-\uDC2A]|\uD83A[\uDC00-\uDCC4\uDCD0-\uDCD6\uDD00-\uDD4A\uDD50-\uDD59]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDED6\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF34\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D]|\uDB40[\uDD00-\uDDEF]/},Lu={isSpaceSeparator:u=>"string"==typeof u&&Vu.Space_Separator.test(u),isIdStartChar:u=>"string"==typeof u&&(u>="a"&&u<="z"||u>="A"&&u<="Z"||"$"===u||"_"===u||Vu.ID_Start.test(u)),isIdContinueChar:u=>"string"==typeof u&&(u>="a"&&u<="z"||u>="A"&&u<="Z"||u>="0"&&u<="9"||"$"===u||"_"===u||"‌"===u||"‍"===u||Vu.ID_Continue.test(u)),isDigit:u=>"string"==typeof u&&/[0-9]/.test(u),isHexDigit:u=>"string"==typeof u&&/[0-9A-Fa-f]/.test(u)};let Ru,Ju,Uu,Ku,Wu,qu,Qu,Xu,Zu;function Gu(u,e,t){const r=u[e];if(null!=r&&"object"==typeof r)for(const n in r){const u=Gu(r,n,t);void 0===u?delete r[n]:r[n]=u}return t.call(u,e,r)}let Yu,ue,ee,te,re;function ne(){for(Yu="default",ue="",ee=!1,te=1;;){re=ie();const u=ae[Yu]();if(u)return u}}function ie(){if(Ru[Ku])return String.fromCodePoint(Ru.codePointAt(Ku))}function De(){const u=ie();return"\n"===u?(Wu++,qu=0):u?qu+=u.length:qu++,u&&(Ku+=u.length),u}const ae={default(){switch(re){case"\t":case"\v":case"\f":case" ":case" ":case"\ufeff":case"\n":case"\r":case"\u2028":case"\u2029":return void De();case"/":return De(),void(Yu="comment");case void 0:return De(),se("eof")}if(!Lu.isSpaceSeparator(re))return ae[Ju]();De()},comment(){switch(re){case"*":return De(),void(Yu="multiLineComment");case"/":return De(),void(Yu="singleLineComment")}throw fe(De())},multiLineComment(){switch(re){case"*":return De(),void(Yu="multiLineCommentAsterisk");case void 0:throw fe(De())}De()},multiLineCommentAsterisk(){switch(re){case"*":return void De();case"/":return De(),void(Yu="default");case void 0:throw fe(De())}De(),Yu="multiLineComment"},singleLineComment(){switch(re){case"\n":case"\r":case"\u2028":case"\u2029":return De(),void(Yu="default");case void 0:return De(),se("eof")}De()},value(){switch(re){case"{":case"[":return se("punctuator",De());case"n":return De(),oe("ull"),se("null",null);case"t":return De(),oe("rue"),se("boolean",!0);case"f":return De(),oe("alse"),se("boolean",!1);case"-":case"+":return"-"===De()&&(te=-1),void(Yu="sign");case".":return ue=De(),void(Yu="decimalPointLeading");case"0":return ue=De(),void(Yu="zero");case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":return ue=De(),void(Yu="decimalInteger");case"I":return De(),oe("nfinity"),se("numeric",1/0);case"N":return De(),oe("aN"),se("numeric",NaN);case'"':case"'":return ee='"'===De(),ue="",void(Yu="string")}throw fe(De())},identifierNameStartEscape(){if("u"!==re)throw fe(De());De();const u=ce();switch(u){case"$":case"_":break;default:if(!Lu.isIdStartChar(u))throw he()}ue+=u,Yu="identifierName"},identifierName(){switch(re){case"$":case"_":case"‌":case"‍":return void(ue+=De());case"\\":return De(),void(Yu="identifierNameEscape")}if(!Lu.isIdContinueChar(re))return se("identifier",ue);ue+=De()},identifierNameEscape(){if("u"!==re)throw fe(De());De();const u=ce();switch(u){case"$":case"_":case"‌":case"‍":break;default:if(!Lu.isIdContinueChar(u))throw he()}ue+=u,Yu="identifierName"},sign(){switch(re){case".":return ue=De(),void(Yu="decimalPointLeading");case"0":return ue=De(),void(Yu="zero");case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":return ue=De(),void(Yu="decimalInteger");case"I":return De(),oe("nfinity"),se("numeric",te*(1/0));case"N":return De(),oe("aN"),se("numeric",NaN)}throw fe(De())},zero(){switch(re){case".":return ue+=De(),void(Yu="decimalPoint");case"e":case"E":return ue+=De(),void(Yu="decimalExponent");case"x":case"X":return ue+=De(),void(Yu="hexadecimal")}return se("numeric",0*te)},decimalInteger(){switch(re){case".":return ue+=De(),void(Yu="decimalPoint");case"e":case"E":return ue+=De(),void(Yu="decimalExponent")}if(!Lu.isDigit(re))return se("numeric",te*Number(ue));ue+=De()},decimalPointLeading(){if(Lu.isDigit(re))return ue+=De(),void(Yu="decimalFraction");throw fe(De())},decimalPoint(){switch(re){case"e":case"E":return ue+=De(),void(Yu="decimalExponent")}return Lu.isDigit(re)?(ue+=De(),void(Yu="decimalFraction")):se("numeric",te*Number(ue))},decimalFraction(){switch(re){case"e":case"E":return ue+=De(),void(Yu="decimalExponent")}if(!Lu.isDigit(re))return se("numeric",te*Number(ue));ue+=De()},decimalExponent(){switch(re){case"+":case"-":return ue+=De(),void(Yu="decimalExponentSign")}if(Lu.isDigit(re))return ue+=De(),void(Yu="decimalExponentInteger");throw fe(De())},decimalExponentSign(){if(Lu.isDigit(re))return ue+=De(),void(Yu="decimalExponentInteger");throw fe(De())},decimalExponentInteger(){if(!Lu.isDigit(re))return se("numeric",te*Number(ue));ue+=De()},hexadecimal(){if(Lu.isHexDigit(re))return ue+=De(),void(Yu="hexadecimalInteger");throw fe(De())},hexadecimalInteger(){if(!Lu.isHexDigit(re))return se("numeric",te*Number(ue));ue+=De()},string(){switch(re){case"\\":return De(),void(ue+=function(){switch(ie()){case"b":return De(),"\b";case"f":return De(),"\f";case"n":return De(),"\n";case"r":return De(),"\r";case"t":return De(),"\t";case"v":return De(),"\v";case"0":if(De(),Lu.isDigit(ie()))throw fe(De());return"\0";case"x":return De(),function(){let u="",e=ie();if(!Lu.isHexDigit(e))throw fe(De());if(u+=De(),e=ie(),!Lu.isHexDigit(e))throw fe(De());return u+=De(),String.fromCodePoint(parseInt(u,16))}();case"u":return De(),ce();case"\n":case"\u2028":case"\u2029":return De(),"";case"\r":return De(),"\n"===ie()&&De(),"";case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":case void 0:throw fe(De())}return De()}());case'"':return ee?(De(),se("string",ue)):void(ue+=De());case"'":return ee?void(ue+=De()):(De(),se("string",ue));case"\n":case"\r":throw fe(De());case"\u2028":case"\u2029":u=re,console.warn(`JSON5: '${de(u)}' in strings is not valid ECMAScript; consider escaping`);break;case void 0:throw fe(De())}var u;ue+=De()},start(){switch(re){case"{":case"[":return se("punctuator",De())}Yu="value"},beforePropertyName(){switch(re){case"$":case"_":return ue=De(),void(Yu="identifierName");case"\\":return De(),void(Yu="identifierNameStartEscape");case"}":return se("punctuator",De());case'"':case"'":return ee='"'===De(),void(Yu="string")}if(Lu.isIdStartChar(re))return ue+=De(),void(Yu="identifierName");throw fe(De())},afterPropertyName(){if(":"===re)return se("punctuator",De());throw fe(De())},beforePropertyValue(){Yu="value"},afterPropertyValue(){switch(re){case",":case"}":return se("punctuator",De())}throw fe(De())},beforeArrayValue(){if("]"===re)return se("punctuator",De());Yu="value"},afterArrayValue(){switch(re){case",":case"]":return se("punctuator",De())}throw fe(De())},end(){throw fe(De())}};function se(u,e){return{type:u,value:e,line:Wu,column:qu}}function oe(u){for(const e of u){if(ie()!==e)throw fe(De());De()}}function ce(){let u="",e=4;for(;e-- >0;){const e=ie();if(!Lu.isHexDigit(e))throw fe(De());u+=De()}return String.fromCodePoint(parseInt(u,16))}const le={start(){if("eof"===Qu.type)throw Ae();Fe()},beforePropertyName(){switch(Qu.type){case"identifier":case"string":return Xu=Qu.value,void(Ju="afterPropertyName");case"punctuator":return void Ce();case"eof":throw Ae()}},afterPropertyName(){if("eof"===Qu.type)throw Ae();Ju="beforePropertyValue"},beforePropertyValue(){if("eof"===Qu.type)throw Ae();Fe()},beforeArrayValue(){if("eof"===Qu.type)throw Ae();"punctuator"!==Qu.type||"]"!==Qu.value?Fe():Ce()},afterPropertyValue(){if("eof"===Qu.type)throw Ae();switch(Qu.value){case",":return void(Ju="beforePropertyName");case"}":Ce()}},afterArrayValue(){if("eof"===Qu.type)throw Ae();switch(Qu.value){case",":return void(Ju="beforeArrayValue");case"]":Ce()}},end(){}};function Fe(){let u;switch(Qu.type){case"punctuator":switch(Qu.value){case"{":u={};break;case"[":u=[]}break;case"null":case"boolean":case"numeric":case"string":u=Qu.value}if(void 0===Zu)Zu=u;else{const e=Uu[Uu.length-1];Array.isArray(e)?e.push(u):e[Xu]=u}if(null!==u&&"object"==typeof u)Uu.push(u),Ju=Array.isArray(u)?"beforeArrayValue":"beforePropertyName";else{const u=Uu[Uu.length-1];Ju=null==u?"end":Array.isArray(u)?"afterArrayValue":"afterPropertyValue"}}function Ce(){Uu.pop();const u=Uu[Uu.length-1];Ju=null==u?"end":Array.isArray(u)?"afterArrayValue":"afterPropertyValue"}function fe(u){return Ee(void 0===u?`JSON5: invalid end of input at ${Wu}:${qu}`:`JSON5: invalid character '${de(u)}' at ${Wu}:${qu}`)}function Ae(){return Ee(`JSON5: invalid end of input at ${Wu}:${qu}`)}function he(){return qu-=5,Ee(`JSON5: invalid identifier character at ${Wu}:${qu}`)}function de(u){const e={"'":"\\'",'"':'\\"',"\\":"\\\\","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","\t":"\\t","\v":"\\v","\0":"\\0","\u2028":"\\u2028","\u2029":"\\u2029"};if(e[u])return e[u];if(u<" "){const e=u.charCodeAt(0).toString(16);return"\\x"+("00"+e).substring(e.length)}return u}function Ee(u){const e=new SyntaxError(u);return e.lineNumber=Wu,e.columnNumber=qu,e}var pe={parse:function(u,e){Ru=String(u),Ju="start",Uu=[],Ku=0,Wu=1,qu=0,Qu=void 0,Xu=void 0,Zu=void 0;do{Qu=ne(),le[Ju]()}while("eof"!==Qu.type);return"function"==typeof e?Gu({"":Zu},"",e):Zu},stringify:function(u,e,t){const r=[];let n,i,D,a="",s="";if(null==e||"object"!=typeof e||Array.isArray(e)||(t=e.space,D=e.quote,e=e.replacer),"function"==typeof e)i=e;else if(Array.isArray(e)){n=[];for(const u of e){let e;"string"==typeof u?e=u:("number"==typeof u||u instanceof String||u instanceof Number)&&(e=String(u)),void 0!==e&&n.indexOf(e)<0&&n.push(e)}}return t instanceof Number?t=Number(t):t instanceof String&&(t=String(t)),"number"==typeof t?t>0&&(t=Math.min(10,Math.floor(t)),s="          ".substr(0,t)):"string"==typeof t&&(s=t.substr(0,10)),o("",{"":u});function o(u,e){let t=e[u];switch(null!=t&&("function"==typeof t.toJSON5?t=t.toJSON5(u):"function"==typeof t.toJSON&&(t=t.toJSON(u))),i&&(t=i.call(e,u,t)),t instanceof Number?t=Number(t):t instanceof String?t=String(t):t instanceof Boolean&&(t=t.valueOf()),t){case null:return"null";case!0:return"true";case!1:return"false"}return"string"==typeof t?c(t):"number"==typeof t?String(t):"object"==typeof t?Array.isArray(t)?function(u){if(r.indexOf(u)>=0)throw TypeError("Converting circular structure to JSON5");r.push(u);let e=a;a+=s;let t,n=[];for(let r=0;r<u.length;r++){const e=o(String(r),u);n.push(void 0!==e?e:"null")}if(0===n.length)t="[]";else if(""===s){t="["+n.join(",")+"]"}else{let u=",\n"+a,r=n.join(u);t="[\n"+a+r+",\n"+e+"]"}return r.pop(),a=e,t}(t):function(u){if(r.indexOf(u)>=0)throw TypeError("Converting circular structure to JSON5");r.push(u);let e=a;a+=s;let t,i=n||Object.keys(u),D=[];for(const r of i){const e=o(r,u);if(void 0!==e){let u=l(r)+":";""!==s&&(u+=" "),u+=e,D.push(u)}}if(0===D.length)t="{}";else{let u;if(""===s)u=D.join(","),t="{"+u+"}";else{let r=",\n"+a;u=D.join(r),t="{\n"+a+u+",\n"+e+"}"}}return r.pop(),a=e,t}(t):void 0}function c(u){const e={"'":.1,'"':.2},t={"'":"\\'",'"':'\\"',"\\":"\\\\","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","\t":"\\t","\v":"\\v","\0":"\\0","\u2028":"\\u2028","\u2029":"\\u2029"};let r="";for(let i=0;i<u.length;i++){const n=u[i];switch(n){case"'":case'"':e[n]++,r+=n;continue;case"\0":if(Lu.isDigit(u[i+1])){r+="\\x00";continue}}if(t[n])r+=t[n];else if(n<" "){let u=n.charCodeAt(0).toString(16);r+="\\x"+("00"+u).substring(u.length)}else r+=n}const n=D||Object.keys(e).reduce(((u,t)=>e[u]<e[t]?u:t));return r=r.replace(new RegExp(n,"g"),t[n]),n+r+n}function l(u){if(0===u.length)return c(u);const e=String.fromCodePoint(u.codePointAt(0));if(!Lu.isIdStartChar(e))return c(u);for(let t=e.length;t<u.length;t++)if(!Lu.isIdContinueChar(String.fromCodePoint(u.codePointAt(t))))return c(u);return u}}};async function Be(u,e,t=new Set,r=""){for await(const n of u.values()){const u=0===r.length?n.name:`${r}/${n.name}`;if("file"===n.kind){if("."===n.name[0])continue;await e(n,u)}else"directory"!==n.kind||t.has(u)||await Be(n,e,t,u)}}function ye(u){if("string"!=typeof u)throw new TypeError("Path must be a string. Received "+JSON.stringify(u))}function ge(u,e){for(var t,r="",n=0,i=-1,D=0,a=0;a<=u.length;++a){if(a<u.length)t=u.charCodeAt(a);else{if(47===t)break;t=47}if(47===t){if(i===a-1||1===D);else if(i!==a-1&&2===D){if(r.length<2||2!==n||46!==r.charCodeAt(r.length-1)||46!==r.charCodeAt(r.length-2))if(r.length>2){var s=r.lastIndexOf("/");if(s!==r.length-1){-1===s?(r="",n=0):n=(r=r.slice(0,s)).length-1-r.lastIndexOf("/"),i=a,D=0;continue}}else if(2===r.length||1===r.length){r="",n=0,i=a,D=0;continue}e&&(r.length>0?r+="/..":r="..",n=2)}else r.length>0?r+="/"+u.slice(i+1,a):r=u.slice(i+1,a),n=a-i-1;i=a,D=0}else 46===t&&-1!==D?++D:D=-1}return r}var ve={resolve:function(){for(var u,e="",t=!1,r=arguments.length-1;r>=-1&&!t;r--){var n;r>=0?n=arguments[r]:(void 0===u&&(u=process.cwd()),n=u),ye(n),0!==n.length&&(e=n+"/"+e,t=47===n.charCodeAt(0))}return e=ge(e,!t),t?e.length>0?"/"+e:"/":e.length>0?e:"."},normalize:function(u){if(ye(u),0===u.length)return".";var e=47===u.charCodeAt(0),t=47===u.charCodeAt(u.length-1);return 0!==(u=ge(u,!e)).length||e||(u="."),u.length>0&&t&&(u+="/"),e?"/"+u:u},isAbsolute:function(u){return ye(u),u.length>0&&47===u.charCodeAt(0)},join:function(){if(0===arguments.length)return".";for(var u,e=0;e<arguments.length;++e){var t=arguments[e];ye(t),t.length>0&&(void 0===u?u=t:u+="/"+t)}return void 0===u?".":ve.normalize(u)},relative:function(u,e){if(ye(u),ye(e),u===e)return"";if((u=ve.resolve(u))===(e=ve.resolve(e)))return"";for(var t=1;t<u.length&&47===u.charCodeAt(t);++t);for(var r=u.length,n=r-t,i=1;i<e.length&&47===e.charCodeAt(i);++i);for(var D=e.length-i,a=n<D?n:D,s=-1,o=0;o<=a;++o){if(o===a){if(D>a){if(47===e.charCodeAt(i+o))return e.slice(i+o+1);if(0===o)return e.slice(i+o)}else n>a&&(47===u.charCodeAt(t+o)?s=o:0===o&&(s=0));break}var c=u.charCodeAt(t+o);if(c!==e.charCodeAt(i+o))break;47===c&&(s=o)}var l="";for(o=t+s+1;o<=r;++o)o!==r&&47!==u.charCodeAt(o)||(0===l.length?l+="..":l+="/..");return l.length>0?l+e.slice(i+s):(i+=s,47===e.charCodeAt(i)&&++i,e.slice(i))},_makeLong:function(u){return u},dirname:function(u){if(ye(u),0===u.length)return".";for(var e=u.charCodeAt(0),t=47===e,r=-1,n=!0,i=u.length-1;i>=1;--i)if(47===(e=u.charCodeAt(i))){if(!n){r=i;break}}else n=!1;return-1===r?t?"/":".":t&&1===r?"//":u.slice(0,r)},basename:function(u,e){if(void 0!==e&&"string"!=typeof e)throw new TypeError('"ext" argument must be a string');ye(u);var t,r=0,n=-1,i=!0;if(void 0!==e&&e.length>0&&e.length<=u.length){if(e.length===u.length&&e===u)return"";var D=e.length-1,a=-1;for(t=u.length-1;t>=0;--t){var s=u.charCodeAt(t);if(47===s){if(!i){r=t+1;break}}else-1===a&&(i=!1,a=t+1),D>=0&&(s===e.charCodeAt(D)?-1==--D&&(n=t):(D=-1,n=a))}return r===n?n=a:-1===n&&(n=u.length),u.slice(r,n)}for(t=u.length-1;t>=0;--t)if(47===u.charCodeAt(t)){if(!i){r=t+1;break}}else-1===n&&(i=!1,n=t+1);return-1===n?"":u.slice(r,n)},extname:function(u){ye(u);for(var e=-1,t=0,r=-1,n=!0,i=0,D=u.length-1;D>=0;--D){var a=u.charCodeAt(D);if(47!==a)-1===r&&(n=!1,r=D+1),46===a?-1===e?e=D:1!==i&&(i=1):-1!==e&&(i=-1);else if(!n){t=D+1;break}}return-1===e||-1===r||0===i||1===i&&e===r-1&&e===t+1?"":u.slice(e,r)},format:function(u){if(null===u||"object"!=typeof u)throw new TypeError('The "pathObject" argument must be of type Object. Received type '+typeof u);return function(u,e){var t=e.dir||e.root,r=e.base||(e.name||"")+(e.ext||"");return t?t===e.root?t+r:t+u+r:r}("/",u)},parse:function(u){ye(u);var e={root:"",dir:"",base:"",ext:"",name:""};if(0===u.length)return e;var t,r=u.charCodeAt(0),n=47===r;n?(e.root="/",t=1):t=0;for(var i=-1,D=0,a=-1,s=!0,o=u.length-1,c=0;o>=t;--o)if(47!==(r=u.charCodeAt(o)))-1===a&&(s=!1,a=o+1),46===r?-1===i?i=o:1!==c&&(c=1):-1!==i&&(c=-1);else if(!s){D=o+1;break}return-1===i||-1===a||0===c||1===c&&i===a-1&&i===D+1?-1!==a&&(e.base=e.name=0===D&&n?u.slice(1,a):u.slice(D,a)):(0===D&&n?(e.name=u.slice(1,i),e.base=u.slice(1,a)):(e.name=u.slice(D,i),e.base=u.slice(D,a)),e.ext=u.slice(i,a)),D>0?e.dir=u.slice(0,D-1):n&&(e.dir="/"),e},sep:"/",delimiter:":",win32:null,posix:null};ve.posix=ve;var me=ve;me.dirname;const we=me.join,be=me.extname;me.basename;class _e extends m{constructor(u){super(),__publicField(this,"_baseDirectory"),u&&this.setup(u)}get baseDirectory(){return this._baseDirectory}setup(u){this._baseDirectory=u,this.hasFired||this.dispatch()}async getDirectoryHandle(u,{create:e,createOnce:t}={}){if(""===u)return this.baseDirectory;let r=this.baseDirectory;const n=u.split(/\\|\//g);for(const i of n){try{r=await r.getDirectoryHandle(i,{create:t||e})}catch{throw new Error(`Failed to access "${u}": Directory does not exist`)}t&&(t=!1,e=!1)}return r}async getFileHandle(u,e=!1){if(0===u.length)throw new Error("Error: filePath is empty");const t=u.split(/\\|\//g),r=t.pop(),n=await this.getDirectoryHandle(t.join("/"),{create:e});try{return await n.getFileHandle(r,{create:e})}catch{throw new Error(`File does not exist: "${u}"`)}}async mkdir(u,{recursive:e}={}){await this.getDirectoryHandle(u,{create:!0})}async readdir(u,{withFileTypes:e}={}){const t=await this.getDirectoryHandle(u),r=[];for await(const n of t.values())"file"===n.kind&&".DS_Store"===n.name||(e?r.push(n):r.push(n.name));return r}async readFilesFromDir(u,e=this.getDirectoryHandle(u)){e=await e;const t=[];for await(const r of e.values())"file"===r.kind&&".DS_Store"===r.name||("file"===r.kind?t.push({name:r.name,kind:r.kind,path:`${u}/${r.name}`}):"directory"===r.kind&&t.push(...await this.readFilesFromDir(`${u}/${r.name}`,r)));return t}readFile(u){return this.getFileHandle(u).then((u=>u.getFile()))}async unlink(u){if(0===u.length)throw new Error("Error: filePath is empty");const e=u.split(/\\|\//g),t=e.pop();let r;try{r=await this.getDirectoryHandle(e.join("/"))}catch{return}try{await r.removeEntry(t,{recursive:!0})}catch{}}async writeFile(u,e){const t=await this.getFileHandle(u,!0);return await this.write(t,e),t}async write(u,e){const t=await u.createWritable();await t.write(e),await t.close()}async readJSON(u){const e=await this.readFile(u);try{return await pe.parse(await e.text())}catch{throw new Error(`Invalid JSON: ${u}`)}}writeJSON(u,e,t=!1){return this.writeFile(u,JSON.stringify(e,null,t?"\t":void 0))}async move(u,e){if(await this.fileExists(u))await this.copyFile(u,e);else{if(!(await this.directoryExists(u)))throw new Error(`File or folder does not exist: ${u}`);await this.copyFolder(u,e)}await this.unlink(u)}async copyFile(u,e){const t=await this.getFileHandle(u,!1),r=await this.getFileHandle(e,!0);return await this.copyFileHandle(t,r)}async copyFileHandle(u,e){const t=await e.createWritable();return await t.write(await u.getFile()),await t.close(),e}async copyFolder(u,e){const t=await this.getDirectoryHandle(u,{create:!1});await Be(t,(async(u,t)=>{await this.copyFileHandle(u,await this.getFileHandle(we(e,t),!0))}))}async copyFolderByHandle(u,e){const t=new _e(e);await Be(u,(async(u,e)=>{await this.copyFileHandle(u,await t.getFileHandle(e,!0))}))}loadFileHandleAsDataUrl(u){return new Promise((async(e,t)=>{const r=new FileReader;try{const n=await u.getFile();r.addEventListener("load",(()=>{e(r.result)})),r.addEventListener("error",t),r.readAsDataURL(n)}catch{t(`File does not exist: "${u.name}"`)}}))}async fileExists(u){try{return await this.getFileHandle(u),!0}catch{return!1}}async directoryExists(u){try{return await this.getDirectoryHandle(u),!0}catch{return!1}}}var xe,Se;function Pe(u,e){let t;try{t=new RegExp(e===xe.useRegExp?u:function(u){if("string"!=typeof u)throw new TypeError("Expected a string");return u.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&").replace(/-/g,"\\x2d")}(u),"g"+(e===xe.ignoreCase?"i":""))}catch{return}return t}(Se=xe||(xe={}))[Se.matchCase=0]="matchCase",Se[Se.ignoreCase=1]="ignoreCase",Se[Se.useRegExp=2]="useRegExp";const ke=new Set([".js",".ts",".lang",".mcfunction",".txt",".molang",".json",".html"]),Oe=new Set([".bridge","builds",".git s"]);class je{constructor(u){__publicField(this,"fileSystem"),__publicField(this,"matchedFiles",new Set),this.projectFolderHandle=u,this.fileSystem=new _e(u)}setMatchedFiles(u){const e=this.matchedFiles;return this.matchedFiles=new Set(u),[...e]}async createQuery(u,{searchType:e}){if(this.matchedFiles.clear(),""===u)return[];const t=[],r=Pe(u,e);return r?(await this.iterateProject(r,t),t):[]}async executeQuery(u,e,{searchType:t}){if(""===u)return[];const r=Pe(u,t);if(!r)return[];await this.replaceAll(r,e)}async iterateProject(u,e){await Be(this.projectFolderHandle,(async(t,r)=>{const n=be(r);if(!ke.has(n))return;const i=[],D=await t.getFile().then((u=>u.text()));u.lastIndex=0;let a=u.exec(D);for(;null!==a;){let e=a.index-50,t=50;e<0&&(t+=e,e=0),i.push({isStartOfFile:0===e,beforeMatch:D.substr(e,t),match:a[0],afterMatch:D.substr(a.index+a[0].length,50)}),a=u.exec(D)}i.length>0&&(this.matchedFiles.add(r),e.push({filePath:r,matches:i}))}),Oe)}async replaceAll(u,e){await Be(this.projectFolderHandle,(async(t,r)=>{const n=be(r);if(!ke.has(n)||!this.matchedFiles.has(r))return;const i=await t.getFile().then((u=>u.text())),D=function(u,e,t){return u.replace(e,((u,...e)=>(e=e.slice(0,-2),t.replace(/{(\d+)}/g,((u,...t)=>{var r;return null!=(r=e[Number(t[0])])?r:u})))))}(i,u,e);i!==D&&await this.fileSystem.write(t,D)}),Oe)}async replaceInFile(u,e){}}a(je),u.FindAndReplace=je,Object.defineProperty(u,"__esModule",{value:!0})}({});
